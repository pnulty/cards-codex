!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b516ffae-f3e4-38ee-b73c-a35c324d3837")}catch(e){}}();
define(["exports","./c_pap-events_replay_shown_modal"],(function(e,t){"use strict";function n(e,t,n={}){if(e)return;const r=new Error(`Assertion Error: ${t}`),{tags:o=[],exc_extra:a=null}=n;throw r.assertOptions={tags:o.concat("module:exception","assert"),exc_extra:a},r.isAssertion=!0,r}const r=/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/,o=/^[a-zA-Z][a-zA-Z0-9+.\-]*$/;class a{constructor(e={}){this.dict={},this.add(e)}static parseString(e){if(!e)return{};const t={};return e.split("&").forEach((e=>{if(""!==e){const n=e.split("="),r=a.decode(n[0]),o=a.decode(n.slice(1).join("="));if(t.hasOwnProperty(r)){const e=t[r];let n;n="string"==typeof e?[e]:void 0===e?[]:e,n.push(o),t[r]=n}else t[r]=o}})),t}add(e,t){if("string"==typeof e)t&&(Array.isArray(t)?this.dict[e]=t.map(String):this.dict[e]=String(t));else for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];null!=n&&(Array.isArray(n)?this.dict[t]=n.map(String):this.dict[t]=String(n))}return this}remove(e){return delete this.dict[e],this}replace(e){return this.dict=e,this}toString(e){const t=[],n=Object.keys(this.dict).sort(e);for(const e of n)if(this.dict.hasOwnProperty(e)){const n=this.dict[e];Array.isArray(n)?n.forEach((n=>{t.push(a.encode(e)+"="+a.encode(n))})):t.push(a.encode(e)+"="+a.encode(n))}return t.length?t.join("&"):""}static decode(e){return null==e?"":i.decode(e.replace(/\+/g,"%20"))}static encode(e){return null==e?"":i.encode(e).replace(/%20/g,"+")}}class i{constructor(e={}){this.query=new a,this.initFromObject(e)}initFromObject(e){this.setScheme(e.scheme),this.authority=e.authority||"",this.path=e.path||"",this.setQuery(e.query),this.fragment=e.fragment||""}getScheme(){return this.scheme}getAuthority(){return this.authority}getPath(){return this.path}getQuery(){return this.query.dict}getFragment(){return this.fragment}setScheme(e=""){return n(!e||Boolean(e.match(o)),"Invalid scheme",{exc_extra:{scheme_param:e}}),this.scheme=e,this}setAuthority(e=""){return this.authority=e,this}setPath(e=""){return this.path=e,this}setQuery(e={}){return this.query=new a(e),this}setFragment(e=""){return this.fragment=e,this}updateQuery(e,t){return this.query.add(e,t),this}removeQuery(e){return this.query.remove(e),this}clone(){return new i(this.toObject())}toObject(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}}toString(e){let t="";return this.scheme&&(t+=this.scheme+":"),this.authority&&(t+="//"+i.encode(this.authority,":@[]")),t+this.toRelativeUri(e)}toRelativeUri(e){let t="";this.path&&(n(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),t+=i.encode(this.path,"/"));const r=this.query.toString(e);return r&&(t+="?"+r),this.fragment&&(t+="#"+i.encode(this.fragment,":@[]/&=+?#!")),t}static parse(e){const t=String(e).match(r)||[],[,n,o,s,c,d]=t,u=new i;return u.setScheme(n),u.setAuthority(i.decode(o)),u.setPath(i.decode(s)),u.setQuery(a.parseString(c)),u.setFragment(i.decode(d)),u}static decode(e){return e?decodeURIComponent(e):""}static encode(e,t=""){if(!e)return"";e=encodeURIComponent(e),t+="~";for(const n of t){const t=encodeURIComponent(n);e=e.replace(new RegExp(t,"g"),n)}return e}static encode_parts(e,t="/"){return e.split(t).map((e=>i.encode(e))).join(t)}}var s,c;i.Query=a,e.MethodKind=void 0,(s=e.MethodKind||(e.MethodKind={}))[s.Unary=0]="Unary",s[s.ServerStreaming=1]="ServerStreaming",s[s.ClientStreaming=2]="ClientStreaming",s[s.BiDiStreaming=3]="BiDiStreaming",function(e){e[e.NoSideEffects=1]="NoSideEffects",e[e.Idempotent=2]="Idempotent"}(c||(c={}));const d=function(e,t){if(!e)throw new Error(t)},u=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/,l=function(e){if(e.match(u))return[e];const t=e.split("."),n=[];for(let e=0;e<t.length;e++)n.push(t.slice(e).join("."));return n},h=function(e){const t=e.split("/"),n=[];for(let e=0;e<t.length;e++){const r=t.slice(0,t.length-e).join("/");""!==r&&n.push(r),n.push(r+"/")}return n},g=["=",";"],m=function(e,t,n=!1){d("string"==typeof e,`${t} must be a string, but was ${typeof e}`),d(n||e.length>0,`${t} must not be empty`),d(!function(e){if(null==e)return!1;for(const t of g)if(-1!==e.indexOf(t))return!0;return!1}(e),`${t} contains illegal characters`)},f=e=>m(e,"Cookie name",!1),p=e=>{return t=e,n="Cookie max age",void d(!isNaN(Number(t)),`${n} must be numeric, but was ${t}`);var t,n},w=function(e,t,n={}){var r,o;f(e),(e=>{m(e,"Cookie value",!0)})(t),n.maxAge&&p(n.maxAge),n.domain&&(r=n.domain,m(r,"Cookie domain",!1)),n.path&&(o=n.path,m(o,"Cookie path",!1));const a=[`${e}=${t}`];n.maxAge&&a.push(`max-age=${n.maxAge}`),n.domain&&a.push(`domain=${n.domain}`),n.path&&a.push(`path=${n.path}`),n.samesite&&a.push(`samesite=${n.samesite}`),a.push("secure"),document.cookie=a.join("; ")},y={create(e,t,n,r,o="/",a="lax"){let i;null!=n&&(d("number"==typeof n,"Cookie max age days must be a number"),i=24*n*60*60),w(e,t,{maxAge:i,path:o,domain:r,samesite:a})},read(e){f(e);const t=[];for(const n of document.cookie.split(";")){const r=n.split("=",1)[0];r.trim()===e&&t.push(n.substring(r.length+1,n.length).trim())}let n=!1;const r=[];for(const e of t)""===e?n=!0:r.push(e);return 1===r.length?r[0]:r.length>1?(y.delete(e),null):n?"":null},delete(e){const t=[null,...l(window.location.hostname)],n=[null,...h(window.location.pathname)];for(const r of t)for(const t of n)w(e,"",{maxAge:-1,domain:r,path:t,samesite:"lax"})},are_enabled:()=>navigator.cookieEnabled?navigator.cookieEnabled:(document.cookie="this_is_a_test_cookie",-1!==document.cookie.indexOf("this_is_a_test_cookie"))};var v,b=Object.freeze({__proto__:null,Cookies:y,_setCookie:w});function C(t){const n=e.Code[t];return"string"!=typeof n?t.toString():n[0].toLowerCase()+n.substring(1).replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()))}e.Code=void 0,(v=e.Code||(e.Code={}))[v.Canceled=1]="Canceled",v[v.Unknown=2]="Unknown",v[v.InvalidArgument=3]="InvalidArgument",v[v.DeadlineExceeded=4]="DeadlineExceeded",v[v.NotFound=5]="NotFound",v[v.AlreadyExists=6]="AlreadyExists",v[v.PermissionDenied=7]="PermissionDenied",v[v.ResourceExhausted=8]="ResourceExhausted",v[v.FailedPrecondition=9]="FailedPrecondition",v[v.Aborted=10]="Aborted",v[v.OutOfRange=11]="OutOfRange",v[v.Unimplemented=12]="Unimplemented",v[v.Internal=13]="Internal",v[v.Unavailable=14]="Unavailable",v[v.DataLoss=15]="DataLoss",v[v.Unauthenticated=16]="Unauthenticated";class _ extends Error{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Code.Unknown,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;var a;super(function(e,t){return e.length?`[${C(t)}] ${e}`:`[${C(t)}]`}(t,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=n;const i=null!==(a=null!=o?o:Array.isArray(r)?void 0:r)&&void 0!==a?a:{};this.metadata=new Headers(i),this.details=[]}}function A(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Code.Unknown,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t instanceof _?t:t instanceof Error?"AbortError"==t.name?new _(t.message,e.Code.Canceled,r):new _(t.message,e.Code.Unknown,r):new _(String(t),n,r)}function E(t,n){return function(e,t){const n={};for(const[r,o]of Object.entries(e.methods)){const a=t(Object.assign(Object.assign({},o),{localName:r,service:e}));null!=a&&(n[r]=a)}return n}(t,(r=>{switch(r.kind){case e.MethodKind.Unary:return function(e,t,n){return async function(r,o){var a,i;const s=await e.unary(t,n,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,r);return null===(a=null==o?void 0:o.onHeader)||void 0===a||a.call(o,s.header),null===(i=null==o?void 0:o.onTrailer)||void 0===i||i.call(o,s.trailer),s.message}}(n,t,r);case e.MethodKind.ServerStreaming:return function(e,t,n){return function(r,o){let a;return{[Symbol.asyncIterator]:()=>({async next(){var i,s;a||(a=await e.serverStream(t,n,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,r),null===(i=null==o?void 0:o.onHeader)||void 0===i||i.call(o,a.header));const c=await a.read();return c.done?(null===(s=null==o?void 0:o.onTrailer)||void 0===s||s.call(o,a.trailer),{done:!0,value:void 0}):{done:!1,value:c.value}}})}}}(n,t,r);default:return null}}))}function O(e,t){return t.concat().reverse().reduce(((e,t)=>t(e)),e)}function x(t){let n,r=new Uint8Array(0);function o(e){const t=new Uint8Array(r.length+e.length);t.set(r),t.set(e,r.length),r=t}return new ReadableStream({start(){n=t.getReader()},async pull(t){let a;for(;;){if(void 0===a&&r.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+r[t];a={flags:r[0],length:e}}if(void 0!==a&&r.byteLength>=a.length+5)break;const e=await n.read();if(e.done)break;o(e.value)}if(void 0===a)return 0==r.byteLength?void t.close():void t.error(new _("premature end of stream",e.Code.DataLoss));const i=r.subarray(5,5+a.length);r=r.subarray(5+a.length),t.enqueue({flags:a.flags,data:i})}})}function S(e,t,n){const r=e.data.length+5,o=new Uint8Array(t,n,r);o[0]=e.flags;for(let t=e.data.length,n=4;n>0;n--)o[n]=t%256,t>>>=8;return o.set(e.data,5),r}class k extends t.Message{constructor(e){super(),this.code=0,this.message="",this.details=[],t.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new k).fromBinary(e,t)}static fromJson(e,t){return(new k).fromJson(e,t)}static fromJsonString(e,t){return(new k).fromJsonString(e,t)}static equals(e,n){return t.proto3.util.equals(k,e,n)}}function U(t){!function(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}();const n=t;return{async unary(r,o,a,i,s,c){var d,u,l,h;try{return await(u={stream:!1,service:r,method:o,url:`${t.baseUrl.replace(/\/$/,"")}/${r.typeName}/${o.name}`,init:{method:"POST",credentials:null!==(d=t.credentials)&&void 0!==d?d:"same-origin",redirect:"error",mode:"cors"},header:N(s,i),message:c instanceof o.I?c:new o.I(c),signal:null!=a?a:(new AbortController).signal},l=async r=>{var a,i,s;const c=await fetch(r.url,Object.assign(Object.assign({},r.init),{headers:r.header,signal:r.signal,body:T(r.message,t.binaryOptions)})),d=null!==(s=null!==(i=null!==(a=R(c))&&void 0!==a?a:P(c.headers))&&void 0!==i?i:D(c.headers))&&void 0!==s?s:j(c.headers);if(d)throw d;try{if(!c.body)throw"missing response body";const e=x(c.body).getReader(),t=await e.read();if(t.done)throw"premature eof";if(t.value.flags===$)throw L(t.value.data),"unexpected trailer";const r=o.O.fromBinary(t.value.data,n.binaryOptions),a=await e.read();if(a.done)throw"missing trailer";if(a.value.flags!==$)throw"missing trailer";const i=L(a.value.data);if(!(await e.read()).done)throw"extraneous data";return{stream:!1,header:c.headers,message:r,trailer:i}}catch(t){throw A(t,e.Code.Internal,q(c.headers))}},h=n.interceptors,h&&(l=O(l,h)),l(u))}catch(t){throw A(t,e.Code.Internal)}},async serverStream(n,r,o,a,i,s){var c,d,u,l;try{return await(d={stream:!1,service:n,method:r,url:`${t.baseUrl.replace(/\/$/,"")}/${n.typeName}/${r.name}`,init:{method:"POST",credentials:null!==(c=t.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:N(i,a),message:s instanceof r.I?s:new r.I(s),signal:null!=o?o:(new AbortController).signal},u=async o=>{var a,i,s;const c=await fetch(o.url,Object.assign(Object.assign({},o.init),{headers:o.header,signal:o.signal,body:T(o.message,t.binaryOptions)})),d=null!==(s=null!==(i=null!==(a=R(c))&&void 0!==a?a:P(c.headers))&&void 0!==i?i:D(c.headers))&&void 0!==s?s:j(c.headers);if(d)throw d;if(!c.body)throw A("missing response body",e.Code.Internal,q(c.headers));const u=x(c.body).getReader();let l=!1,h=!1;return{stream:!0,service:n,method:r,header:c.headers,trailer:new Headers,async read(){try{const n=await u.read();if(n.done){if(h&&!l)throw new _("missing trailers",e.Code.Internal,q(c.headers));return{done:!0,value:void 0}}return(n.value.flags&$)===$?(l=!0,L(n.value.data).forEach(((e,t)=>this.trailer.append(t,e))),{done:!0,value:void 0}):(h=!0,{done:!1,value:r.O.fromBinary(n.value.data,t.binaryOptions)})}catch(t){throw A(t,e.Code.Unknown,q(c.headers))}}}},l=t.interceptors,l&&(u=O(u,l)),u(d))}catch(t){throw A(t,e.Code.Internal)}}}}function T(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new ArrayBuffer(t.reduce(((e,t)=>e+t.data.length+5),0));let o=0;for(const e of t)o+=S(e,r,o);return new Uint8Array(r)}({data:e.toBinary(t),flags:I})}k.runtime=t.proto3,k.typeName="grpc.status.v1.Status",k.fields=t.proto3.util.newFieldList((()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:t.Any,repeated:!0}]));const I=0,$=128;function N(e,t){const n=new Headers(null!=e?e:{});return n.set("Content-Type","application/grpc-web+proto"),n.set("X-Grpc-Web","1"),n.set("X-User-Agent","@bufbuild/connect-web"),void 0!==t&&n.set("Grpc-Timeout",`${t}m`),n}function P(t){const n=t.get("Content-Type");switch(null==n?void 0:n.toLowerCase()){case"application/grpc-web":case"application/grpc-web+proto":return;case"application/grpc-web-text":case"application/grpc-web-text+proto":return new _("grpc-web-text is not supported",e.Code.Internal,q(t));default:return new _(`unexpected content type: ${String(n)}`,e.Code.Internal,q(t))}}function R(t){var n;if(function(t){switch(t){case 200:return null;case 400:return e.Code.Internal;case 401:return e.Code.Unauthenticated;case 403:return e.Code.PermissionDenied;case 404:return e.Code.Unimplemented;case 429:case 502:case 503:case 504:return e.Code.Unavailable;default:return e.Code.Unknown}}(t.status))return new _(decodeURIComponent(null!==(n=t.headers.get("grpc-message"))&&void 0!==n?n:""),q(t.headers))}function j(t){var n;const r=t.get("grpc-status");if(null===r)return;const o=parseInt(r);return 0!==o?o in e.Code?new _(decodeURIComponent(null!==(n=t.get("grpc-message"))&&void 0!==n?n:""),o,void 0,q(t)):new _(`invalid grpc-status: ${r}`,e.Code.Internal,void 0,q(t)):void 0}function D(n){const r=n.get("grpc-status-details-bin");if(null!=r)try{const o=function(n,r,o){try{const e=t.protoBase64.dec(n);return r?r.fromBinary(e,o):e}catch(t){throw new _(t instanceof Error?t.message:String(t),e.Code.DataLoss)}}(r,k);if(0==o.code)return;const a=new _(o.message,o.code,void 0,n);return a.details.push(...o.details),a}catch(t){const r=A(t,e.Code.Internal);return n.forEach(((e,t)=>r.metadata.append(t,e))),r}}function L(e){var t;const n=function(e){const t=new Headers,n=String.fromCharCode(...e).split("\r\n");for(const e of n){if(""===e)continue;const n=e.indexOf(":");if(n>0){const r=e.substring(0,n).trim(),o=e.substring(n+1).trim();t.append(r,o)}}return t}(e),r=null!==(t=D(n))&&void 0!==t?t:j(n);if(r)throw r;return n}function q(e){return Object.fromEntries(Array.from(e.entries()))}function B(e){return e?"zh-TW"===(e=e.replace(/_/gi,"-"))?"zh-Hant-TW":"zh-CN"===e?"zh-Hans-CN":"es"===e?"es-419":"es-ES"===e?"es":e:e}function H(e){const n=t.getDevServerHostname();return n?`${e}_dev_${n}`:e}function X(){return y.read(H("__Host-js_csrf"))}function F(){const e=X();if(!e){let e="Failed to read csrf cookie.";window!==top?e+=" This could be a result of restrictions of cookies inside iframes in certain browsers, or it could just be that the user has disabled or deleted their cookies.":e+=" This likely means either the user deleted their cookies after loading the page, that the user has disallowed cookies, or has some extension interfering with cookies.";const t=new Error(e);throw t.severity="critical",t.trackAsMetric="failed_csrf_cookie_read"+(window!==top?"/iframed":""),t}return e}const W=e=>!!e&&"0"!==e.toString();function M(e){const n={};return e&&(e.activeUser&&W(e.activeUser.id)&&(n["X-Dropbox-Uid"]=e.activeUser.id.toString()),e.activeTeam&&W(e.activeTeam.id)&&(n["X-Dropbox-Teamid"]=e.activeTeam.id.toString()),(e.authRole||e.authActionType)&&(n["X-Dropbox-Team-Authorization"]=JSON.stringify({auth_role:String(e.authRole),auth_action_type:String(e.authActionType)}))),t.getPageAuthChannel()!==t.AuthChannel.OAUTH_TOKEN&&(n["X-CSRF-Token"]=F()),n}function Q(e,t){const n={grpc_service:t.service.typeName,grpc_method:t.method.name};"code"in e&&(n.grpc_code=(e.code||"").toString());const r="metadata"in e&&e.metadata?e.metadata.get("x-dropbox-request-id"):void 0;r&&(n.xhr_request_id=r);const o=e;return o.excExtra=n,o.tags=["grpc-web"],o}let z=!0;const K=(e,t)=>{"undefined"==typeof jest&&(z&&(console.log("[1;31mTo debug gRPC-web API requests, please install the connect-web devtools extension.[0m\nYou can find it here: https://chromewebstore.google.com/detail/grpc-web-developer-tools/cacoibopgjlodngfokahhkphgcohakai."),z=!1),console.error(`Error in gRPC-web request to ${e}:`,t))},G=[e=>async t=>{try{const n=await e(t);return n.stream?{...n,read:async()=>{try{return await n.read()}catch(e){const n=Q(e,t);throw K(t.url,n),n}}}:n}catch(e){const n=Q(e,t);throw K(t.url,n),n}}];function J(){return G}"undefined"!=typeof __CONNECT_WEB_DEVTOOLS__&&(z=!1,G.push(__CONNECT_WEB_DEVTOOLS__)),window.addEventListener("connect-web-dev-tools-ready",(()=>{z=!1,"undefined"==typeof __CONNECT_WEB_DEVTOOLS__||G.includes(__CONNECT_WEB_DEVTOOLS__)||G.push(__CONNECT_WEB_DEVTOOLS__)}));const V="/web-grpc/edison";function Z(e=""){return"undefined"!=typeof window?window.location.host:i.parse(e).getAuthority()}const Y=e=>async n=>{const r=t.getRequestOriginalUrl(),o={"Accept-Language":B(t.getPageLocale()),"X-Edison-Atlasservlet":t.getAtlasservlet(),"X-Edison-Page-Name":t.getPageName(),"X-Edison-Original-Url":r,"X-Edison-Original-Referer":t.getRequestOriginalReferrer()||"","X-Edison-Prompt-Controller":t.getInitData().deprecatedPromptController||"","X-Edison-Prompt-Action":t.getInitData().deprecatedPromptAction||"","X-Dropbox-Browser-Id":t.getDeviceIdHex(),"X-Dropbox-Authority":Z(r),...M(t.getAuthRequestInfo()),...t.getExtraHttpRequestHeaders()};return t.getPageName()&&(o["X-Dropbox-Client-Yaps-Attribution"]=`${t.getAtlasservlet()}:${t.getPageName()}`),Object.entries(o).filter((([e,t])=>!!t)).filter((([e,t])=>!(e.toLowerCase().startsWith("x-")&&n.header.has(e)))).forEach((([e,t])=>{t&&!n.header.has(e)&&n.header.set(e,t)})),await e(n)};function ee(e=V){return U({baseUrl:e,interceptors:[Y,...J()]})}e.ConnectError=_,e.Cookies=y,e.QueryComponent=a,e.URI=i,e.assert=n,e.assertDropboxDomain=function(e){const t=document.createElement("a");t.href=e;const n=t.hostname||window.location.hostname;if(!n.endsWith(".dropbox.com"))throw new Error(`Cannot send the CSRF token to ${n}`)},e.bem=function(e){function t(t,n){return e+(t?`__${t}`:"")+(n?`--${n}`:"")}return Object.assign(t,{mod:t.bind(null,null)})},e.cookies_esnext=b,e.createEdisonGRPCWebPromiseClient=function(e,t=V){return E(e,ee(t))},e.createEdisonGrpcWebTransport=ee,e.createGrpcWebTransport=U,e.createPromiseClient=E,e.getAuthHeaders=M,e.getDefaultInterceptors=J,e.localeToBcp47LangTag=B,e.makeCookieName=H,e.mustReadCsrfToken=F,e.readCsrfToken=X}));
//# sourceMappingURL=c_bem.js-vflYy61ZS.map

//# debugId=b516ffae-f3e4-38ee-b73c-a35c324d3837