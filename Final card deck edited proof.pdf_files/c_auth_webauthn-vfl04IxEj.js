!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a1fa65ad-f8c1-3b46-8890-babd201333da")}catch(e){}}();
define(["exports","./c_action_bar_action_bar_constants","./c_security_csrf_hmac"],(function(e,r,t){"use strict";var o;e.ErrorType=void 0,(o=e.ErrorType||(e.ErrorType={}))[o.OtherError=1]="OtherError",o[o.SecurityError=2]="SecurityError",o[o.NotAllowedError=3]="NotAllowedError",o[o.InvalidStateError=4]="InvalidStateError",o[o.Canceled=5]="Canceled",o[o.Timeout=6]="Timeout",o[o.NotSupportedError=7]="NotSupportedError";const n={SecurityError:e.ErrorType.SecurityError,NotAllowedError:e.ErrorType.NotAllowedError,InvalidStateError:e.ErrorType.InvalidStateError,AbortError:e.ErrorType.Canceled,TimeoutError:e.ErrorType.Timeout,NotSupportedError:e.ErrorType.NotSupportedError};var a;!function(e){e[e.COSE=0]="COSE",e[e.DER=1]="DER"}(a||(a={}));const i=["internal","hybrid","usb"];function s(){return window.PublicKeyCredential&&(!0===r.mozilla&&parseInt(r.version,10)>=60||!0===r.chrome&&parseInt(r.version,10)>=66||!0===r.edge&&parseFloat(r.version)>=17.17682||!0===r.safari&&parseFloat(r.version)>=12.2)}function c(e){return!(!e||!s())&&((!0!==r.edge||!0!==e.disable_on_edge)&&(!0!==r.safari||!0!==e.disable_on_safari))}function l(r){if(r instanceof DOMException){const e=n[r.name];if(void 0!==e)return{errorCode:e,errorData:r.toString&&r.toString()}}return{errorCode:e.ErrorType.OtherError,errorData:r.toString&&r.toString()}}e.LATEST_PROTOCOL="webauthn_wd07",e.LATEST_PROTOCOL_CAMEL_CASE="webauthnWd07",e.PROTOCOLS={webauthn_wd07:""},e.canRegisterAuthenticator=function(e){return c(e)},e.canUseAuthenticator=function(e){return c(e)&&function(e){if(!0===r.edge&&parseFloat(r.version)>=17.17682&&parseFloat(r.version)<17.17713||!0===r.chrome&&69===parseInt(r.version,10)||!0===r.safari&&parseFloat(r.version)<13.1){if(e.allowCredentials)for(const r of e.allowCredentials)if(r.key_format===a.COSE)return!0;return!1}return!0}(e)},e.isSupportedOnBrowser=s,e.isWebAuthnSignalApiSupported=function(){const e=window.PublicKeyCredential;return void 0!==e&&void 0!==e.signalAllAcceptedCredentials&&void 0!==e.signalCurrentUserDetails},e.register=function(e){const r={challenge:t.b64urldecode(e.challenge),timeout:e.timeout,rp:{id:e.rp.id,name:e.rp.name,icon:e.rp.icon},user:{id:t.b64urldecode(e.user.id),name:e.user.name,displayName:e.user.displayName,icon:e.user.icon},authenticatorSelection:e.authenticatorSelection};void 0!==e.excludeCredentials&&(r.excludeCredentials=e.excludeCredentials.map((e=>({type:e.type,id:t.b64urldecode(e.id),transports:e.transports})))),void 0!==e.pubKeyCredParams&&(r.pubKeyCredParams=e.pubKeyCredParams.map((e=>({type:e.type,alg:e.alg})))),void 0===e.attestation&&(r.attestation="direct");const o={publicKey:r};return void 0!==e.mediation&&(o.mediation=e.mediation),"conditional"!==e.mediation||r.authenticatorSelection.authenticatorAttachment||(r.authenticatorSelection.authenticatorAttachment="platform"),navigator.credentials.create(o).then((e=>({response:{clientDataJSON:t.b64urlencode(e.response.clientDataJSON),attestationObject:t.b64urlencode(e.response.attestationObject)}}))).catch((e=>l(e)))},e.sign=function(e,o,n){const a={challenge:t.b64urldecode(e.challenge),timeout:e.timeout,rpId:e.rpId,userVerification:e.userVerification,extensions:e.extensions};void 0!==e.allowCredentials&&(a.allowCredentials=e.allowCredentials.map((e=>{let o;return e.transports&&e.transports.length>0&&(o=e.transports),!r.mozilla||e.transports&&0!==e.transports.length||(o=i),{type:e.type,id:t.b64urldecode(e.id),transports:o}})));const s={publicKey:a};return o&&(s.mediation=o),n&&(s.signal=n),navigator.credentials.get(s).then((e=>({id:e.id,response:{clientDataJSON:t.b64urlencode(e.response.clientDataJSON),authenticatorData:t.b64urlencode(e.response.authenticatorData),signature:t.b64urlencode(e.response.signature),userHandle:e.response.userHandle&&t.b64urlencode(e.response.userHandle)}}))).catch((e=>l(e)))}}));
//# sourceMappingURL=c_auth_webauthn.js-vflNLjc8s.map

//# debugId=a1fa65ad-f8c1-3b46-8890-babd201333da