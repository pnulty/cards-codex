!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8c302583-0b50-3343-8006-e8de60145288")}catch(e){}}();
define(["require","exports","./c_action_bar_action_bar_constants","./e_ui_page_files_router","./c_google_one_tap_lib","./c_core_notify","./c_core_i18n","./e_core_exception","./c_src_sink_index","./c_src_types_index","./c_pap-events_replay_shown_modal","./c_ungated_idx_db_access_lib","react","react-dom","./c_helpers_hooks_component-did-mount","./c_dig-icons_assets_ui-icon_line_restore","./c_signup_signin_helpers","./c_react-transition-group_CSSTransition","./c_bem","./e_edison"],(function(e,t,n,i,o,a,s,r,l,_,d,c,g,u,E,h,p,m,S,R){"use strict";function I(e){return e&&e.__esModule?e:{default:e}}var L=I(g),O=I(u);const T={log_web_login_intent(){A({".tag":"web_login_intent"})},log_web_signup_intent(){A({".tag":"web_signup_intent"})},log_web_login_captcha(){A({".tag":"web_login_captcha"})},log_web_signup_captcha(){A({".tag":"web_signup_captcha"})}},f=(e,t)=>{const n=i.filterApiError(t);if(!n)return!1;let o;const a=(null==n?void 0:n.response)||(null==n?void 0:n.message)||(null==n?void 0:n.summary);return!!a&&(a.indexOf("Fetch network failure - message aborted or user offline")>-1?o="Fetch network failure - message aborted or user offline":a.indexOf("invalid_logged_out_cookie/")>-1?o="invalid_logged_out_cookie":a.indexOf("invalid_csrf_token/")>-1&&(o="invalid_csrf_token"),!!o&&(i.UDCL.logEvent({class:"api_error",action:"auth_event_logger",object:"client"},{tags:{event_name:e,rpc_path:"log_auth_event",error:o}}),!0))},A=e=>{const t=new i.NoAuthApiV2Client;try{(function(e){return e.ns("auth_logger")})(t).rpc("log_auth_event",{event_name:e,event_url:i.get_href()},{})}catch(t){const n=e[".tag"];f(n,t)||r.reportException({err:t,severity:r.SEVERITY.NONCRITICAL,tags:["login_or_register"]})}};var G,v,C,N,D;function P(e){return{class:"auth",action:"select",object:"auth_action",properties:e}}function y(e){return{class:"auth",action:"view",object:"auth_dialog",properties:e}}!function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"}(G||(G={})),t.AuthTextInputAutoComplete=void 0,(v=t.AuthTextInputAutoComplete||(t.AuthTextInputAutoComplete={})).USERNAME="username",v.NEW_PASSWORD="new-password",v.CURRENT_PASSWORD="current-password",v.FULL_NAME="name",v.FIRST_NAME="given-name",v.LAST_NAME="family-name",v.ON="on",v.OFF="off",function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"}(C||(C={})),function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"}(N||(N={})),t.UDCLResult=void 0,(D=t.UDCLResult||(t.UDCLResult={})).SUCCESS="success",D.ERR_OTHER="err_other",D.ERR_RATE_LIMIT="err_rate_limit",D.ERR_UNREACHABLE="err_unreachable",D.ERR_EXPIRED="err_expired",D.ERR_BAD_CARRIER="err_bad_carrier",D.ERR_INVALID_NUMBER="err_invalid_number",D.ERR_NOT_A_MOBILE="err_not_a_mobile",D.ERR_INVALID_CREDENTIALS="err_invalid_credentials",D.ERR_LOGIN_VIA_EMAIL="err_login_via_email",D.ERR_TWO_FACTOR="err_two_factor",D.ERR_TWO_FACTOR_REQUIRED="err_two_factor_required",D.ERR_ENABLE_TWO_FACTOR_REQUIRED="err_enable_two_factor_required",D.ERR_TOS_SIGNATURE_REQUIRED="err_tos_signature_required",D.ERR_PASSWORD_REQUIRED="err_password_required",D.ERR_SSO="err_sso",D.ERR_SSO_REQUIRED="err_sso_required",D.ERR_GOOGLE_LOGIN_NOT_ALLOWED="err_google_login_not_allowed",D.ERR_RESTART_FLOW_REQUIRED="err_restart_flow_required",D.ERR_CAPTCHA_REQUIRED="err_captcha_required",D.ERR_NO_EMAIL_IN_RESPONSE="err_no_email_in_response",D.ERR_EMAILS_DO_NOT_MATCH="err_emails_do_not_match",D.ERR_APPLE_LOGIN_NOT_ALLOWED="err_apple_login_not_allowed",D.ERR_KAKAO_LOGIN_NOT_ALLOWED="err_kakao_login_not_allowed",D.ERR_EMAIL_FORM_FIELD="err_email_form_field",D.ERR_FIRST_NAME_FORM_FIELD="err_first_name_form_field",D.ERR_LAST_NAME_FORM_FIELD="err_last_name_form_field",D.ERR_PASSWORD_FORM_FIELD="err_password_form_field",D.ERR_TOS_AGREE_FORM_FIELD="err_tos_agree_form_field",D.ERR_NOT_SUPPORTED="err_not_supported",D.ERR_TOO_MANY_REQUESTS="err_too_many_requests",D.ERR_NOT_VERIFIED="err_not_verified",D.ERR_USER_CANCELLED_AUTHORIZE="err_user_cancelled_authorize",D.ERR_ACCESS_DENIED="err_access_denied",D.ERR_DISABLED="err_disabled",D.ERR_INVALID_TOKEN="err_invalid_token",D.ERR_USER_ALREADY_INVITED_TO_TEAM="err_user_already_invited_to_team",D.ERR_UNSUPPORTED="err_unsupported",D.ERR_USER_NOT_LOGGED_IN="err_user_not_logged_in",D.ERR_ALREADY_PAIRED="err_already_paired",D.ERR_ALREADY_LINKED_USERS="err_already_linked_users",D.ERR_PAIR_SAME_ROLE="err_pair_same_role",D.ERR_PAIR_CURRENT_ACCOUNT="err_pair_current_account",D.ERR_BLOCKED_DOMAIN="err_blocked_domain",D.ERR_AUTOMATION_DETECTED="err_automation_detected",D.ERR_ACCOUNT_CAPTURE="err_account_capture";const b="n_a";var U,w,M;!function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.GOOGLE_ONE_TAP="google_one_tap",e.APPLE="apple_auth",e.MAGIC_LINK="magic_link"}(U||(U={})),function(e){e.GOOGLE_LOGIN_START="google_login_start",e.GOOGLE_LOGIN_SUCCEEDED="google_login_succeeded",e.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR="google_login_requires_two_factor",e.GOOGLE_LOGIN_FAILED="google_login_failed",e.GOOGLE_SIGNUP_START="google_signup_start",e.GOOGLE_SIGNUP_SUCCEEDED="google_signup_succeeded",e.GOOGLE_SIGNUP_FAILED="google_signup_failed",e.GOOGLE_ONE_TAP_SIGNUP_CLICK="google_onetap_signup_click"}(w||(w={})),function(e){e.ENTER_EMAIL_CONTINUE="enter_email_continue",e.ENTER_EMAIL_CONTINUE_SSO="enter_email_continue_sso",e.LOGIN_SSO_USER="login_sso_user",e.ENTER_EMAIL="enter_email",e.REGISTER_ENTER_ACCOUNT_DETAILS="register_enter_account_details",e.LOGIN_ENTER_PASSWORD="login_enter_password",e.EMAIL_SUBMITTED_WITH_PASSWORD_AUTOFILL="email_submitted_with_password_autofill"}(M||(M={}));const k=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),F=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","target_user_not_found","invalid_pair_target","already_paired","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","tfa_required","requires_password","requires_twofactor","invalid_token","missing_email","unsupported_platform","unverified_email","server_error","disabled_user","user_already_invited_to_team","account_capture","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","apple_login_turned_off_for_teams","user_cancelled_authorize"]),x={success:t.UDCLResult.SUCCESS,emails_do_not_match:t.UDCLResult.ERR_EMAILS_DO_NOT_MATCH,emails_do_not_match_redirect:t.UDCLResult.ERR_EMAILS_DO_NOT_MATCH,not_verified:t.UDCLResult.ERR_NOT_VERIFIED,email_not_verified:t.UDCLResult.ERR_NOT_VERIFIED,enable_twofactor_required:t.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED,requires_twofactor:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED,requires_password:t.UDCLResult.ERR_PASSWORD_REQUIRED,sso_required:t.UDCLResult.ERR_SSO_REQUIRED,tos_required:t.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED,google_login_not_allowed:t.UDCLResult.ERR_GOOGLE_LOGIN_NOT_ALLOWED,too_many_requests:t.UDCLResult.ERR_TOO_MANY_REQUESTS,access_denied:t.UDCLResult.ERR_ACCESS_DENIED,disabled_account:t.UDCLResult.ERR_DISABLED,disabled_user:t.UDCLResult.ERR_DISABLED,tfa_required:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED,invalid_token:t.UDCLResult.ERR_INVALID_TOKEN,invalid_csrf_token:t.UDCLResult.ERR_INVALID_TOKEN,invalid_logged_out_cookie:t.UDCLResult.ERR_INVALID_TOKEN,missing_email:t.UDCLResult.ERR_NO_EMAIL_IN_RESPONSE,unverified_email:t.UDCLResult.ERR_NOT_VERIFIED,user_already_invited_to_team:t.UDCLResult.ERR_USER_ALREADY_INVITED_TO_TEAM,unsupported_platform:t.UDCLResult.ERR_NOT_SUPPORTED,user_not_logged_in:t.UDCLResult.ERR_USER_NOT_LOGGED_IN,target_user_not_found:t.UDCLResult.ERR_PAIR_CURRENT_ACCOUNT,invalid_pair_target:t.UDCLResult.ERR_PAIR_SAME_ROLE,already_paired:t.UDCLResult.ERR_ALREADY_PAIRED,other:t.UDCLResult.ERR_OTHER,account_capture:t.UDCLResult.ERR_ACCOUNT_CAPTURE,already_exists:t.UDCLResult.ERR_LOGIN_VIA_EMAIL,sms_error:t.UDCLResult.ERR_UNREACHABLE},B={funcaptcha_response:t.UDCLResult.ERR_CAPTCHA_REQUIRED,email:t.UDCLResult.ERR_EMAIL_FORM_FIELD,fname:t.UDCLResult.ERR_FIRST_NAME_FORM_FIELD,lname:t.UDCLResult.ERR_LAST_NAME_FORM_FIELD,password:t.UDCLResult.ERR_PASSWORD_FORM_FIELD,tos_agree:t.UDCLResult.ERR_TOS_AGREE_FORM_FIELD,apple_login_not_allowed:t.UDCLResult.ERR_APPLE_LOGIN_NOT_ALLOWED,apple_login_turned_off_for_teams:t.UDCLResult.ERR_APPLE_LOGIN_NOT_ALLOWED,no_email_in_response:t.UDCLResult.ERR_NO_EMAIL_IN_RESPONSE,user_cancelled_authorize:t.UDCLResult.ERR_USER_CANCELLED_AUTHORIZE,already_paired:t.UDCLResult.ERR_ALREADY_PAIRED,pair_same_role:t.UDCLResult.ERR_PAIR_SAME_ROLE,too_many_attempts:t.UDCLResult.ERR_TOO_MANY_REQUESTS,blocked_domain:t.UDCLResult.ERR_BLOCKED_DOMAIN,automation_detected:t.UDCLResult.ERR_AUTOMATION_DETECTED},W={logSignupIntent(e){K("signup/intent",{},1),e&&K("signup/intent/experiments",{...e},1)},logSignupAttempt(e){K("signup/attempt",{authType:e},1)},logSignupResponse(e,t,n,i){"funcaptcha_response"!==n?t?(K("signup/success",{authType:e},1),i&&K("signup/success/experiments",{authType:e,...i},1)):(K("signup/success",{authType:e},0),K("signup/failure",{authType:e,error:Q(n,k)},1),i&&(K("signup/success/experiments",{authType:e,...i},0),K("signup/failure/experiments",{authType:e,error:Q(n,k),...i},1))):K("signup/failure",{authType:e,error:n},1)},logLoginIntent(e){K("login/intent",{loginType:e||"normal"},1)},logLoginAttempt(e,t){K("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse(e,t){const n=U.CREDENTIALS,o=e||"normal";if("funcaptcha_response"===t)return void K("login/failure",{authType:n,loginType:o,error:t},1);if(t===i.LoginResponseStatus.OK||t===i.LoginResponseStatus.TWOFACTOR)K("login/success",{authType:n,loginType:o},1);else{let e;switch(t){case i.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:e="tos_required";break;case i.LoginResponseStatus.SSO:e="sso_required";break;case i.LoginResponseStatus.TWOFACTOR_REQUIRED:e="enable_twofactor_required";break;case i.LoginResponseStatus.RATELIMIT:e="rate_limited";break;case i.LoginResponseStatus.EXPIRED:e="login_expired";break;case i.LoginResponseStatus.PASSWORD_EXPIRED:e="password_expired";break;case i.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:e="password_descryption_error";break;case i.LoginResponseStatus.ERROR:e="generic_error";break;case"form_error":e=t;break;default:e="unknown"}K("login/success",{authType:n,loginType:o},0),K("login/failure",{authType:n,loginType:o,error:e},1)}},logMagicLinkLoginResponse(e,t){e||"tfa_required"===t?K("login/success",{authType:U.MAGIC_LINK,loginType:"normal"},1):(K("login/success",{authType:U.MAGIC_LINK,loginType:"normal"},0),K("login/failure",{authType:U.MAGIC_LINK,loginType:"normal",error:null!=t?t:"unknown"},1))},logThirdPartyLoginResponse(e,t,n,i){const o=t||"normal";n||"tfa_required"===i?K("login/success",{authType:e,loginType:o},1):(K("login/success",{authType:e,loginType:o},0),K("login/failure",{authType:e,loginType:o,error:Q(i,F)},1))},log2faResponse(e,t){const n=e||"normal";if(t===i.LoginResponseStatus.OK)K("2fa/success",{loginType:n},1);else{let e;switch(t){case i.LoginResponseStatus.REQUIRES_ROLE:e="requires_role";break;case i.LoginResponseStatus.EXPIRED:e="twofactor_expired";break;case i.LoginResponseStatus.INVALID_CREDENTIALS:e="invalid_credentials";break;case i.LoginResponseStatus.ERROR:e="generic_error";break;case"u2f_error":case"code_error":e=t;break;default:e="unknown"}K("2fa/success",{loginType:n},0),K("2fa/failure",{loginType:n,error:e},1)}}},H={logSignupModalShown(e,t={}){X("signup_modal_shown",{url:i.get_href(),kind:e,...t})},logLoginModalShown(e,t={}){X("login_modal_shown",{url:i.get_href(),kind:e,...t})},logSignupModalDismissed(e){X("signup_modal_dismissed",{url:i.get_href(),kind:e})},logLoginModalDismissed(e){X("login_modal_dismissed",{url:i.get_href(),kind:e})},logRecoverableErrorShown(){X("login_recoverable_error_shown",{url:i.get_href()})},logDisabledErrorShown(){X("login_disabled_error_shown",{url:i.get_href()})},logRecoverableErrorDismissed(){X("login_recoverable_error_dismissed",{url:i.get_href()})},logDisabledErrorDismissed(){X("login_disabled_error_dismissed",{url:i.get_href()})}};class V{constructor(e,t,n){this.defaultEventProperties=()=>{const e="oauth_desktop"===this.surface?i.getQueryParam("session_id"):null;return{actionSurface:this.surface,signupTag:this.signupTag||b,...e?{onboardingSessionId:e}:{},...this.disclaimerDisplayed?{disclaimerDisplayed:this.disclaimerDisplayed}:{}}},this.tags=(e,t)=>{const n={tags:{action_surface:this.surface||b,browser:i.getBrowserTag()||"unknown",...e}};return t&&(n.key=t),n},this.surface=(e||b).replace(/(?:_google_login|_one_tap_login_auto|_one_tap_login|_apple_login)$/g,""),this.signupTag=t,this.disclaimerDisplayed=n}}class q extends V{constructor(e,t,n,o){super(e,t,o),this.logSignupInlineTermsOfServiceView=e=>{const t="third_party_signup_inline_tos";i.UDCL.logEvent(y({actionElement:t,...this.defaultEventProperties()}),this.tags({action_element:t,auth_method:e}))},this.logSignupTermsClick=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";i.UDCL.logEvent(P({actionElement:e,authAction:"dropbox_terms_link",...this.defaultEventProperties()}),this.tags({action_element:e,auth_action:"dropbox_terms_link"}))},this.logSignupServicesAgreementClick=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";i.UDCL.logEvent(P({actionElement:e,authAction:"dropbox_services_agreement_link",...this.defaultEventProperties()}),this.tags({action_element:e,auth_action:"dropbox_services_agreement_link"}))},this.logSignupPrivacyClick=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";i.UDCL.logEvent(P({actionElement:e,authAction:"privacy_policy_link",...this.defaultEventProperties()}),this.tags({action_element:e,auth_action:"privacy_policy_link"}))},this.logSignupEmailFilled=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";i.UDCL.logEvent(P({authAction:"email_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"email_form_fill",action_element:e}))},this.logSignupFirstNameFilled=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";i.UDCL.logEvent(P({authAction:"first_name_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"first_name_form_fill",action_element:e}))},this.logSignupLastNameFilled=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";i.UDCL.logEvent(P({authAction:"last_name_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"last_name_form_fill",action_element:e}))},this.isThirdParty=!!n}}class z extends q{constructor(){super(...arguments),this.logLoginStart=(e=!0,t=!0)=>{J(w.GOOGLE_LOGIN_START);const n=e?"google_onetap_continue":"google_continue";i.UDCL.logEvent(P({actionElement:"enter_email_dialog",authAction:n,...this.defaultEventProperties()}),this.tags({auth_action:n,action_element:"enter_email_dialog"})),t&&i.UDCL.logStart(c.PAP_Login_Account({authMethod:e?"google_one_tap":"google",actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog",auth_method:e?"google_one_tap":"google"},n))},this.logLoginCancel=(e=!0)=>{const n=e?"google_onetap_continue":"google_continue",o=e?{actionElement:"enter_email_dialog",authMethod:"google_one_tap"}:{actionElement:"enter_email_dialog",authMethod:"google"};i.UDCL.logEnd(c.PAP_Login_Account({eventState:"canceled",...o,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_RESTART_FLOW_REQUIRED}),this.tags({action_element:o.actionElement,auth_method:o.authMethod,result:t.UDCLResult.ERR_RESTART_FLOW_REQUIRED},n))},this.logLoginResponse=(e,n,o,a)=>{const s=e?"google_onetap_continue":"google_continue",l=e?{actionElement:"enter_email_dialog",authMethod:"google_one_tap"}:{actionElement:"enter_email_dialog",authMethod:"google"};n&&"success"!==n?"tfa_required"===n||"requires_twofactor"===n?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"rejected",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED},s)),Z(w.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR,!0)):"tos_required"===n?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"rejected",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):"enable_twofactor_required"===n?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"rejected",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):"google_login_not_allowed"===n?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:o?"success":"rejected",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_GOOGLE_LOGIN_NOT_ALLOWED}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_GOOGLE_LOGIN_NOT_ALLOWED},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):"sso_required"===n?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"rejected",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_SSO_REQUIRED}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_SSO_REQUIRED},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):"requires_password"===n?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"rejected",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_PASSWORD_REQUIRED}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_PASSWORD_REQUIRED},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):["too_many_requests","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","access_denied","disabled_account","disabled_user","invalid_token","invalid_csrf_token","invalid_logged_out_cookie","missing_email","unverified_email","user_already_invited_to_team","unsupported_platform","target_user_not_found","invalid_pair_target","already_paired"].includes(n)?(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"rejected",...l,...this.defaultEventProperties(),authErrorReason:x[n]}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:x[n]},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):(["server_error","other"].includes(n)||r.reportException({err:new Error(`Unexpected error during Google login: ${n}`),severity:r.SEVERITY.NONCRITICAL,tags:["usc"]}),i.UDCL.logEnd(c.PAP_Login_Account({eventState:"failed",...l,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_OTHER}),this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.ERR_OTHER},s)),Z(w.GOOGLE_LOGIN_FAILED,!0)):(i.UDCL.logEnd(c.PAP_Login_Account({eventState:"success",...l,...this.defaultEventProperties()}),{papOptions:{userId:a},...this.tags({action_element:l.actionElement,auth_method:l.authMethod,result:t.UDCLResult.SUCCESS},s)}),Z(w.GOOGLE_LOGIN_SUCCEEDED,!0))},this.logOneTapDismissed=()=>{i.UDCL.logEvent(P({actionElement:"enter_email_dialog",authAction:"google_onetap_dismiss",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog",auth_action:"google_onetap_dismiss"}))},this.logSignupStart=e=>{J(e?w.GOOGLE_ONE_TAP_SIGNUP_CLICK:w.GOOGLE_SIGNUP_START);const t=this.isThirdParty?"third_party_signup_dialog":"enter_email_dialog",n=e?"google_one_tap":"google";i.UDCL.logStart(c.PAP_SignUp_Account({authMethod:n,actionElement:t,...this.defaultEventProperties()}),this.tags({auth_method:n,action_element:t}))},this.logSignupResponse=(e,n,o={},a)=>{Z("success"===e?w.GOOGLE_SIGNUP_SUCCEEDED:w.GOOGLE_SIGNUP_FAILED,!0);const s=this.isThirdParty?"third_party_signup_dialog":"enter_email_dialog",l=n?"google_one_tap":"google";switch(e){case"success":i.UDCL.logEnd(c.PAP_SignUp_Account({authMethod:l,actionElement:s,eventState:"success",...this.defaultEventProperties()}),{papOptions:{userId:a},...this.tags({auth_method:l,action_element:s,result:x[e]})});break;case"enable_twofactor_required":case"requires_twofactor":case"requires_password":case"tfa_required":case"sso_required":i.UDCL.logEnd(c.PAP_SignUp_Account({authMethod:l,actionElement:s,eventState:"rejected",authErrorReason:x[e],...this.defaultEventProperties()}),this.tags({auth_method:l,action_element:s,result:x[e]}));break;case"tos_required":case"already_exists":case"google_login_not_allowed":case"emails_do_not_match":case"emails_do_not_match_redirect":case"not_verified":case"email_not_verified":case"access_denied":case"disabled_account":case"disabled_user":case"invalid_token":case"invalid_csrf_token":case"invalid_logged_out_cookie":case"missing_email":case"unverified_email":case"user_already_invited_to_team":case"unsupported_platform":case"too_many_requests":case"target_user_not_found":case"invalid_pair_target":case"already_paired":case"sms_error":case"account_capture":i.UDCL.logEnd(c.PAP_SignUp_Account({authMethod:l,actionElement:s,eventState:"rejected",...this.defaultEventProperties(),authErrorReason:x[e]}),this.tags({auth_method:l,action_element:s,result:x[e]}));break;case"server_error":case"other":const n=Object.keys(o),_=n.length&&B[n[0]]||t.UDCLResult.ERR_OTHER;i.UDCL.logEnd(c.PAP_SignUp_Account({authMethod:l,actionElement:s,eventState:_===t.UDCLResult.ERR_OTHER?"failed":"rejected",...this.defaultEventProperties(),authErrorReason:_}),this.tags({auth_method:l,action_element:s,result:_}));break;default:r.reportException({err:new Error(`Unexpected error during Google signup: ${e}`),severity:r.SEVERITY.NONCRITICAL,tags:["usc"]}),i.UDCL.logEnd(c.PAP_SignUp_Account({authMethod:l,actionElement:s,eventState:"failed",...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_OTHER}),this.tags({auth_method:l,action_element:s,result:t.UDCLResult.ERR_OTHER}))}},this.logSignupTermsToggle=e=>{const t=e?"dropbox_terms_accept":"dropbox_terms_decline";i.UDCL.logEvent(P({actionElement:"enter_email_dialog",authAction:t,...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"enter_email_dialog"}))},this.logSignupTermsDismiss=e=>{i.UDCL.logEvent(P({actionElement:"enter_email_dialog",authAction:"dropbox_terms_dismiss",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog",auth_action:"dropbox_terms_dismiss"}))}}}const j={logOneTapNotShown(e){K("google_onetap_not_shown",{error:e},1)},logOneTapShown(){K("show_google_onetap",{},1)},logAuthType(e){K("authType",{selectBy:e},1)},logScriptLoadError(){K("google_onetap_script_load_error",{},1)},logScriptLoadSuccess(){K("google_onetap_script_load_success",{},1)},logCredentialsDecodeError(){K("google_onetap_credentials_decode_error",{},1)}};function Q(e,t){return e&&t.has(e)?e:"unknown"}const $=new Set(["/scl/fi/","/scl/fo/","/s/","/sh/","/transfer/","/family/join/","/referrals/","/sc/","/request/","/oauth2/authorize"]);function Y(){let e=i.get_pathname();$.forEach((t=>{e.includes(t)&&(e=t)}));const t=e.split("/");return _.LocaleCodes.forEach((n=>{t[1]===n&&(e=2===t.length?"/":e.replace(n+"/",""))})),e.endsWith("/")||(e+="/"),e}function K(e,t,n=1){try{l.getMetricsReporter().createStats({ns:"web_auth",name:e},{...t,browser:i.getBrowserTag(),pagePath:Y()}).record(n)}catch(n){r.reportException({err:n,severity:r.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:{metricName:e,...t}})}}function X(e,t){i.UXAnalyticsLogger.log(e,{...t,is_edison:d.isServedByEdisonWebServer().toString()})}function J(e){const t=document.createElement("button");t.setAttribute("data-uxa-log",e),document.body.appendChild(t),t.style.visibility="hidden";const n=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(n),document.body.removeChild(t)}function Z(e,t){t?i.dispatchDialogOpened({element_id:e}):i.dispatchDialogClosed({element_id:e})}var ee,te;t.SignupEndpoints=void 0,(ee=t.SignupEndpoints||(t.SignupEndpoints={})).TEAM_REGISTER="/team/join/register",ee.MIGRATING_TEAM_REGISTER="/team/join/new_personal",ee.THIRD_PARTY_SIGNUP="/ajax_thirdparty_register",ee.PAIR_ACCOUNT="/team/join/new_pair_ajax",t.RegistrationSource=void 0,(te=t.RegistrationSource||(t.RegistrationSource={})).MOBILE_HARDSTOP="mobile_hardstop",te.WEB_REGISTER="web",te.CHOOSER_REGISTER="chooser_generic",te.CLIENT_REGISTER="client",te.SHARE_REGISTER="share",te.FB_SHARE_REGISTER="fb_share",te.REFERRAL_REGISTER="referral",te.API_REGISTER="api",te.IPHONE_REGISTER="iphone",te.TEAM_REGISTER="team",te.TEAM_SSO_REGISTER="team_sso",te.TEAM_CREATION_REGISTER="team_creation",te.TEAM_BILLING_CONTACT_REGISTER="team_billing_contact",te.API_OAUTH_REGISTER="oauth",te.IPAD_REGISTER="ipad",te.ANDROID_REGISTER="android",te.ANDROID_PDFVIEWER_REGISTER="android_pdfviewer",te.BLACKBERRY_REGISTER="blackberry",te.WINDOWS_PHONE_TAB_REGISTER="windows_phone_tablet",te.SHMODEL_MODAL_REGISTER="shmodel_modal_register",te.SHMODEL_DOWNLOAD_REGISTER="shmodel_download_register",te.SHMODEL_SAVE_TO_REGISTER="shmodel_save_to_register",te.SHMODEL_SAVE_AS_REGISTER="shmodel_save_as_register",te.COMMENTS_SHMODEL_MODAL_REGISTER="comments_shmodel_modal_register",te.FILE_TRANSFER_MODAL_REGISTER="file_transfer_modal_register",te.FB_ADS_REGISTER="fb_ads_register",te.IDM_REGISTER="idm",te.PROVISIONING_API_REGISTER="provisioning_api_register",te.INDEX_PAGE_WEB_REGISTER="index_web",te.CAROUSEL_IPHONE_REGISTER="carousel_iphone",te.CAROUSEL_ANDROID_REGISTER="carousel_android",te.CAROUSEL_IPAD_REGISTER="carousel_ipad",te.PHOTOS_WEBAPP_REGISTER="carousel_web",te.MAILBOX_IPHONE_REGISTER="mailbox_iphone",te.MAILBOX_ANDROID_REGISTER="mailbox_android",te.MAILBOX_IPAD_REGISTER="mailbox_ipad",te.PARTNERSHIP_REGISTER="partnership",te.PRO_BUY_REGISTER="pro_buy_register",te.PRO_REDEEM_REGISTER="pro_redeem_register",te.SCRIPT_REGISTER="script_register",te.API_THIRDPARTY_REGISTER="api_thirdparty",te.RESELLER_REGISTER="reseller_register",te.SHARED_CONTENT_LINK_REGISTER="shared_content_link_register",te.OUTLOOK_ADDIN="outlook_addin",te.ZOOM_REGISTER="zoom_register",te.INVITE_LINK="invite_link",te.MOBILEWEB_REGISTER_PAGE="mobileweb_register_page",te.MOBILEWEB_LOGIN_PAGE="mobileweb_login_page",te.LOGIN_PAGE_REGISTER="login_page",te.REGISTER_PAGE_REGISTER="register_page",te.CLI_LINK_REGISTER="cli_link_nonce",te.FAMILY_INVITE="family_invite",te.SPACES_LANDING="spaces_landing",te.BUSINESS_SPACE_HIDDEN_USER="business_space_hidden",te.GOOGLE_ONE_TAP="google_one_tap",te.SIGN_UP_WITH_GOOGLE="sign_up_with_google",te.LOGIN_PAGE_GOOGLE_ONE_TAP="login_page_google_one_tap",te.LOGIN_PAGE_SIGNUP_WITH_GOOGLE="login_page_sign_up_with_google",te.LOGIN_PAGE_EMAIL="login_page_email",te.REGISTER_PAGE_GOOGLE_ONE_TAP="register_page_google_one_tap",te.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE="register_page_sign_up_with_google",te.REGISTER_PAGE_SIGN_UP_WITH_APPLE="register_page_sign_up_with_apple",te.LOGIN_PAGE_EDISON="edison_login_page",te.LOGIN_PAGE_EDISON_EMAIL="edison_login_page_email",te.LOGIN_PAGE_EDISON_GOOGLE_ONE_TAP="edison_login_page_google_one_tap",te.LOGIN_PAGE_EDISON_SIGN_UP_WITH_GOOGLE="edison_login_page_sign_up_with_google",te.REGISTER_PAGE_EDISON="edison_register_page",te.FORGOT_START_PAGE_EDISON="edison_forgot_start_page",te.FORGOT_FINISH_PAGE_EDISON="edison_forgot_finish_page",te.REGISTER_PAGE_EDISON_EMAIL="edison_register_page_email",te.REGISTER_PAGE_EDISON_GOOGLE_ONE_TAP="edison_register_page_google_one_tap",te.REGISTER_PAGE_EDISON_SIGN_UP_WITH_GOOGLE="edison_register_page_sign_up_with_google",te.REGISTER_PAGE_EMAIL="register_page_email",te.HOMEPAGE_GOOGLE_ONE_TAP="homepage_google_one_tap",te.SHARED_FOLDER_MOUNT_REGISTER="shared_folder_mount_register",te.SHARED_FOLDER_COPY_REGISTER="shared_folder_copy_register",te.SHARED_FOLDER_DOWNLOAD_REGISTER="shared_folder_download_register",te.SHARED_FOLDER_BANNER_REGISTER="shared_folder_banner_register",te.SHARED_FILE_BANNER_REGISTER="shared_file_banner_register",te.SHARED_FOLDER_CONTROL_BAR="shared_folder_control_bar",te.TEAM_ACCOUNT_PAIR="team_account_pair",te.TEAM_JOIN_WITH_OTHER_EMAIL_SIGN_UP="team_join_with_other_email_sign_up",te.PROGRESSIVE_CHECKOUT="progressive_checkout",te.INSTALL_PAGE="install_page",te.DEFAULT_USC_MODAL="default_usc_modal",te.DEFAULT_USC_COMPONENT="default_usc_component",te.DEFAULT_ONE_TAP_PLATFORM="default_one_tap_platform",te.PREVIEW_UNGATED_AI="preview_ungated_ai",te.DEFAULT_SUSI_WARP_MODAL="default_susi_warp_modal",te.SUSI_UNI_NAV_MODAL="susi_uni_nav_modal",te.HOMEPAGE_SIGN_UP_WITH_GOOGLE="homepage_sign_up_with_google",te.PDF_EDIT="logged_out_pdf",te.AUDIO_VIDEO_EDIT="logged_out_audio_video",te.IMAGE_EDIT="logged_out_image",te.FILE_PREVIEW_QUICK_REACT_REGISTER="file_preview_quick_react",te.UNGATED_FILE_UPLOAD="ungated_file_upload",te.UNGATED_PDF_CONVERSION="ungated_pdf_conversion",te.UNGATED_PDF_EDITOR="ungated_pdf_editor",te.PREVIEW_DOWNLOAD_PROMPT="preview_download_prompt",te.SHARED_FOLDER_SURFACE_LEVEL_PREVIEW="shared_folder_surface_level_preview",te.SHARED_FILE_SURFACE_LEVEL_PREVIEW="shared_file_surface_level_preview",te.SHARED_LINK_FILE_PREVIEW_IMMEDIATE="shared_link_file_preview_immediate",te.CUSTOMER_SUPPORT="customer_support",te.REPLAY_REGISTER="replay_register",te.DASH_TEAM_REGISTER="dash_team_register",te.DASH_ACCESS_REGISTER="dash_access_register";const ne=L.default.createContext({onError:()=>{}});class ie extends Error{constructor(e,t){super(e),this.name="DWGComponentRenderError",this.stack=null==t?void 0:t.stack}}class oe extends L.default.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!!e}}componentDidCatch(e){var t;const{hostComponentName:n,extraMessage:i,onError:o,isCritical:a}=this.props,s=new ie(`A ${a?"critical":"non-critical"} error happened in ${n} and it is being handled locally and does not block the plank. ${e.message}. ${null!=i?i:""}`,e);"function"==typeof(null===(t=this.context)||void 0===t?void 0:t.onError)&&this.context.onError({err:s,componentName:n,isCritical:a}),"function"==typeof o&&o(s)}render(){return this.state.hasError?this.props.fallback:this.props.children}}oe.displayName="DWGNonCriticalComponentErrorBoundary",oe.contextType=ne;const ae=({fallback:e=null,...t})=>E.useComponentDidMount()?L.default.createElement(g.Suspense,{fallback:e,...t}):L.default.isValidElement(e)?e:null,se={ArrowRightLine:i.ArrowRightLine,ChevronDownLine:i.ChevronDownLine,GlobeLine:h.GlobeLine},re=({className:e,color:t,children:n=null,isPictogram:o,size:a,dataTestId:s,style:r})=>{const l=o?"pictogram":a,d=i.cx(e,`dwg-lazy-icon--${l}`);return L.default.createElement(_.DWGBox,{tagName:"span",className:d,display:"inline-block",color:t,"data-testid":s,style:r},n)},le=L.default.lazy((()=>{const t=new Promise((function(t,n){e(["./c_dig-icons_index"],t,n)})).then((({UIIcon:e,PictogramIcon:t})=>[e,t])),n=new Promise((function(t,n){e(["./c_dig-icons_assets_index"],t,n)})).then((function(e){return e.AllIcons})).then((({ActivityLine:e,AddFolderLine:t,AiChatLine:n,AiFill:i,AiLine:o,AnalyticsDownloadLine:a,AnalyticsLine:s,AppleExternalLogo:r,AppsLine:l,ArrowDownLine:_,ArrowRightLine:d,ArrowUpLine:c,ArrowLeftLine:g,AgreementLine:u,BackupLine:E,CheckmarkCircleLine:h,CheckmarkLine:p,ChevronDownLine:m,ChevronLeftLine:S,ChevronRightLine:R,ClockLine:I,CloseLine:L,ClosedCaptionsLine:O,CloudDoneLine:T,CollectionFill:f,CollectionLine:A,CommentLine:G,CustomizeLine:v,DropboxDashLine:C,DropboxDocSendLine:N,DropboxSignLine:D,EmailFill:P,EmojiAddLine:y,EmojiSmileUpsideDownLine:b,EncryptedLine:U,FacebookExternalLogo:w,FailLine:M,FilterLine:k,FolderLine:F,FullscreenLine:x,FullscreenExitLine:B,GlobeLine:W,HideLine:H,ImageLine:V,InstagramExternalLogo:q,InfoLine:z,InfoSmallLine:j,KakaoTalkExternalLogo:Q,KeyLine:$,LegalLine:Y,LinkedInExternalLogo:K,LinkLine:X,ListViewLine:J,LockLine:Z,MeetingNotesLine:ee,MenuLine:te,MobileLine:ne,MoneyAddLine:ie,MultipleFoldersLine:oe,PasswordsLine:ae,PdfLine:se,PersonLine:re,PersonMultipleLine:le,PersonPausePictogram:_e,PhoneSupportLine:de,PauseCircleLine:ce,PlayCircleFill:ge,PlayCircleLine:ue,PuzzlePieceLine:Ee,SearchLine:he,SendLine:pe,SettingsLine:me,ShareArrowLine:Se,ShareLine:Re,ShieldLine:Ie,ShowLine:Le,SignatureLine:Oe,SignInLine:Te,SpaceLine:fe,SummarizeLine:Ae,ThumbsUpLine:Ge,Twinkle2Fill:ve,Twinkle2Line:Ce,UploadLine:Ne,UpsellLine:De,UpsellFill:Pe,VideoProjectLine:ye,WarningLine:be,WatermarkLine:Ue,XTwitterExternalLogo:we,YoutubeExternalLogo:Me})=>({ActivityLine:e,AddFolderLine:t,AiChatLine:n,AiFill:i,AiLine:o,AnalyticsDownloadLine:a,AnalyticsLine:s,AppleExternalLogo:r,AppsLine:l,ArrowDownLine:_,ArrowRightLine:d,ArrowUpLine:c,ArrowLeftLine:g,AgreementLine:u,BackupLine:E,CheckmarkCircleLine:h,CheckmarkLine:p,ChevronDownLine:m,ChevronLeftLine:S,ChevronRightLine:R,ClockLine:I,CloseLine:L,ClosedCaptionsLine:O,CloudDoneLine:T,CollectionFill:f,CollectionLine:A,CommentLine:G,CustomizeLine:v,DropboxDashLine:C,DropboxDocSendLine:N,DropboxSignLine:D,EmailFill:P,EmojiAddLine:y,EmojiSmileUpsideDownLine:b,EncryptedLine:U,FacebookExternalLogo:w,FailLine:M,FilterLine:k,FolderLine:F,FullscreenLine:x,FullscreenExitLine:B,GlobeLine:W,HideLine:H,ImageLine:V,InstagramExternalLogo:q,InfoLine:z,InfoSmallLine:j,KakaoTalkExternalLogo:Q,KeyLine:$,LegalLine:Y,LinkedInExternalLogo:K,LinkLine:X,ListViewLine:J,LockLine:Z,MeetingNotesLine:ee,MenuLine:te,MobileLine:ne,MoneyAddLine:ie,MultipleFoldersLine:oe,PasswordsLine:ae,PdfLine:se,PersonLine:re,PersonMultipleLine:le,PersonPausePictogram:_e,PhoneSupportLine:de,PauseCircleLine:ce,PlayCircleFill:ge,PlayCircleLine:ue,PuzzlePieceLine:Ee,SearchLine:he,SendLine:pe,SettingsLine:me,ShareArrowLine:Se,ShareLine:Re,ShieldLine:Ie,ShowLine:Le,SignatureLine:Oe,SignInLine:Te,SpaceLine:fe,SummarizeLine:Ae,ThumbsUpLine:Ge,Twinkle2Fill:ve,Twinkle2Line:Ce,UploadLine:Ne,UpsellLine:De,UpsellFill:Pe,VideoProjectLine:ye,WarningLine:be,WatermarkLine:Ue,XTwitterExternalLogo:we,YoutubeExternalLogo:Me})));return Promise.all([t,n]).then((([e,t])=>({default:({src:n,size:i,moduleName:o})=>{const a=t[n],s=e["PictogramIcon"===o?1:0];return a?L.default.createElement(s,{src:a,size:i}):null}})))})),_e=({src:e,className:t,size:n="standard",color:o,dataTestId:a,style:s})=>{const r=se[e];return L.default.createElement(re,{className:t,isPictogram:!1,color:o,size:n,dataTestId:a,style:s},r?L.default.createElement(i.UIIcon,{src:r,size:n}):L.default.createElement(oe,{fallback:null,hostComponentName:`dwg-lazy-icon-${e}`},L.default.createElement(ae,null,L.default.createElement(le,{src:e,moduleName:"UIIcon",size:n}))))};_e.displayName="DWGLazyUIIcon";const de=({children:e,className:t,tagName:n="div",alignItems:o="center",justifyContent:a,justifySelf:s,style:r,display:l="grid",padding:d=0,margin:c=0,innerRef:g,...u})=>{const E=i.cx("dwg-stack","dwg-stack--v2",t);return L.default.createElement(_.DWGBox,{...u,tagName:n,className:E,style:r,padding:d,margin:c,display:l,justifyContent:a,justifySelf:s,alignItems:o,ref:g},e)},ce=({className:e,gap:t,justifyContent:n,...o})=>L.default.createElement(de,{className:i.cx(e,"dwg-stack--grid-flow-row",_.getClassesFromBreakpoints(_.cleanBreakpointValue(t,_.spacingValuesSansAuto,void 0),"dwg-row-gap")),justifyContent:null!=n?n:"stretch",...o});ce.displayName="DWGStackVertical";const ge=({className:e,gap:t,justifyContent:n,justifySelf:o,...a})=>L.default.createElement(de,{className:i.cx(e,"dwg-stack--grid-flow-column",_.getClassesFromBreakpoints(_.cleanBreakpointValue(t,_.spacingValuesSansAuto,void 0),"dwg-column-gap")),justifyContent:null!=n?n:"flex-start",justifySelf:o,...a});ge.displayName="DWGStackHorizontal";const ue=(e,t)=>"object"==typeof e?e[t]:e,Ee=(e,t)=>{var n;return"mobile"===t?ue(e,t):null!==(n=ue(e,t))&&void 0!==n?n:Ee(e,(e=>{switch(e){case"mobileLarge":return"mobile";case"tablet":return"mobileLarge";case"tabletLarge":return"tablet";case"desktop":return"tabletLarge";case"desktopLarge":return"desktop";case"ultrawide":return"desktopLarge"}})(t))};function he(e){switch(e){case"primary":return{backgroundColor:"core-accent",backgroundColorDisabled:"disabled",borderColor:"core-accent",borderColorDisabled:"disabled",borderStyle:"solid",color:"inverse-standard",colorDisabled:"inverse-faint"};case"outline":return{backgroundColor:"transparent",borderColor:"core-primary",borderColorActive:"core-primary",borderColorDisabled:"disabled",borderStyle:"solid",color:"standard",colorDisabled:"disabled"};case"transparent":return{backgroundColor:"transparent",color:"standard",colorActive:"standard",colorDisabled:"disabled"}}}const pe=({icon:e,className:t})=>{switch(e){case"up":return L.default.createElement(_e,{className:t,src:"ArrowUpLine",dataTestId:"icon--ArrowUpLine"});case"down":return L.default.createElement(_e,{className:t,src:"ArrowDownLine",dataTestId:"icon--ArrowDownLine"});case"end":return L.default.createElement(_e,{className:t,src:"ArrowRightLine"});case"start":return L.default.createElement(_e,{className:t,src:"ArrowLeftLine"})}};function me(e){switch(e){case"none":return{padding:0};case"x-small":return{paddingLeft:1.5,paddingRight:1.5};case"small":return{paddingTop:1,paddingBottom:1,paddingLeft:3,paddingRight:3};case"standard":return{paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3};case"large":return{padding:3}}}function Se({href:e,disabled:t,arrowLocation:n}){const i="#"===e||"#top"===e,o=!(t||void 0===e)&&!!e&&(/^#[a-zA-Z][\w:.-]*$/.test(e)||i),[a,s]=g.useState(0),r=g.useCallback((t=>{if(o&&e&&!i&&t){const n=document.querySelector(e);n&&s(t.compareDocumentPosition(n))}}),[e,i,o]),l=function(e,t,n,i){return e?e&&(t||n&Re)?"up":e&&n&Ie?"down":void 0:i}(o,i,a,n);return[r,l]}const Re=2,Ie=4;const Le=L.default.memo((({buttonStyle:t,customIcon:n,disableArrow:o,size:a="standard",labelSize:s="standard",width:r,disabled:l=!1,arrowLocation:d="end",rel:c="",target:u,href:h,onClick:p,label:m,iconMargin:S=3,className:R,susiRefreshExpIsLoading:I,susiRefreshExpSpinnerValueText:O,susiRefreshExpPreloadProgressIndicators:T,spinnerIsMonochromatic:f,spinnerIsOpaqueTrack:A,justifySelf:G,textDecoration:v="none",...C})=>{const N=l||void 0===h,D=N?"button":"a",P="dwg-button2",y=i.cx(R,P,`${P}--button-style-${t}`,`${P}--button-size-${a}`,{[`${P}--disabled`]:l,[`${P}--loading`]:I});"_blank"!==u||c.includes("noreferrer")||(c+=" noreferrer");const[b,U]=Se({href:h,disabled:l,arrowLocation:d}),[w,M]=g.useState();g.useEffect((()=>{w||!I&&!T||new Promise((function(t,n){e(["./e_ui_page_files_router"],t,n)})).then((function(e){return e.index_esm$1})).then((({Spinner:e})=>{M(L.default.createElement(e,{size:"small","aria-valuetext":O,inverse:"outline"!==t,monochromatic:"outline"===t||f,hasOpaqueTrack:A}))}))}),[w,O,I,T,t,f,A]);let k="space-between";"transparent"===t?k="flex-start":o&&(k="center");const F={mobile:Ee(o,"mobile")?"none":"inline",mobileLarge:Ee(o,"mobileLarge")?"none":"inline",tablet:Ee(o,"tablet")?"none":"inline",tabletLarge:Ee(o,"tabletLarge")?"none":"inline",desktop:Ee(o,"desktop")?"none":"inline",desktopLarge:Ee(o,"desktopLarge")?"none":"inline",ultrawide:Ee(o,"ultrawide")?"none":"inline"},x=U&&!("boolean"==typeof o&&o)?L.default.createElement(_.DWGBox,{tagName:"span",display:F,className:i.cx(`${P}__icon`,{[`${P}__icon--${U}`]:!n})},n?L.default.createElement(_e,{src:n}):L.default.createElement(pe,{icon:U})):null;return L.default.createElement(_.DWGBox,{tagName:D,display:"inline-block",ref:b,disabled:l,className:y,width:r,borderStyle:"none",href:N?void 0:h,onClick:p,target:N?void 0:u,rel:c,...he(t),...me(a),..._.allowedHtmlAttributes(C,D)},L.default.createElement(ge,{gap:S,display:"inline-grid",height:"full",width:"full",alignItems:"center",justifyContent:k,justifySelf:G,position:"relative",textDecoration:v},"start"===d?x:null,L.default.createElement(E.DWGTypographyV2Label,{className:`${P}__text`,size:s,color:"inherit",weight:"medium",textAlign:o&&"transparent"!==t?"center":void 0},m),"end"===d?x:null,I&&L.default.createElement("div",{className:`${P}__spinner`},w)))}));Le.displayName="DWGButton2";const Oe=e=>L.default.createElement(Le,{...e,buttonStyle:"primary"});Oe.displayName="DWGPrimaryButton";const Te=e=>L.default.createElement(Le,{...e,buttonStyle:"outline"});Te.displayName="DWGOutlineButton";const fe=e=>L.default.createElement(Le,{...e,buttonStyle:"transparent",size:"none",textDecoration:"underline",width:"fit-content",iconMargin:.5});function Ae(e){const t=e=>decodeURIComponent(escape(e)),[n,i,o]=e.split(".").map((e=>atob(e.split("_").join("/").split("-").join("+"))));if(!o)return j.logCredentialsDecodeError(),null;try{if("JWT"!==JSON.parse(t(n)).typ)return null;const e=JSON.parse(t(i));return{userId:e.sub.toString(),email:e.email.toString(),givenName:e.given_name.toString(),familyName:e.family_name.toString(),emailVerified:Boolean(e.email_verified).valueOf()}}catch{return j.logCredentialsDecodeError(),null}}function Ge({googleCredentials:e,select_by:t,tos_signed:n,marketingOptedIn:o,cont_url:a,visitorId:s,fpRequestId:r,webSigninTag:l,webSignupTag:_,referralCode:d,referralSource:g,emailHash:u,additionalAuthParams:E,signupReferrer:h,fpSealedResult:p,deviceBinding:m}){const S={id_token:e,one_tap_platform:{".tag":"web"},select_by:t,remember_me:!0,pair_user:!1,tos_signed:n,source_url:i.get_href(),marketing_opt_in:o,cont_url:a,visitor_id:s,web_signin_tag:l,fp_request_id:r,referral_code:d,referral_source:g,web_signup_tag:_,email_hash:u,additional_auth_params:E,signup_referrer:h,fp_sealed_result:p,device_binding:m};return c.GetAccountRoutes(new i.NoAuthApiV2Client).rpc("register_or_sign_in_with_1tap",S,{})}function ve(e){switch(e.error[".tag"]){case"unsupported_platform":a.Notify.error(s.intl.formatMessage({id:"zxg8L5",defaultMessage:"This platform is not supported by Google One Tap."}));break;case"unverified_email":a.Notify.error(s.intl.formatMessage({id:"8vxEe0",defaultMessage:"Verify your email with Google to sign in with this email address."}));break;case"disabled_user":a.Notify.error(s.intl.formatMessage({id:"FtHoiO",defaultMessage:"This account has been marked as inactive. Contact the team admin."}));break;case"user_already_invited_to_team":a.Notify.error(s.intl.formatMessage({id:"WPQLwi",defaultMessage:"You've already been invited. Check your email for an invite link or ask the admin to resend it."}));break;case"invalid_token":a.Notify.error(s.intl.formatMessage({id:"hcIBNz",defaultMessage:"That email address wasn't found, try checking it for typos."}));break;case"require_role":a.Notify.error(s.intl.formatMessage({id:"2y3bQh",defaultMessage:"Please sign in with a work account."}));break;case"account_capture":a.Notify.error(s.intl.formatMessage({id:"qG5fHp",defaultMessage:"This is a company domain, try signing up with another email or contact an admin."}));break;default:a.Notify.error(s.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));f("google_one_tap",e)||r.reportException({err:e,severity:r.SEVERITY.NONCRITICAL,tags:["google_one_tap","unknown_error"]})}}function Ce(e,n){const i=n.match(/^[^_]+/),o=e||t.RegistrationSource.DEFAULT_ONE_TAP_PLATFORM;if(!i)return;switch(i[0]){case"btn":return[o,"google_login"].join("_");case"user":return[o,"one_tap_login"].join("_");case"auto":return[o,"one_tap_login_auto"].join("_");default:return}}fe.displayName="DWGTransparentButton";async function Ne(e,t){let n=0;for(i.UDCL.logStart("ungated_store_susi_save_file",{tags:{state:"start",store:(null==e?void 0:e.store)||"undefined"}}),e.onUploadStart&&e.onUploadStart();n<3;)try{let t=e.sessionId;if(e.store&&(t=await c.ungatedDBStore.getLatestUngatedSessionKeyForStore(e.store)),!t)return;return i.UDCL.logEnd("ungated_store_susi_save_file",{eventState:"success",tags:{store:(null==e?void 0:e.store)||"undefined"}}),c.ungatedDBStore.deleteUngatedSession(t)}catch(t){if(n++,3===n&&e.onErrorCallback)return i.UDCL.logEnd("ungated_store_susi_save_file",{eventState:"failed",tags:{store:(null==e?void 0:e.store)||"undefined"}}),void e.onErrorCallback()}}function De(e){var t,n,o;const a=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/sso_state",s=null!==(n=null==e?void 0:e.routeParams)&&void 0!==n?n:{},r=null!==(o=null==e?void 0:e.base)&&void 0!==o?o:window.location.origin;return new i.AjaxURL(i.replacePattern(a,s),r)}const Pe=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/;class ye{constructor(){this.shouldCheckSsoState=e=>e.match(Pe),this.checkSsoState=(e="",t,n=!1)=>{this.shouldCheckSsoState(e)?this.CACHE[e]?t(e,this.CACHE[e]):!n&&this.INFLIGHT[e]||(this.INFLIGHT[e]=!0,function(e){return new Promise((t=>i.WebRequest$1({url:De(),data:{email:e},success:e=>t(JSON.parse(e))})))}(e).then((n=>{this.CACHE[e]=n,t(e,this.CACHE[e])})).finally((()=>{delete this.INFLIGHT[e]}))):t(e,{user_sso_state:i.SsoState.OFF})},this.CACHE={},this.INFLIGHT={}}}class be extends L.default.Component{shouldComponentUpdate(e){return this.hasNewError(e.error)}hasNewError(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)}hasMatchingErrorMessage(e){var t,n;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(n=this.props.error)||void 0===n?void 0:n.message_text)}render(){const{error:e,errorId:t}=this.props;return e&&e.message_html?L.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:a.purify.sanitize(e.message_html)}}):e&&e.message_text?L.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"},L.default.createElement("span",{className:"error-message"},e.message_text,L.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true",style:{visibility:"hidden"}},e.clientTimestamp))):L.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"})}}be.displayName="AuthError";const Ue=e=>{const{label:t,htmlFor:n,unsafeLabelHTML:i}=e;return t?L.default.createElement("label",{htmlFor:n,className:"checkbox_label"},L.default.createElement("span",null,t)):i?L.default.createElement("label",{htmlFor:n,className:"checkbox_label"},L.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.purify.sanitize(i)}})):null},we=e=>{const{name:t,error:n,label:o,onChange:s,className:r,checked:l,id:_,errorId:d,uxaEventName:c,disabled:g,autoFocus:u}=e,E=n&&(n.message_text||n.message_html);return L.default.createElement("div",{className:"auth__checkbox-row"},L.default.createElement(i.FormRow,{variant:"control"},L.default.createElement(i.Checkbox,{className:r,name:t,id:_,onChange:s,checked:l,"aria-checked":l,"aria-invalid":E?"true":"false","aria-describedby":d,"data-uxa-log":c,disabled:g,autoFocus:u}),L.default.createElement(Ue,{htmlFor:_,label:o})),L.default.createElement("div",{id:d,"aria-live":"polite","aria-atomic":"true"},E&&L.default.createElement(i.FormHelperText,{variant:"alert"},L.default.createElement(i.UIIcon,{src:i.FailLine,size:"small"}),(null==n?void 0:n.message_html)?L.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.purify.sanitize(n.message_html)}}):L.default.createElement("span",null,null==n?void 0:n.message_text))))},Me=e=>{const{checked:t,className:n,disabled:o,error:a,inline:s,label:r,maestroStyle:l,name:_,onChange:d,unsafeLabelHTML:c,variant:u,uxaEventName:E}=e,h=g.useMemo((()=>i.generateId(_)),[_]),p=g.useMemo((()=>i.genErrorId(h)),[h]),m=a&&(a.message_text||a.message_html);if(u===N.DIG20)return L.default.createElement(we,{...e,id:h,errorId:p});const S=i.cx("checkbox",u,n,{"checkbox-inline":s});let R=L.default.createElement("input",{type:"checkbox",id:h,name:_,checked:t,onChange:d,disabled:o,"aria-invalid":m?"true":"false","aria-describedby":p,"data-uxa-log":E});l&&(R=L.default.createElement("label",{className:"maestro_checkbox",htmlFor:h},R,L.default.createElement("span",null)));const I=L.default.createElement(be,{error:a,errorId:p});return L.default.createElement("div",{className:S},!l&&I,R,L.default.createElement(Ue,{htmlFor:h,label:r,unsafeLabelHTML:c}),l&&I)};var ke;Me.displayName="AuthCheckbox",t.TOSModalVariant=void 0,(ke=t.TOSModalVariant||(t.TOSModalVariant={})).V1="v1",ke.V2="v2";const Fe="one-tap-tos-modal-container",xe=e=>{let t=document.getElementById(Fe);t||(t=document.createElement("div"),o.GSIEventManager.getGSIState().isMobile&&t.classList.add("one-tap-tos-mobile-model-container"),t.id=Fe,t.classList.add(Fe));const n=(!!e.containerParentSelector&&document.getElementById(e.containerParentSelector)||document.body).appendChild(t);O.default.render(L.default.createElement(He,{...e}),n,(()=>{const e=document.querySelector('.one-tap-tos__terms-checkbox-container input[type="checkbox"]');e&&e.focus()}))},Be=()=>{const e=document.getElementById(Fe);e&&(O.default.unmountComponentAtNode(e),e.remove())},We=({modalVariant:e,animationVariant:t,onSubmit:n,onToggle:o,onDismiss:a,onPrivacyClick:s,onServicesAgreementClick:r,onTermsClick:l,onTosShown:_,showMarketingOptIn:d,implicitTOSVariant:c,googleCredentials:g,thirdPartyType:u})=>(t=t||e,L.default.createElement(m.CSSTransition,{in:!0,timeout:125,appear:!0,classNames:`one-tap-tos__modal-animation-${t}`,mountOnEnter:!0,unmountOnExit:!0},L.default.createElement(i.Modal$1.Content,{className:"one-tap-tos__modal"},L.default.createElement(Ve,{modalVariant:e,animationVariant:t,onSubmit:n,onToggle:o,onDismiss:a,onPrivacyClick:s,onServicesAgreementClick:r,onTermsClick:l,onTosShown:_,showMarketingOptIn:d,implicitTOSVariant:c,googleCredentials:g,thirdPartyType:u}))));We.displayName="SusiThirdPartyTosModal";const He=i.requireCssWithComponent(We,["/static/typescript/component_libraries/dwg-components/src/index.web-vfljDrGPB.css","/static/metaserver/static/css/dig-components/index.web-vflaJWt-u.css"]),Ve=({onSubmit:e,onDismiss:t,onPrivacyClick:n,onServicesAgreementClick:o,onTermsClick:a,onTosShown:r,showMarketingOptIn:l,modalVariant:d,animationVariant:c,implicitTOSVariant:u,thirdPartyType:E})=>{const[h,m]=g.useState(!0),[S,R]=g.useState(!1),I=`${E}_${h?"signup_marketing_opt_out":"signup_marketing_opt_in"}`,{tosMessage:O,ctaMessage:T}=p.getTOSDataByVariant(u,a,o,n),f=L.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row one-tap-tos__tos","data-testid":"row"},L.default.createElement(_.DWGText,{fontFamily:"atlas-grotesk",fontSize:12,lineHeight:18},O));L.default.useEffect((()=>{r&&r()}),[r]);const A=i.getSUSIDigTheme(),G=i.getSUSIDigMode(),v=`third_party_tos_${E}`;return L.default.createElement("form",{className:i.cx(`one-tap-tos one-tap-tos-animation-${c}`,`one-tap-tos-modal-${d}`,`one-tap-tos-modal-animation-${c}`,A,G),"data-uxa-log":v,"data-uxa-interactions":"shown",onSubmit:async t=>{t.preventDefault(),R(!0);await e(l?h:void 0)||R(!1)}},L.default.createElement("div",{className:"one-tap-tos__title-container","data-testid":"row"},L.default.createElement("div",{className:"one-tap-tos__title-content"},L.default.createElement(_.DWGText,{fontFamily:"atlas-grotesk",lineHeight:20,fontSize:16,fontWeight:"medium"},qe),L.default.createElement(i.IconButton,{variant:"transparent",size:"small",onClick:()=>{t()},type:"button","aria-label":ze,disabled:S},L.default.createElement(i.UIIcon,{src:i.CloseLine})))),l&&L.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row one-tap-tos__marketing-opt-in","data-testid":"row","data-uxa-log":`${v}_marketing_opt_in_checkbox`,"data-uxa-interactions":"shown click"},L.default.createElement(Me,{checked:h,className:"one-tap-tos__terms-checkbox-container",disabled:S,inline:!1,label:s.intl.formatMessage({id:"puZoGX",defaultMessage:"Id like to receive direct marketing email updates from Dropbox"}),maestroStyle:!1,name:"marketing_opt_in",onChange:()=>{m(!h)},variant:N.DIG20,uxaEventName:I})),f,L.default.createElement("div",{className:"one-tap-tos__signup-container one-tap-tos__row one-tap-tos__submit","data-testid":"row"},S?L.default.createElement("div",{className:"one-tap-tos__loading-indicator"},L.default.createElement(i.Spinner,{"aria-valuetext":"Signing up",size:"small"})):L.default.createElement(_.DWGBox,{theme:"coconut-200"},L.default.createElement(Oe,{label:T,size:"small",width:"full",style:{justifyContent:"center"},disableArrow:!0,"data-uxa-log":`${v}_submit`,"data-uxa-interactions":"click",onClick:()=>{const e=document.querySelector(".one-tap-tos form");if(e){const t=new Event("submit",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}}}))))};Ve.displayName="SusiThirdPartyTOS";const qe=s.intl.formatMessage({id:"9csKpE",defaultMessage:"Continue to Dropbox"}),ze=s.intl.formatMessage({id:"56IzdQ",defaultMessage:"Close sign up prompt"}),je=["scl-folder-page","shared-link-folder-page"],Qe=["edison_login_page","edison_register_page","oauth","oauth_dash","oauth_desktop"];class $e{constructor(){if(this.tosPromptShown=!1,this.googleIframeObserver=null,this.bodyClass="google-one-tap-displayed",this.tosBodyClass="google-one-tap-tos-displayed",this.currentContext="signin",this.isPromptClosed=!1,this.hasPendingAuthFlow=!1,this.refreshSigWrappers=[],this.defaultAdditionalAuthParams={},this.autoSignInEnabled=!1,this.userFinishedSignup=!1,this.isFedCMOn=!1,this.init=(e,t,n,a)=>{(!this.config&&e||t)&&(this.config=e,this.defaultAdditionalAuthParams=this.config.additionalAuthParams,this.isFedCMOn=this.config.isFedCMEnabled,this.currentContext=e.context,this.autoSignInEnabled=this.autoSignInExperimentEnabled()&&!this.isFromLogout(),this.disclaimerDisplayed=a,o.GSIEventManager.sendGSIEvent(o.GSIEvent.INITIALIZE_PLATFORM),e.context!==o.GSIEventManager.getGSIState().context&&this.updateStateContext(e.context),e.isInline&&(o.GSIEventManager.sendGSIEvent(o.GSIEvent.USE_INLINE_PROMPT),o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_OPEN),document.body.addEventListener("focusin",this.handleFocusIn)),this.fingerprintJSRef=i.initFingerprintJS(),this.loadGSILibrary().then(this.initGSIClient),this.listenForContextChanges(),e.isMobile&&o.GSIEventManager.sendGSIEvent(o.GSIEvent.IS_MOBILE),this.autoSignInEnabled&&(window.onbeforeunload=e=>{o.GSIEventManager.getGSIState().tosPromptDisplayed&&!this.userFinishedSignup&&google.accounts.id.revoke(this.userId,(e=>{}))})),this.config.additionalAuthParams=this.defaultAdditionalAuthParams,e&&e.additionalAuthParams&&(this.config.additionalAuthParams={...this.config.additionalAuthParams,...e.additionalAuthParams}),n&&(this.onBeforeRedirect=n)},this.updateLoginContUrl=e=>{this.config&&(this.config.loginContUrl=e)},this.getCurrentSignInTag=()=>this.config.signinTag,this.getCurrentSignUpTag=()=>this.config.signupTag,this.updateSignInSignUpTags=(e,t)=>{this.config&&(this.config.signinTag=e,this.config.signupTag=t)},this.getLogger=()=>new z(this.config.signinTag,this.config.signupTag,void 0,this.disclaimerDisplayed),this.handleScriptLoadError=()=>{j.logScriptLoadError()},this.handleScriptLoad=()=>{j.logScriptLoadSuccess()},this.loadGSILibrary=()=>{if(this.config.isTest)return async function(){const e=new URLSearchParams(window.location.search),t=e.get("test_token")||"",n=e.get("hide_test_onetap_prompt")||"";let i;window.google={accounts:{id:{initialize:({callback:e})=>{i=()=>{e({credential:t,select_by:"test-select-by"})}},prompt:e=>{const t={isDisplayMoment:()=>!n,isNotDisplayed:()=>!!n,isDisplayed:()=>!1,isSkippedMoment:()=>!1,isDismissedMoment:()=>!1,getNotDisplayedReason:()=>"test-not-display-reason",getMomentType:()=>n?"skipped":"displayed"},o="onetap-test-modal";if(!document.getElementById(o)){const e=document.createElement("div");e.id=o,e.style.position="absolute",e.style.top="100px",e.style.right="150px",e.style.width="100px",e.style.height="70px",e.style.zIndex="1000";const t=document.createElement("button");t.textContent="Google OneTap test button",t.onclick=i,n||(e.append(t),document.body.append(e))}e(t)},renderButton:()=>{const e="onetap-test-sig-button";if(!document.getElementById(e)){const t=document.createElement("button");t.id=e,t.textContent="Sign in with Google test button",t.onclick=i;const n=document.getElementById(o.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID)||document.getElementById(o.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID);n&&n.append(t)}}}}}}();const e=document.getElementsByTagName("head")[0],t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.defer=!0,t.src="https://accounts.google.com/gsi/client",t.onerror=this.handleScriptLoadError,new Promise((n=>{t.onload=()=>{this.handleScriptLoad(),n()},e.insertBefore(t,e.firstChild)}))},this.initGSIClient=()=>{this.config.clientId&&"undefined"!=typeof google&&(this.applyPendingContext(),o.GSIEventManager.clearPendingContext(),this.initContainerListeners(),o.GSIEventManager.sendGSIEvent(o.GSIEvent.GSI_INIT_COMPLETE))},this.displaySigButton=()=>{o.GSIEventManager.getGSIState().googleAccountInitialized||this.initGoogleAccount();const e=o.SIG_BUTTON_TEXT.CONTINUE_WITH,t=o.SIG_BUTTON_STYLES.get(this.config.pageName),n=this.buttonWidth?this.buttonWidth:(null==t?void 0:t.width)||350,i="signin"===this.currentContext?o.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID:o.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID,a=document.querySelectorAll(`#${i}`);0!==a.length&&(this.removeRefreshSigWrappers(),a.forEach(((i,a)=>{if(this.refreshFormContainer){const e=document.createElement("div");e.classList.add("sig-wrapper--dwg-refresh"),e.setAttribute("data-wrapper-index",a.toString()),i.appendChild(e),this.refreshSigWrappers.push(e)}const s=console.warn;console.warn=function(e){o.reportGSILoggerError(e),s(e)};const r=this.refreshSigWrappers[a]||i;google.accounts.id.renderButton(r,{text:e,width:n,logo_alignment:t?t.logo_alignment:"left",locale:this.config.locale,click_listener:this.handleSiGClick}),console.warn=s})))},this.handleSiGClick=()=>{this.hasPendingAuthFlow&&this.getLogger().logLoginCancel(!1),this.hasPendingAuthFlow=!0,this.getLogger().logLoginStart(!1)},this.initContainerListeners=()=>{this.config.isInline&&!o.GSIEventManager.getGSIState().inlineContainerMounted||this.config.hidePromptOnInit||this.isPromptClosed||this.displayOneTapPrompt(),o.GSIEventManager.createGSIEventListener(o.GSIEvent.INLINE_CONTAINER_MOUNTED,this.displayOneTapPrompt),o.GSIEventManager.createGSIEventListener(o.GSIEvent.SHOW_PROMPT,this.displayOneTapPrompt),o.GSIEventManager.createGSIEventListener(o.GSIEvent.REMOVE_PROMPT,(()=>{google.accounts.id.cancel(),this.setPromptClosedState(!0,"Removed by code")})),o.GSIEventManager.getGSIState().buttonContainerMounted&&(this.initGoogleAccount(),this.initRefreshResizeObserver(),this.displaySigButton()),this.resizeThrottle&&this.resizeObserver||o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.initRefreshResizeObserver),o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.displaySigButton)},this.getRefreshFormContainerWidth=e=>Math.floor(e.getBoundingClientRect().width),this.handleRefreshResize=()=>{this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.displaySigButton()},this.initRefreshResizeObserver=()=>{let e=document.querySelector(".login-register-container--dwg-refresh");e||(e=document.querySelector(".unified-susi-na")),e&&(this.refreshFormContainer=e,this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.resizeThrottle&&this.resizeObserver&&(this.resizeThrottle.cancelPending(),this.resizeObserver.disconnect()),this.resizeThrottle=new i.RafThrottle((()=>{this.handleRefreshResize()})),this.resizeObserver=new ResizeObserver(this.resizeThrottle.request),this.resizeObserver.observe(this.refreshFormContainer),o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshResizeObserver),o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshSigWrappers))},this.removeRefreshResizeObserver=()=>{this.resizeObserver&&this.resizeObserver.disconnect()},this.removeRefreshSigWrappers=()=>{this.refreshSigWrappers.forEach((e=>{e&&e.parentNode&&e.remove()})),this.refreshSigWrappers=[]},this.displayOneTapPrompt=()=>{const e=this.getPromptParentId(),t=!!document.getElementById(e||"");this.config.isInline&&!t||(this.initGoogleAccount(),google.accounts.id.prompt((e=>{e.isDisplayMoment()&&this.handleDisplayMoment(e);const t=!this.isFedCMOn&&e.isNotDisplayed()||e.isSkippedMoment()||e.isDismissedMoment();let n="";e.isSkippedMoment()?(this.isFedCMOn?j.logOneTapNotShown("It's a skipped moment"):(n=e.getSkippedReason(),j.logOneTapNotShown(e.getSkippedReason())),Z(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),this.isFedCMOn||e.getSkippedReason()!==o.GoogleNotShownReason.USER_CANCEL||(this.getLogger().logOneTapDismissed(),J(o.GoogleOneTapEvent.DISMISS_GOOGLE_ONE_TAP))):!this.isFedCMOn&&e.isNotDisplayed()?(n=e.getNotDisplayedReason(),e.getNotDisplayedReason()!==o.GoogleNotShownReason.OPT_OUT_OR_NO_SESSION&&Z(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),j.logOneTapNotShown(e.getNotDisplayedReason())):e.isDismissedMoment()&&(j.logOneTapNotShown(e.getDismissedReason()),Z(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),n=e.getDismissedReason());const i=e.getMomentType();if(n=n||["skipped","dismissed"].includes(i)?i:"",this.setPromptClosedState(t,n),o.GSIEventManager.getGSIState().isMobile&&!this.googleOneTapDisabledOverlay){this.googleOneTapDisabledOverlay=document.createElement("div"),this.googleOneTapDisabledOverlay.classList.add("google-one-tap-disabled-mobile-overlay");const e=this.getGoogleIframe();null==e||e.insertAdjacentElement("afterend",this.googleOneTapDisabledOverlay)}t?(Z(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_NOT_SHOWN,!1),this.setOneTapHeightCssVar("0px"),this.stopObservingGoogleContainer(),document.body.classList.remove(this.bodyClass),this.googleOneTapDisabledOverlay&&this.googleOneTapDisabledOverlay.remove()):(Z(o.GoogleOneTapEvent.SHOW_GOOGLE_ONE_TAP,!0),Z(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0))})))},this.handleDisplayMoment=e=>{o.GSIEventManager.sendGSIEvent(o.GSIEvent.DISPLAY_MOMENT),e.isDisplayed()&&(this.setOneTapHeightCssVar(this.getOneTapIframeHeight()),this.observeGoogleIframe(),document.body.classList.add(this.bodyClass),this.config.pageName&&document.body.classList.add(this.config.pageName),this.config.isInline?n.safari?o.GSIEventManager.sendGSIEvent(o.GSIEvent.INLINE_PROMPT_UI_READY):this.pollAndClearIframeFocus():o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_UI_HAS_DISPLAYED))},this.setPromptClosedState=(e,t)=>{this.isPromptClosed=e,e?o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_CLOSE,{promptNotShownReason:t}):o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_OPEN)},this.listenForContextChanges=()=>{this.clearContextChangesListener(),o.GSIEventManager.createGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),o.GSIEventManager.createGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.clearContextChangesListener=()=>{o.GSIEventManager.removeGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),o.GSIEventManager.removeGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.applyPendingContext=()=>{o.GSIEventManager.getPendingContext()&&this.setCurrentContext(o.GSIEventManager.getPendingContext())},this.handleContextChange=()=>{const e=o.GSIEventManager.getGSIState().context;e!==this.currentContext&&(this.cancelTOS(),this.setCurrentContext(e),this.refreshGSIClient())},this.isFromLogout=()=>"logout"===new URLSearchParams(window.location.search).get("src"),this.autoSignInExperimentEnabled=()=>{var e;return"V1"===(null===(e=this.config)||void 0===e?void 0:e.autoSignInVariant)},this.refreshGSIClient=()=>{var e;o.GSIEventManager.getGSIState().googleAccountInitialized&&(o.GSIEventManager.sendGSIEvent(o.GSIEvent.RESET_DISPLAY_MOMENT),o.GSIEventManager.sendGSIEvent(o.GSIEvent.INLINE_PROMPT_UI_NOT_READY),(null===(e=this.config)||void 0===e?void 0:e.isInline)&&"undefined"!=typeof google&&google.accounts.id.cancel(),this.initGSIClient())},this.googleSignInCallback=async({select_by:e,credential:n})=>{j.logAuthType(e);const r=o.BUTTON_AUTH_TYPES.includes(e);r||(this.getLogger().logLoginStart(!0),J(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_CONTINUE),Z("auto"===e?o.GoogleOneTapEvent.GOOGLE_ONE_TAP_VERIFICATION_AUTO_SUCCESS:o.GoogleOneTapEvent.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS,!0)),o.GSIEventManager.sendGSIEvent(r?o.GSIEvent.USE_BUTTON_FLOW:o.GSIEvent.USE_ONE_TAP_FLOW),!i.isTest()&&this.fingerprintJSRef.current&&await this.fingerprintJSRef.current.getWrappedComponent().invokeFPJSIframeAndLog("",void 0,2e3),this.isButtonFlow=r,this.googleCredentials=n,this.selectBy=e,this.config.signupEndpoint===t.SignupEndpoints.TEAM_REGISTER?(({signupKey:e,fromSource:n,continuationUrl:o,thirdPartyAuthJWT:r})=>{if(r&&null==Ae(r))return void a.Notify.error(s.intl.formatMessage({id:"yriEWs",defaultMessage:"An error occurred when processing your Google Account. Please try again or try another signup method."}));const l={signup_key:e,from_source:n,cont:o,tos_agree:!0,third_party_auth_token:r};i.WebRequest({url:t.SignupEndpoints.TEAM_REGISTER,type:"POST",data:l,success:(e,t,n)=>{const r=JSON.parse(e);if("OK"===r.status){const e=r.url||o||"/";i.unsafeRedirect(e)}else"Two Factor Auth Enabled"===r.message?a.Notify.error(s.intl.formatMessage({id:"iBIZIv",defaultMessage:"Your team requires Two Factor Authentication. Please Fill out the form to proceed."})):"Invalid Email"===r.message?a.Notify.error(s.intl.formatMessage({id:"+7HsA2",defaultMessage:"Please use the email provided in the Sign Up link."})):a.Notify.error(s.intl.formatMessage({id:"XPZ3+m",defaultMessage:"Error completing the request, please try again."}))},error:(e,t,n)=>{var i;const o=JSON.parse(n);(null===(i=o.password)||void 0===i?void 0:i.message_text)?a.Notify.error(o.password.message_text):a.Notify.error(s.intl.formatMessage({id:"XPZ3+m",defaultMessage:"Error completing the request, please try again."}))}})})({signupKey:this.config.additionalAuthParams.signupKey,fromSource:this.config.additionalAuthParams.fromSource,continuationUrl:this.config.registerContUrl,thirdPartyAuthJWT:n}):await this.signIn(r)},this.getVisitorData=e=>{if(!this.fingerprintJSRef.current)return;return i.get_visitor_id(this.fingerprintJSRef.current)[e]},this.signIn=async e=>{var t,n,r,l,_,d;let c="";try{c=await i.generateFingerprintHeader()}catch(e){}const g=document.referrer,u={googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!1,visitorId:this.getVisitorData("visitor-id"),fpRequestId:this.getVisitorData("fp-request-id"),pageName:this.config.pageName,additionalAuthParams:this.config.additionalAuthParams,webSigninTag:this.config.signinTag,webSignupTag:this.config.signupTag,cont_url:(null===(t=this.config)||void 0===t?void 0:t.loginContUrl)||o.DEFAULT_CONTINUATION_URL,signupReferrer:g,fpSealedResult:this.getVisitorData("fp_sealed_result"),deviceBinding:c};try{const t=await Ge(u),_=(null===(n=this.config)||void 0===n?void 0:n.loginContUrl)||o.DEFAULT_CONTINUATION_URL,d=t[".tag"];switch("tos_required"!==d&&(this.isButtonFlow?W.logLoginAttempt(U.GOOGLE,"normal"):W.logLoginAttempt(U.GOOGLE_ONE_TAP,"auto"===this.selectBy?"auto":"normal")),this.hasPendingAuthFlow=!1,this.getLogger().logLoginResponse(!this.isButtonFlow,d,"google_login_not_allowed"===d&&!!t.redirect_url,"success"===d?t.user_id:void 0),this.onBeforeRedirect&&await this.onBeforeRedirect(e),d){case"success":if(this.logOneTapLoginResponse(!0,null,this.selectBy),e||Z("auto"===this.selectBy?o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS:o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0),this.config.disableRedirect){this.onGoogleLoginSuccess(t);break}if(this.shouldCallOnLoginSuccess()&&this.onGoogleLoginSuccess(t),this.supportsPostLoginScreen()){this.onGoogleLoginSuccess(t);break}a.Notify.success(s.intl.formatMessage({id:"/qL3on",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),i.redirect(_);break;case"requires_twofactor":{this.logOneTapLoginResponse(!1,"tfa_required",this.selectBy),e||Z("auto"===this.selectBy?o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS:o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0);const n=new S.URI({path:"/verify_code"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:_,web_signin_tag:Ce(this.config.signinTag,this.selectBy)});i.redirect(n.toString());break}case"tos_required":o.GSIEventManager.sendGSIEvent(o.GSIEvent.TOS_PROMPT_OPEN),this.showTOSPrompt(e);break;case"enable_twofactor_required":{this.logOneTapLoginResponse(!1,d,this.selectBy);const e=new S.URI({path:"/twofactor"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:_,web_signin_tag:Ce(this.config.signinTag,this.selectBy)});i.redirect(e.toString());break}case"google_login_not_allowed":this.logOneTapLoginResponse(!1,d,this.selectBy),t.redirect_url?i.unsafeRedirect(t.redirect_url):(a.Notify.error(s.intl.formatMessage({id:"oW2LTj",defaultMessage:"Google Sign In is not allowed with this email."})),this.ssoChecker.checkSsoState((null===(r=t.profile)||void 0===r?void 0:r.email)||"",this.onSsoStateUpdate));break;case"sso_required":this.logOneTapLoginResponse(!1,d,this.selectBy),t.redirect_url?i.unsafeRedirect(t.redirect_url):window.location.href.includes("/login")&&o.GSIEventManager.sendGSIEvent(o.GSIEvent.SSO_REQUIRED,{email:null===(l=t.profile)||void 0===l?void 0:l.email});break;case"requires_password":{this.logOneTapLoginResponse(!1,d,this.selectBy);const e=new S.URI({path:"/show_password_form"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:_});i.redirect(e.toString());break}default:this.logOneTapLoginResponse(!1,d,this.selectBy),a.Notify.error(s.intl.formatMessage({id:"9n1q0s",defaultMessage:"There was a problem completing this request. Please Try Again."}))}}catch(e){const t=e;this.getLogger().logLoginResponse(!this.isButtonFlow,t.error[".tag"]||(null===(_=t.error.reason)||void 0===_?void 0:_[".tag"])),this.logOneTapLoginResponse(!1,t.error[".tag"]||(null===(d=t.error.reason)||void 0===d?void 0:d[".tag"]),this.selectBy),this.hasPendingAuthFlow=!1,ve(t)}},this.logOneTapLoginResponse=(e,t,n)=>{this.isButtonFlow?W.logThirdPartyLoginResponse(U.GOOGLE,"normal",e,t):W.logThirdPartyLoginResponse(U.GOOGLE_ONE_TAP,"auto"===n?"auto":"normal",e,t)},this.onSsoStateUpdate=(e,t)=>{t.user_sso_state!==i.SsoState.REQUIRED&&t.user_sso_state!==i.SsoState.OPTIONAL||o.GSIEventManager.sendGSIEvent(o.GSIEvent.SSO_REQUIRED,{email:e})},this.shouldCallOnLoginSuccess=()=>je.includes(this.config.pageName),this.supportsPostLoginScreen=()=>Qe.includes(this.config.signinTag),this.shouldCallOnRegisterSuccess=()=>je.includes(this.config.pageName),this.onGoogleLoginSuccess=e=>{var t,n;const i=(null===(t=e.profile)||void 0===t?void 0:t.name)||"",a=e.user_id,s=(null===(n=e.profile)||void 0===n?void 0:n.email)||"",r=e.root_ns_id;o.GSIEventManager.sendGSIEvent(o.GSIEvent.LOGIN_SUCCESS,{name:i,id:a,email:s,root_ns_id:r})},this.onGoogleRegisterSuccess=e=>{var t,n;const i=(null===(t=e.profile)||void 0===t?void 0:t.name)||"",a=e.user_id,s=(null===(n=e.profile)||void 0===n?void 0:n.email)||"";o.GSIEventManager.sendGSIEvent(o.GSIEvent.REGISTER_SUCCESS,{name:i,id:a,email:s})},this.signUp=async e=>{var t;let n="";try{n=await i.generateFingerprintHeader()}catch(e){}const r=document.referrer,l={googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!0,marketingOptedIn:e,referralCode:this.config.referralCode,referralSource:this.config.referralSource,emailHash:this.config.emailHash,webSignupTag:this.config.signupTag,additionalAuthParams:{...this.config.additionalAuthParams||{},tos_variant:p.getTOSVariant(p.TOSType.GOOGLE_ONE_TAP,this.config.implicitTOSVariant),is_edison:d.isServedByEdisonWebServer().toString()},cont_url:this.config.additionalAuthParams.postUpsellRedirectUrl,visitorId:this.getVisitorData("visitor-id"),fpRequestId:this.getVisitorData("fp-request-id"),signupReferrer:r,fpSealedResult:this.getVisitorData("fp_sealed_result"),deviceBinding:n};try{const e=await Ge(l);if("success"===e[".tag"]){if(this.userFinishedSignup=!0,this.isButtonFlow?W.logSignupResponse(U.GOOGLE,!0,null,{dwgRefreshVariant:this.config.dwgRefreshVariant}):(W.logSignupResponse(U.GOOGLE_ONE_TAP,!0,null,{dwgRefreshVariant:this.config.dwgRefreshVariant}),Z(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS,!0)),this.getLogger().logSignupResponse(e[".tag"],!this.isButtonFlow,{},e.user_id),!("localStorageSessionId"in this.config.additionalAuthParams)&&!("localStorageStoreId"in this.config.additionalAuthParams))return this.signUpSuccessHelper(e);{const t=this.config.additionalAuthParams.localStorageSessionId,n=this.config.additionalAuthParams.localStorageStoreId,i="localStorageFilename"in this.config.additionalAuthParams?this.config.additionalAuthParams.localStorageFilename:void 0,a="localStorageAutoRename"in this.config.additionalAuthParams?Boolean(this.config.additionalAuthParams.localStorageAutoRename):void 0,s=()=>{o.GSIEventManager.sendGSIEvent(o.GSIEvent.LOGIN_SUCCESS,{})};(async()=>{var o;await Ne({sessionId:t,store:n,filename:i,autoRename:a,onErrorCallback:s},(e.user_id,null===(o=e.profile)||void 0===o||o.email,e.root_ns_id,e.home_ns_id)),this.signUpSuccessHelper(e)})()}return!0}return this.getLogger().logSignupResponse(e[".tag"],!this.isButtonFlow),a.Notify.error(s.intl.formatMessage({id:"kQwNuJ",defaultMessage:"There was a problem completing this request. Please try again."})),!1}catch(e){const n=e;return this.getLogger().logSignupResponse(n.error[".tag"]||(null===(t=n.error.reason)||void 0===t?void 0:t[".tag"]),!this.isButtonFlow),this.isButtonFlow?W.logSignupResponse(U.GOOGLE,!1,n.error[".tag"],{dwgRefreshVariant:this.config.dwgRefreshVariant}):W.logSignupResponse(U.GOOGLE_ONE_TAP,!1,n.error[".tag"],{dwgRefreshVariant:this.config.dwgRefreshVariant}),ve(n),!1}},this.signUpSuccessHelper=e=>{var t;if(this.config.disableRedirect)return this.cancelTOS(),this.onGoogleRegisterSuccess(e),!0;this.shouldCallOnRegisterSuccess()&&this.onGoogleRegisterSuccess(e);const n=e.force_redirect_url?e.redirect_url:(null===(t=this.config)||void 0===t?void 0:t.registerContUrl)||e.redirect_url||"/trial_first";return i.redirect(n),!0},this.showTOSPrompt=e=>{if(!this.tosPromptShown){const n=e&&!this.config.isMobile,i=this.config.isInline||n?t.TOSModalVariant.V2:t.TOSModalVariant.V1;let a;i===t.TOSModalVariant.V2&&"signin"===this.currentContext&&(a=t.TOSModalVariant.V1),this.userId=function(e){const t=Ae(e);return null!=t?t.userId:""}(this.googleCredentials),xe({modalVariant:i,animationVariant:a,onToggle:this.handleToggleTOS,onDismiss:this.handleDismissTOS,onSubmit:this.handleTOSSubmit,onTermsClick:this.getLogger().logSignupTermsClick||(()=>{}),onServicesAgreementClick:this.getLogger().logSignupServicesAgreementClick||(()=>{}),onPrivacyClick:this.getLogger().logSignupPrivacyClick||(()=>{}),onTosShown:()=>this.getLogger().logSignupInlineTermsOfServiceView("google_one_tap"),containerParentSelector:i===t.TOSModalVariant.V2?`${"signup"===this.currentContext?o.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER:o.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN}`:void 0,showMarketingOptIn:this.config.showMarketingOptIn,implicitTOSVariant:p.getTOSVariant(p.TOSType.GOOGLE_ONE_TAP,this.config.implicitTOSVariant),googleCredentials:this.googleCredentials,thirdPartyType:"google_one_tap"}),this.tosPromptShown=!0,document.body.classList.add(this.tosBodyClass)}},this.cancelTOS=()=>{o.GSIEventManager.sendGSIEvent(o.GSIEvent.TOS_PROMPT_CLOSE),this.tosPromptShown&&(Be(),this.tosPromptShown=!1)},this.handleDismissTOS=()=>{J(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS),this.cancelTOS(),document.body.classList.remove(this.tosBodyClass),this.autoSignInExperimentEnabled()?google.accounts.id.revoke(this.userId,(e=>{this.autoSignInEnabled=!1,this.refreshGSIClient()})):this.refreshGSIClient()},this.handleToggleTOS=e=>{},this.handleTOSSubmit=async e=>(this.getLogger().logSignupStart(!this.isButtonFlow),this.isButtonFlow?W.logSignupAttempt(U.GOOGLE):W.logSignupAttempt(U.GOOGLE_ONE_TAP),await this.signUp(e)),this.observeGoogleIframe=()=>{const e=this.getGoogleIframe();!this.googleIframeObserver&&e&&(this.googleIframeObserver=new MutationObserver(this.googleIframeObserverCallback),this.googleIframeObserver.observe(e,{attributes:!0}))},this.stopObservingGoogleContainer=()=>{var e;null===(e=this.googleIframeObserver)||void 0===e||e.disconnect(),this.googleIframeObserver=null},this.googleIframeObserverCallback=e=>{e.length&&"style"===e[0].attributeName&&this.setOneTapHeightCssVar(this.getOneTapIframeHeight())},this.setOneTapHeightCssVar=e=>{this.styleTag||(this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)),this.styleTag.innerText=`:root {\n      ${o.ONE_TAP_HEIGHT_CSS_VAR}: ${e};\n      ${o.ONE_TAP_HEIGHT_MOBILE_CSS_VAR}: ${this.config.isMobile?e:"0px"};\n    }`},this.getGoogleIframe=()=>document.getElementById(o.GOOGLE_ONE_TAP_IFRAME_ID)||document.querySelector(`#${o.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID} iframe`),this.getOneTapIframeHeight=()=>{const e=this.getGoogleIframe();return(null==e?void 0:e.style.height)||"0px"},this.pollAndClearIframeFocus=()=>{const e=setInterval((()=>{var t,n;document.activeElement&&document.activeElement===this.getGoogleIframe()&&(null===(t=document.activeElement)||void 0===t||t.blur(),null===(n=this.activeElement)||void 0===n||n.focus(),o.GSIEventManager.sendGSIEvent(o.GSIEvent.INLINE_PROMPT_UI_READY),clearInterval(e))}),5);setTimeout((()=>{o.GSIEventManager.sendGSIEvent(o.GSIEvent.INLINE_PROMPT_UI_READY),clearInterval(e)}),3e3)},this.handleFocusIn=()=>{document.activeElement!==this.getGoogleIframe()&&(this.activeElement=document.activeElement)},this.getPromptParentId=()=>{var e;return(null===(e=this.config)||void 0===e?void 0:e.isInline)?this.getInlineContainerId():void 0},this.getInlineContainerId=()=>this.config&&"signup"===this.currentContext?o.DEFAULT_SIGNUP_CONTAINER_ID:o.DEFAULT_SIGNIN_CONTAINER_ID,this.setCurrentContext=e=>{this.currentContext=e},this.updateStateContext=e=>{const t="signup"===e?o.GSIEvent.CONTEXT_CHANGE_SIGNUP:o.GSIEvent.CONTEXT_CHANGE_SIGNIN;o.GSIEventManager.sendGSIEvent(t)},$e.instance)return $e.instance;$e.instance=this,this.ssoChecker=new ye}initGoogleAccount(){const e={client_id:this.config.clientId,callback:this.googleSignInCallback,cancel_on_tap_outside:!1,context:this.currentContext,prompt_parent_id:this.isFedCMOn?"":this.getPromptParentId(),itp_support:!0,auto_select:this.autoSignInEnabled,use_fedcm_for_prompt:this.isFedCMOn};google.accounts.id.initialize(e),this.isFromLogout()&&google.accounts.id.disableAutoSelect(),o.GSIEventManager.getGSIState().googleAccountInitialized||o.GSIEventManager.sendGSIEvent(o.GSIEvent.INITIALIZE_GOOGLE_ACCOUNT)}}const Ye=new $e;function Ke(e){e&&!o.GSIEventManager.getGSIState().isInline&&o.GSIEventManager.sendGSIEvent(o.GSIEvent.USE_INLINE_PROMPT);const[t,n]=g.useState(o.GSIEventManager.getGSIState()),i=[o.GSIEvent.INITIALIZE_PLATFORM,o.GSIEvent.PROMPT_OPEN,o.GSIEvent.PROMPT_CLOSE,o.GSIEvent.DISPLAY_MOMENT,o.GSIEvent.RESET_DISPLAY_MOMENT,o.GSIEvent.INLINE_PROMPT_UI_READY,o.GSIEvent.INLINE_PROMPT_UI_NOT_READY],a=[o.GSIEvent.TOS_PROMPT_OPEN,o.GSIEvent.TOS_PROMPT_CLOSE,o.GSIEvent.IS_MOBILE,...e?i:[]],s=()=>{n(o.GSIEventManager.getGSIState())};return g.useEffect((()=>(o.GSIEventManager.removeGSIEventListener(a,s),o.GSIEventManager.createGSIEventListener(a,s),()=>{o.GSIEventManager.removeGSIEventListener(a,s)})),[]),t}var Xe=Object.freeze({__proto__:null,GoogleOneTapPlatform:Ye,GoogleOneTapPlatformSingleton:$e,UseGsiState:Ke,initialize_module:function(e){Ye.init(e)}});t.AuthEventLogger=T,t.AuthMethodDoubleLoggerBase=q,t.AuthUXAnalyticsLogger=H,t.DWGLazyUIIcon=_e,t.DWGOutlineButton=Te,t.DWGPrimaryButton=Oe,t.DWGStackVertical=ce,t.DWGTransparentButton=fe,t.DoubleLoggerBase=V,t.GoogleDoubleLogger=z,t.GoogleOneTapPlatform=Ye,t.PAP_Select_AuthAction=P,t.PAP_View_AuthDialog=y,t.SERVER_ERROR_TO_UDCL_RESULT=B,t.SsoStateChecker=ye,t.UseGsiState=Ke,t.clickEvent=J,t.displayTOS=xe,t.google_one_tap_platform_esnext=Xe,t.retrieveAndSaveFile=Ne,t.setGoogleOneTapDisabledBodyClass=e=>{document.body.classList.toggle(o.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED,e)},t.showOneTapInlineGoogleButton=function(e){const t=(null==e?void 0:e.isButtonFlow)&&!(null==e?void 0:e.isMobile),n=((null==e?void 0:e.tosPromptDisplayed)||(null==e?void 0:e.promptNotShownReason)===o.PromptNotShownReason.inFlow)&&((null==e?void 0:e.isInline)||t);return!((null==e?void 0:e.isInline)&&(!(null==e?void 0:e.isPromptClosed)||(null==e?void 0:e.tosPromptDisplayed))||n)},t.unmountTOS=Be}));
//# sourceMappingURL=c_google_one_tap_google_one_tap_platform.js-vfl_KiJwL.map

//# debugId=8c302583-0b50-3343-8006-e8de60145288