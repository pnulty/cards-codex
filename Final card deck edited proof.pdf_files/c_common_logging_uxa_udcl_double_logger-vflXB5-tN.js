!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="05e4f961-7b2e-35d5-a215-0dd578482b83")}catch(e){}}();
define(["exports","./c_ungated_idx_db_access_lib","./c_google_one_tap_google_one_tap_platform","./e_ui_page_files_router","./e_core_exception","react","./c_core_i18n","./c_core_notify","./c_pap-events_replay_shown_modal","./c_bem","./c_gen_api_auth_WebAuthWeb"],(function(e,t,o,a,i,n,_,s,l,r,c){"use strict";function u(e){const t=document.createElement("button");t.setAttribute("data-uxa-log",e),document.body.appendChild(t),t.style.visibility="hidden";const o=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(o),document.body.removeChild(t)}function E(e,t){t?a.dispatchDialogOpened({element_id:e}):a.dispatchDialogClosed({element_id:e})}var d,g,R,h,m,A;!function(e){e.LOGIN_CLICK="LOGIN_CLICK",e.LOGIN_IMMEDIATE_SUCCESS="LOGIN_IMMEDIATE_SUCCESS",e.GOOGLE_LOGIN_CLICK="GOOGLE_LOGIN_CLICK",e.GOOGLE_LOGIN_SUCCESS="GOOGLE_LOGIN_SUCCESS",e.APPLE_LOGIN_CLICK="APPLE_LOGIN_CLICK",e.APPLE_LOGIN_SUCCESS="APPLE_LOGIN_SUCCESS"}(d||(d={})),e.LoginStep=void 0,(g=e.LoginStep||(e.LoginStep={}))[g.CREDENTIALS_OR_SSO=0]="CREDENTIALS_OR_SSO",g[g.EMAIL_2FA=1]="EMAIL_2FA",g[g.PHONE_2FA=2]="PHONE_2FA",g[g.AUTHENTICATOR_2FA=3]="AUTHENTICATOR_2FA",g[g.SECKEY_2FA=4]="SECKEY_2FA",function(e){e.ROLE_WORK="work",e.ROLE_PERSONAL="personal",e.ROLE_PHOTOS="photos",e.ROLE_BOTH="both"}(R||(R={})),e.LoginResponseStatus=void 0,(h=e.LoginResponseStatus||(e.LoginResponseStatus={})).DEVICE_LIMIT="DEVICE_LIMIT",h.OK="OK",h.SSO="SSO",h.TWOFACTOR="TWOFACTOR",h.TWOFACTOR_REQUIRED="TWOFACTOR_REQUIRED",h.RATELIMIT="RATELIMIT",h.PASSWORD_EXPIRED="PASSWORD_EXPIRED",h.EXPIRED="EXPIRED",h.ERROR="ERROR",h.REQUIRES_ROLE="REQUIRES_ROLE",h.INVALID_CREDENTIALS="INVALID_CREDENTIALS",h.PASSWORD_DECRYPTION_ERROR="PASSWORD_DECRYPTION_ERROR",h.TOS_SIGNATURE_REQUIRED="TOS_SIGNATURE_REQUIRED",e.SecurityKeyState=void 0,(m=e.SecurityKeyState||(e.SecurityKeyState={}))[m.LOADING=0]="LOADING",m[m.FOUND=1]="FOUND",m[m.NOT_FOUND=2]="NOT_FOUND",e.TwoFactorType=void 0,(A=e.TwoFactorType||(e.TwoFactorType={}))[A.EMAIL=0]="EMAIL",A[A.SMS=1]="SMS",A[A.AUTHENTICATOR=2]="AUTHENTICATOR",A[A.SEC_KEY=3]="SEC_KEY";const L=new Map([["two-factor-form","two-factor-form clearfix 2fa-email-form"],["login-info","login-info two-factor-uses-email"]]),p=new Map([["two-factor-form","two-factor-form clearfix 2fa-phone-form"],["login-info","login-info two-factor-uses-sms"]]),f=new Map([["two-factor-form","two-factor-form clearfix 2fa-phone-form"],["login-info","login-info two-factor-uses-authenticator"]]),S=new Map([["two-factor-form","two-factor-form clearfix 2fa-seckey-form"],["login-info","login-info two-factor-uses-u2f"]]);var C,P,D;new Map([[e.LoginStep.EMAIL_2FA,L],[e.LoginStep.PHONE_2FA,p],[e.LoginStep.AUTHENTICATOR_2FA,f],[e.LoginStep.SECKEY_2FA,S]]),e.TwoFactorResendResponse=void 0,(C=e.TwoFactorResendResponse||(e.TwoFactorResendResponse={})).OK="OK",C.RATELIMIT="RATELIMIT",C.UNREACHABLE="UNREACHABLE",C.EXPIRED="EXPIRED",C.BADCARRIER="BADCARRIER",C.INVALIDNUMBER="BADCARRIER",C.NOTAMOBILE="BADCARRIER",e.RecoveryMethod=void 0,(P=e.RecoveryMethod||(e.RecoveryMethod={})).DEVICE_NOTIFICATION="DEVICE_NOTIFICATION",P.BACKUP_CODE="BACKUP_CODE",P.DESKTOP_APP="DESKTOP_APP",P.CONTACT_ADMIN="CONTACT_ADMIN",P.BACKUP_PHONE="BACKUP_PHONE",e.AuthType=void 0,(D=e.AuthType||(e.AuthType={})).CREDENTIALS="email",D.GOOGLE="google_auth",D.GOOGLE_ONE_TAP="google_one_tap",D.APPLE="apple_auth",D.KAKAO="kakao_auth";const I=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),v=new Set(["/scl/fi/","/scl/fo/","/s/","/sh/","/transfer/","/family/join/","/referrals/","/sc/","/request/"]),U=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","tfa_required","requires_password","requires_twofactor","tos_required","invalid_token","missing_email","unsupported_platform","unverified_email","server_error","disabled_user","user_already_invited_to_team","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","apple_login_turned_off_for_teams","user_cancelled_authorize"]);var T,O,N,w,M;function k(){return r.assert(l.isAnyUserSignedIn(),"Expect user is logged in when pairing"),new a.ActiveUserApiV2Client}function b(t){var o;return(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o[".tag"])?{status:e.LoginResponseStatus.ERROR,html_response:!1,message:t.message}:{status:e.LoginResponseStatus.ERROR,html_response:!1,message:_.intl.formatMessage({id:"vuVMnM",defaultMessage:"Something went wrong."})}}function F(e){var t,o,i;const n=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/team/join/new_pair_login_ajax",_=null!==(o=null==e?void 0:e.routeParams)&&void 0!==o?o:{},s=null!==(i=null==e?void 0:e.base)&&void 0!==i?i:window.location.origin;return new a.AjaxURL(a.replacePattern(n,_),s)}!function(e){e.SIA_LOGIN_START="sia_login_start",e.SIA_LOGIN_SUCCEEDED="sia_login_succeeded",e.SIA_LOGIN_REQUIRES_TWO_FACTOR="sia_login_requires_two_factor",e.SIA_LOGIN_REQUIRES_PASSWORD="sia_login_requires_password",e.SIA_LOGIN_EMAILS_DO_NOT_MATCH="sia_login_emails_do_not_match",e.SIA_LOGIN_FAILED="sia_login_failed"}(T||(T={})),function(e){e.SIK_LOGIN_START="sik_login_start",e.SIK_LOGIN_SUCCEEDED="sik_login_succeeded",e.SIK_LOGIN_REQUIRES_TWO_FACTOR="sik_login_requires_two_factor",e.SIK_LOGIN_REQUIRES_PASSWORD="sik_login_requires_password",e.SIK_LOGIN_EMAILS_DO_NOT_MATCH="sik_login_emails_do_not_match",e.SIK_LOGIN_FAILED="sik_login_failed",e.SIK_SIGNUP_START="sik_signup_start",e.SIK_SIGNUP_SUCCEEDED="sik_signup_succeeded",e.SIK_SIGNUP_FAILED="sik_signup_failed"}(O||(O={})),function(e){e.EMAIL_LOGIN_START="email_login_start",e.EMAIL_SPLIT_SIGNUP_CONTINUE="email_split_signup_continue",e.EMAIL_LOGIN_SUCCEEDED="email_login_succeeded",e.EMAIL_LOGIN_REQUIRES_TWO_FACTOR="email_login_requires_two_factor",e.EMAIL_LOGIN_REDIRECT="email_login_redirect",e.EMAIL_LOGIN_FAILED="email_login_failed",e.EMAIL_SIGNUP_START="email_signup_start",e.EMAIL_SIGNUP_SUCCEEDED="email_signup_succeeded",e.EMAIL_SIGNUP_FAILED="email_signup_failed",e.EMAIL_2FA_VWC_START="email_2fa_vwc_start",e.EMAIL_2FA_VWC_SUCCESS="email_2fa_vwc_success",e.EMAIL_2FA_VWC_SUBMISSION="email_2fa_vwc_submit",e.EMAIL_2FA_VWC_ERROR="email_2fa_vwc_error",e.EMAIL_2FA_VWC_SUCCESS_CREDENTIALS_ERROR="email_2fa_vwc_success_credentials_error"}(N||(N={})),function(e){e.ENTER_EMAIL_CONTINUE="enter_email_continue",e.ENTER_EMAIL_CONTINUE_SSO="enter_email_continue_sso",e.LOGIN_SSO_USER="login_sso_user",e.ENTER_EMAIL="enter_email",e.THIRD_PARTY_REGISTER="third_party_register",e.REGISTER_ENTER_ACCOUNT_DETAILS="register_enter_account_details",e.LOGIN_ENTER_PASSWORD="login_enter_password",e.EMAIL_SUBMITTED_WITH_PASSWORD_AUTOFILL="email_submitted_with_password_autofill"}(w||(w={})),e.TwoFactorLoginRecoveryResponse=void 0,(M=e.TwoFactorLoginRecoveryResponse||(e.TwoFactorLoginRecoveryResponse={})).SUCCESS="success",M.SUCCESS_NO_REMAINING_CODES="success_no_remaining_codes",M.ERR_INVALID_CODE="err_invalid_code",M.ERR_INVALID_CODE_UPPERCASE="err_invalid_code_uppercase",M.ERR_RATE_LIMIT="err_rate_limit",M.ERR_EXPIRED="err_expired",M.ERR_NOT_ALLOWED="err_not_allowed",M.ERR_INVALID_CREDENTIALS="err_invalid_credentials";const y=1e3;var H;e.LoginRequestStatus=void 0,(H=e.LoginRequestStatus||(e.LoginRequestStatus={})).SENT="sent",H.APPROVED="approved",H.DENIED="denied",H.EXPIRED="expired",H.UNACKNOWLEDGED="unacknowledged";const G={defaultErrorMessage:_.intl.formatMessage({id:"hDNPT/",defaultMessage:"There was an issue signing you in."}),getLoginStatusError:_.intl.formatMessage({id:"2QOAGr",defaultMessage:"There was an error checking if this sign-in was approved."})};var W;!function(e){e.PRE_CAPTCHA="pre_captcha",e.POST_CAPTCHA="post_captcha"}(W||(W={}));const V={[e.LoginStep.EMAIL_2FA]:"mfa_email",[e.LoginStep.PHONE_2FA]:"mfa_phone",[e.LoginStep.AUTHENTICATOR_2FA]:"mfa_authenticator",[e.LoginStep.SECKEY_2FA]:"mfa_seckey"},K=(t,o)=>t===e.LoginStep.PHONE_2FA&&o?"mfa_phone_backup":V[t],q={[e.TwoFactorResendResponse.RATELIMIT]:o.UDCLResult.ERR_RATE_LIMIT,[e.TwoFactorResendResponse.UNREACHABLE]:o.UDCLResult.ERR_UNREACHABLE,[e.TwoFactorResendResponse.EXPIRED]:o.UDCLResult.ERR_EXPIRED,[e.TwoFactorResendResponse.BADCARRIER]:o.UDCLResult.ERR_BAD_CARRIER},x={[e.LoginResponseStatus.TWOFACTOR_REQUIRED]:o.UDCLResult.ERR_TWO_FACTOR_REQUIRED,[e.LoginResponseStatus.TOS_SIGNATURE_REQUIRED]:o.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED,[e.LoginResponseStatus.SSO]:o.UDCLResult.ERR_SSO,[e.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR]:o.UDCLResult.ERR_INVALID_CREDENTIALS,[e.LoginResponseStatus.INVALID_CREDENTIALS]:o.UDCLResult.ERR_INVALID_CREDENTIALS,[e.LoginResponseStatus.PASSWORD_EXPIRED]:o.UDCLResult.ERR_EXPIRED,[e.LoginResponseStatus.RATELIMIT]:o.UDCLResult.ERR_RATE_LIMIT},B={already_paired:o.UDCLResult.ERR_ALREADY_PAIRED,already_linked_users:o.UDCLResult.ERR_ALREADY_LINKED_USERS,feature_unsupported:o.UDCLResult.ERR_UNSUPPORTED,invalid_password:o.UDCLResult.ERR_INVALID_CREDENTIALS,rate_limit:o.UDCLResult.ERR_RATE_LIMIT,mfa_invalid_code:o.UDCLResult.ERR_TWO_FACTOR,mfa_invalid_checkpoint:o.UDCLResult.ERR_TWO_FACTOR,mfa_update_required:o.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED,requires_sso:o.UDCLResult.ERR_SSO_REQUIRED,pair_same_role:o.UDCLResult.ERR_PAIR_SAME_ROLE,pair_current_account:o.UDCLResult.ERR_PAIR_CURRENT_ACCOUNT,other:o.UDCLResult.ERR_OTHER},j={signin:{start:O.SIK_LOGIN_START,succeeded:O.SIK_LOGIN_SUCCEEDED,failed:O.SIK_LOGIN_FAILED},signup:{start:O.SIK_SIGNUP_START,succeeded:O.SIK_SIGNUP_SUCCEEDED,failed:O.SIK_SIGNUP_FAILED}},Q={[e.RecoveryMethod.DEVICE_NOTIFICATION]:"mfa_help_dialog_device_notification",[e.RecoveryMethod.BACKUP_CODE]:"mfa_help_dialog_backup_codes",[e.RecoveryMethod.DESKTOP_APP]:"mfa_help_dialog_login_with_desktop",[e.RecoveryMethod.CONTACT_ADMIN]:"mfa_help_dialog_contact_admin",[e.RecoveryMethod.BACKUP_PHONE]:"mfa_help_dialog_backup_phone"},X={[e.RecoveryMethod.DEVICE_NOTIFICATION]:"mfa_select_device_notification_recovery_method",[e.RecoveryMethod.BACKUP_CODE]:"mfa_select_backup_codes_recovery_method",[e.RecoveryMethod.DESKTOP_APP]:"mfa_select_desktop_recovery_method",[e.RecoveryMethod.CONTACT_ADMIN]:"mfa_select_contact_admin_recovery_method",[e.RecoveryMethod.BACKUP_PHONE]:"mfa_select_backup_phone_recovery_method"},Y={[e.LoginResponseStatus.REQUIRES_ROLE]:o.UDCLResult.ERR_OTHER,[e.LoginResponseStatus.EXPIRED]:o.UDCLResult.ERR_EXPIRED,[e.LoginResponseStatus.INVALID_CREDENTIALS]:o.UDCLResult.ERR_INVALID_CREDENTIALS},$={[e.TwoFactorLoginRecoveryResponse.SUCCESS]:o.UDCLResult.SUCCESS,[e.TwoFactorLoginRecoveryResponse.SUCCESS_NO_REMAINING_CODES]:o.UDCLResult.SUCCESS,[e.TwoFactorLoginRecoveryResponse.ERR_INVALID_CODE]:o.UDCLResult.ERR_INVALID_TOKEN,[e.TwoFactorLoginRecoveryResponse.ERR_INVALID_CODE_UPPERCASE]:o.UDCLResult.ERR_INVALID_TOKEN,[e.TwoFactorLoginRecoveryResponse.ERR_RATE_LIMIT]:o.UDCLResult.ERR_RATE_LIMIT,[e.TwoFactorLoginRecoveryResponse.ERR_EXPIRED]:o.UDCLResult.ERR_EXPIRED,[e.TwoFactorLoginRecoveryResponse.ERR_NOT_ALLOWED]:o.UDCLResult.ERR_OTHER,[e.TwoFactorLoginRecoveryResponse.ERR_INVALID_CREDENTIALS]:o.UDCLResult.ERR_INVALID_CREDENTIALS};class J extends o.AuthMethodDoubleLoggerBase{constructor(e,t,o){super(e,t,!0,o)}logLoginStart(e){const i={authAction:"apple_continue",actionElement:"enter_email_dialog",...this.defaultEventProperties()};if(a.UDCL.logEvent(o.PAP_Select_AuthAction(i),this.tags({auth_action:"apple_continue",action_element:"enter_email_dialog"})),e){const e={authMethod:"apple",actionElement:"enter_email_dialog",...this.defaultEventProperties()};a.UDCL.logStart(t.PAP_Login_Account(e),this.tags({auth_method:"apple",action_element:"enter_email_dialog"}))}}logSignupStart(e=!1){const i=e?"enter_email_dialog":"third_party_signup_dialog",n={authAction:"apple_continue",actionElement:i,...this.defaultEventProperties()};a.UDCL.logEvent(o.PAP_Select_AuthAction(n),this.tags({auth_action:"apple_continue",action_element:i}));const _={authMethod:"apple",actionElement:i,...this.defaultEventProperties()};a.UDCL.logStart(t.PAP_SignUp_Account(_),this.tags({auth_method:"apple",action_element:i}))}logLoginCancel(){a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",authErrorReason:o.UDCLResult.ERR_RESTART_FLOW_REQUIRED,eventState:"canceled",...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_RESTART_FLOW_REQUIRED,event_state:"canceled"}))}logSignupResponse(e){const{resultTag:n,errors:_={},userId:s,isInlineTos:l}=e,r=l?"enter_email_dialog":"third_party_signup_dialog";if("success"===n)a.UDCL.logEnd(t.PAP_SignUp_Account({authMethod:"apple",actionElement:r,eventState:"success",...this.defaultEventProperties()}),{papOptions:{userId:s},...this.tags({auth_method:"apple",action_element:r,result:o.UDCLResult.SUCCESS})});else{const e=Object.keys(_),n=e.length&&o.SERVER_ERROR_TO_UDCL_RESULT[e[0]]||o.UDCLResult.ERR_OTHER;n===o.UDCLResult.ERR_OTHER&&i.reportException({err:new Error(`Unexpected error during Apple signup: ${e}`),severity:i.SEVERITY.NONCRITICAL,tags:["usc"]}),a.UDCL.logEnd(t.PAP_SignUp_Account({authMethod:"apple",actionElement:r,eventState:n===o.UDCLResult.ERR_OTHER?"failed":"rejected",authErrorReason:n,...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:r,result:n}))}}logLoginResponse(e){if(e.success)E(T.SIA_LOGIN_SUCCEEDED,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",eventState:"success",...this.defaultEventProperties()}),{papOptions:{userId:e.user_id||void 0},...this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:o.UDCLResult.SUCCESS})});else if("tfa_required"===e.err_msg)E(T.SIA_LOGIN_REQUIRES_TWO_FACTOR,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",eventState:"rejected",authErrorReason:o.UDCLResult.ERR_TWO_FACTOR_REQUIRED,...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_TWO_FACTOR_REQUIRED}));else if("enable_twofactor_required"===e.err_msg)E(T.SIA_LOGIN_FAILED,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",eventState:"rejected",authErrorReason:o.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED,...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED}));else if("emails_do_not_match_redirect"===e.err_msg)E(T.SIA_LOGIN_EMAILS_DO_NOT_MATCH,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",eventState:"rejected",authErrorReason:o.UDCLResult.ERR_EMAILS_DO_NOT_MATCH,...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_EMAILS_DO_NOT_MATCH}));else if("requires_password_on_first_link"===e.err_msg)E(T.SIA_LOGIN_REQUIRES_PASSWORD,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",eventState:"rejected",authErrorReason:o.UDCLResult.ERR_PASSWORD_REQUIRED,...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_PASSWORD_REQUIRED}));else{let n;switch(E(T.SIA_LOGIN_FAILED,!0),e.err_msg){case"no_email_in_response":n=o.UDCLResult.ERR_NO_EMAIL_IN_RESPONSE;break;case"emails_do_not_match":n=o.UDCLResult.ERR_EMAILS_DO_NOT_MATCH;break;case"disabled_account":n=o.UDCLResult.ERR_DISABLED;break;case"apple_login_not_allowed":case"apple_login_turned_off_for_teams":case"apple_login_not_allowed_for_teams":n=o.UDCLResult.ERR_APPLE_LOGIN_NOT_ALLOWED;break;case"user_cancelled_authorize":n=o.UDCLResult.ERR_USER_CANCELLED_AUTHORIZE;break;case"target_user_not_found":case"invalid_pair_target":n=o.UDCLResult.ERR_PAIR_SAME_ROLE;break;case"already_paired":n=o.UDCLResult.ERR_ALREADY_PAIRED;break;case"user_already_invited_to_team":n=o.UDCLResult.ERR_USER_ALREADY_INVITED_TO_TEAM;break;default:i.reportException({err:new Error(`Unexpected error during Apple login: ${e.err_msg}`),severity:i.SEVERITY.NONCRITICAL,tags:["usc"]}),n=o.UDCLResult.ERR_OTHER}a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"apple",actionElement:"enter_email_dialog",eventState:n===o.UDCLResult.ERR_OTHER?"failed":"rejected",authErrorReason:n,...this.defaultEventProperties()}),this.tags({auth_method:"apple",action_element:"enter_email_dialog",result:n}))}}}class z extends o.AuthMethodDoubleLoggerBase{constructor(e,t,o){super(e,t,!0,o)}logLoginStart(e){const i={authAction:"kakao_continue",actionElement:"enter_email_dialog",...this.defaultEventProperties()};a.UDCL.logEvent(o.PAP_Select_AuthAction(i),this.tags({auth_action:"kakao_continue",action_element:"enter_email_dialog"}));const n={authMethod:"kakao",actionElement:"enter_email_dialog",...this.defaultEventProperties()};a.UDCL.logStart(t.PAP_Login_Account(n),this.tags({auth_method:"kakao",action_element:"enter_email_dialog"}))}logLoginResponse(e,i){if(i.success)E(j[e].succeeded,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"kakao",actionElement:"enter_email_dialog",eventState:"success",...this.defaultEventProperties()}),this.tags({auth_method:"kakao",action_element:"enter_email_dialog",result:o.UDCLResult.SUCCESS}));else if("tfa_required"===i.err_msg)E(O.SIK_LOGIN_REQUIRES_TWO_FACTOR,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"kakao",actionElement:"enter_email_dialog",eventState:"rejected",...this.defaultEventProperties()}),this.tags({auth_method:"kakao",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_TWO_FACTOR_REQUIRED}));else if("enable_twofactor_required"===i.err_msg)E(j[e].failed,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"kakao",actionElement:"enter_email_dialog",eventState:"rejected",...this.defaultEventProperties()}),this.tags({auth_method:"kakao",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED}));else if("requires_password_on_first_link"===i.err_msg)E(O.SIK_LOGIN_REQUIRES_PASSWORD,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"kakao",actionElement:"enter_email_dialog",eventState:"rejected",...this.defaultEventProperties()}),this.tags({auth_method:"kakao",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_PASSWORD_REQUIRED}));else if("emails_do_not_match_redirect"===i.err_msg)E(O.SIK_LOGIN_EMAILS_DO_NOT_MATCH,!0),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"kakao",actionElement:"enter_email_dialog",eventState:"rejected",...this.defaultEventProperties()}),this.tags({auth_method:"kakao",action_element:"enter_email_dialog",result:o.UDCLResult.ERR_EMAILS_DO_NOT_MATCH}));else{let n;switch(E(j[e].failed,!0),i.err_msg){case"no_email_in_response":n=o.UDCLResult.ERR_NO_EMAIL_IN_RESPONSE;break;case"kakao_login_not_allowed":n=o.UDCLResult.ERR_KAKAO_LOGIN_NOT_ALLOWED;break;default:n=o.UDCLResult.ERR_OTHER}a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"kakao",actionElement:"enter_email_dialog",eventState:n===o.UDCLResult.ERR_OTHER?"failed":"rejected",authErrorReason:n,...this.defaultEventProperties()}),this.tags({auth_method:"kakao",action_element:"enter_email_dialog",result:n}))}}}class Z extends o.AuthMethodDoubleLoggerBase{logLoginStart(e){u(N.EMAIL_LOGIN_START),a.UDCL.logStart(t.PAP_Login_Account({authMethod:"email",actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_method:"email",action_element:"login_password_dialog"},e?W.POST_CAPTCHA:W.PRE_CAPTCHA)),a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"login_form_submit_button",actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"login_form_submit_button",action_element:"login_password_dialog"}))}logLoginResponse(n,_,s=!1){var l;const r=s?{actionElement:"login_email_sso_dialog",authMethod:"email_sso"}:{actionElement:"login_password_dialog",authMethod:"email"};switch(n.status){case e.LoginResponseStatus.OK:E(N.EMAIL_LOGIN_SUCCEEDED,!0),a.UDCL.logEnd(t.PAP_Login_Account({eventState:"success",...this.defaultEventProperties(),...r}),{papOptions:{userId:n.id},...this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:o.UDCLResult.SUCCESS},_?W.POST_CAPTCHA:W.PRE_CAPTCHA)});break;case e.LoginResponseStatus.TWOFACTOR:E(N.EMAIL_LOGIN_REQUIRES_TWO_FACTOR,!0),a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",...this.defaultEventProperties(),...r,authErrorReason:o.UDCLResult.ERR_TWO_FACTOR}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:o.UDCLResult.ERR_TWO_FACTOR},_?W.POST_CAPTCHA:W.PRE_CAPTCHA));break;case e.LoginResponseStatus.TWOFACTOR_REQUIRED:case e.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:case e.LoginResponseStatus.SSO:E(N.EMAIL_LOGIN_REDIRECT,!0),a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",...this.defaultEventProperties(),...r,authErrorReason:x[n.status]}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:x[n.status]},_?W.POST_CAPTCHA:W.PRE_CAPTCHA));break;case e.LoginResponseStatus.EXPIRED:E(N.EMAIL_LOGIN_REDIRECT,!0),a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",...this.defaultEventProperties(),...r,authErrorReason:o.UDCLResult.ERR_EXPIRED}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:o.UDCLResult.ERR_EXPIRED},_?W.POST_CAPTCHA:W.PRE_CAPTCHA));break;case e.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:case e.LoginResponseStatus.INVALID_CREDENTIALS:case e.LoginResponseStatus.PASSWORD_EXPIRED:case e.LoginResponseStatus.RATELIMIT:a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",...this.defaultEventProperties(),...r,authErrorReason:x[n.status]}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:x[n.status]},_?W.POST_CAPTCHA:W.PRE_CAPTCHA));break;case e.LoginResponseStatus.ERROR:const s=null===(l=n.error_type)||void 0===l?void 0:l[".tag"];if(s&&s in B){const e=B[s],o="other"===s?"failed":"rejected";a.UDCL.logEnd(t.PAP_Login_Account({eventState:o,...this.defaultEventProperties(),...r,authErrorReason:e}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:e},_?W.POST_CAPTCHA:W.PRE_CAPTCHA))}else a.UDCL.logEnd(t.PAP_Login_Account({eventState:"failed",...this.defaultEventProperties(),...r,authErrorReason:o.UDCLResult.ERR_OTHER}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:o.UDCLResult.ERR_OTHER},_?W.POST_CAPTCHA:W.PRE_CAPTCHA));break;default:i.reportException({err:new Error(`Unexpected error during email login: ${JSON.stringify(n)}`),severity:i.SEVERITY.NONCRITICAL,tags:["usc"]}),E(N.EMAIL_LOGIN_FAILED,!0),a.UDCL.logEnd(t.PAP_Login_Account({eventState:"failed",...this.defaultEventProperties(),...r,authErrorReason:o.UDCLResult.ERR_OTHER}),this.tags({action_element:r.actionElement,auth_method:r.authMethod,result:o.UDCLResult.ERR_OTHER},_?W.POST_CAPTCHA:W.PRE_CAPTCHA))}}logLoginError(e,i=!1,n=!1,_=!1){const s=i?{actionElement:"login_email_sso_dialog",authMethod:"email_sso"}:{actionElement:"login_password_dialog",authMethod:"email"};let l=o.UDCLResult.ERR_OTHER;n?l=o.UDCLResult.ERR_CAPTCHA_REQUIRED:_&&(l=o.UDCLResult.ERR_INVALID_CREDENTIALS),E(N.EMAIL_LOGIN_FAILED,!0),a.UDCL.logEnd(t.PAP_Login_Account({eventState:l===o.UDCLResult.ERR_OTHER?"failed":"rejected",...this.defaultEventProperties(),...s,authErrorReason:l}),this.tags({action_element:s.actionElement,auth_method:s.authMethod,result:l},e?W.POST_CAPTCHA:W.PRE_CAPTCHA))}logLoginRememberMeChecked(e){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:e?"remember_me_check":"remember_me_uncheck",actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:e?"remember_me_check":"remember_me_uncheck",action_element:"login_password_dialog"}))}logLoginAllOptionsClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"all_login_options",actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"all_login_options",action_element:"login_password_dialog"}))}logForgotPasswordClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"forgot_your_password_cta",actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"forgot_your_password_cta",action_element:"login_password_dialog"}))}logLoginEmailFilled(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"email_form_fill",actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"email_form_fill",action_element:"login_password_dialog"}))}logLoginPasswordFilled(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"password_form_fill",actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"password_form_fill",action_element:"login_password_dialog"}))}logLoginMFASwitch(t){const i=t===e.TwoFactorType.SMS?"mfa_switch_to_sms":"mfa_switch_to_authenticator";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:i,actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_action:i,action_element:"mfa_element"}))}logLoginMFAFilled(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"code_form_fill",actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"code_form_fill",action_element:"mfa_dialog"}))}logLoginMFAHelpClick(e="mfa_dialog"){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_help_link",actionElement:e,...this.defaultEventProperties()}),{...this.tags({auth_action:"mfa_help_link",action_element:e}),papOptions:{flush:!0}})}logLoginMFAVisitHelpCenterClick(t,i){t===e.LoginStep.EMAIL_2FA?a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"visit_help_center",actionElement:"mfa_help_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"visit_help_center",action_element:"mfa_help_dialog"})):a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"visit_help_center",actionElement:void 0!==i?Q[i]:void 0,...this.defaultEventProperties()}),this.tags({auth_action:"visit_help_center",action_element:void 0!==i?Q[i]:void 0}))}logLoginMFATrustChecked(e){const t=e?"trust_this_computer_check":"trust_this_computer_uncheck";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"mfa_element"}))}logLoginEmailDisabledLearnMoreClick(e=!1){const t=e?"recoverable_account_learn_more_click":"disabled_account_learn_more_click";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"login_password_element"}))}logLoginEmailDisabledClose(e=!1){const t=e?"recoverable_account_banner_close":"disabled_account_banner_close";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"login_password_element"}))}logLoginEmailDisabledCreateNewAccountClick(e=!1){const t=e?"recoverable_account_create_new_account_click":"disabled_account_create_new_account_click";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"login_password_element"}))}logLoginEmailDisabledReRegisterClick(e=!1){const t=e?"recoverable_account_re_register_click":"disabled_account_re_register_click";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"login_password_element"}))}logLoginPasskeyStart(e,i){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:e,actionElement:i,...this.defaultEventProperties()}),this.tags({auth_action:e,action_element:i})),a.UDCL.logStart(t.PAP_Login_Account({authMethod:"passkey",actionElement:i,...this.defaultEventProperties()}),this.tags({auth_method:"passkey",action_element:i}))}logLoginPasskeyFailure(e,i){a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"passkey",actionElement:i,eventState:e===o.UDCLResult.ERR_OTHER?"failed":"rejected",authErrorReason:e,...this.defaultEventProperties()}),this.tags({auth_method:"passkey",action_element:i,result:e}))}logLoginPasskeySuccess(e,i){a.UDCL.logEnd(t.PAP_Login_Account({authMethod:"passkey",actionElement:i,eventState:"success",...this.defaultEventProperties()}),{papOptions:{userId:e},...this.tags({auth_method:"passkey",action_element:i,result:o.UDCLResult.SUCCESS})})}logLoginU2FStart(e){const o=V[e];a.UDCL.logStart(t.PAP_Login_Account({authMethod:o,actionElement:"u2f_dialog",...this.defaultEventProperties()}),this.tags({auth_method:o,action_element:"u2f_element"},"u2f_dialog"))}logLoginU2FSuccess(e){const i=V[e];a.UDCL.logEnd(t.PAP_Login_Account({authMethod:i,actionElement:"u2f_dialog",eventState:"success",...this.defaultEventProperties()}),this.tags({auth_method:i,action_element:"u2f_element",result:o.UDCLResult.SUCCESS},"u2f_dialog"))}logLoginU2FError(e,i=!0){const n=V[e];a.UDCL.logEnd(t.PAP_Login_Account({authMethod:n,actionElement:"u2f_dialog",eventState:i?"failed":"rejected",authErrorReason:i?o.UDCLResult.ERR_OTHER:o.UDCLResult.ERR_USER_CANCELLED_AUTHORIZE,...this.defaultEventProperties()}),this.tags({auth_method:n,action_element:"u2f_element",result:i?o.UDCLResult.ERR_OTHER:o.UDCLResult.ERR_USER_CANCELLED_AUTHORIZE},"u2f_dialog"))}logLoginMFADialog(e,t,i){let n;n=i?"mfa_device_notification":K(e,t),a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"mfa_dialog",authMethod:n,...this.defaultEventProperties()}),this.tags({auth_method:n,action_element:"mfa_dialog"}))}logLoginMFAHelpDialog(){a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"mfa_help_dialog",...this.defaultEventProperties()}),this.tags({action_element:"mfa_help_dialog"}))}logLoginMFAHavingTroubleLoggingInClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({actionElement:"mfa_dialog",authAction:"having_trouble_logging_in_button",...this.defaultEventProperties()}),this.tags({action_element:"mfa_dialog",auth_action:"having_trouble_logging_in_button"}))}logLoginMFABackToLoginClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({actionElement:"mfa_help_dialog",authAction:"back_to_login_button",...this.defaultEventProperties()}),this.tags({action_element:"mfa_help_dialog",auth_action:"back_to_login_button"}))}logLoginMFASendStart(e,i){const n=K(e,i);a.UDCL.logStart(t.PAP_Login_Account({authMethod:n,actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_method:n,action_element:"mfa_element"},"mfa_dialog")),a.UDCL.logEvent(o.PAP_Select_AuthAction({actionElement:"mfa_dialog",authAction:"code_continue",...this.defaultEventProperties()}),this.tags({action_element:"mfa_dialog",auth_action:"code_continue"}))}logLoginMFASendResponse(i,n,_,s){const l=K(n,_);switch(i){case e.LoginResponseStatus.OK:a.UDCL.logEnd(t.PAP_Login_Account({authMethod:l,actionElement:"mfa_dialog",eventState:"success",...this.defaultEventProperties()}),this.tags({auth_method:l,action_element:"mfa_element",result:o.UDCLResult.SUCCESS},"mfa_dialog"));break;case e.LoginResponseStatus.EXPIRED:case e.LoginResponseStatus.INVALID_CREDENTIALS:const n=i===e.LoginResponseStatus.EXPIRED?o.UDCLResult.ERR_EXPIRED:o.UDCLResult.ERR_INVALID_CREDENTIALS;a.UDCL.logEnd(t.PAP_Login_Account({authMethod:l,actionElement:"mfa_dialog",eventState:"rejected",authErrorReason:n,...this.defaultEventProperties()}),this.tags({auth_method:l,action_element:"mfa_element",result:n},"mfa_dialog"));break;case e.LoginResponseStatus.ERROR:default:const _=null==s?void 0:s[".tag"];if(_&&["invalid_password","mfa_invalid_code","mfa_invalid_checkpoint","rate_limit"].includes(_)){const e=B[_];a.UDCL.logEnd(t.PAP_Login_Account({authMethod:l,actionElement:"mfa_dialog",eventState:"rejected",authErrorReason:e,...this.defaultEventProperties()}),this.tags({auth_method:l,action_element:"mfa_element",result:e},"mfa_dialog"))}else a.UDCL.logEnd(t.PAP_Login_Account({authMethod:l,actionElement:"mfa_dialog",eventState:"failed",authErrorReason:o.UDCLResult.ERR_OTHER,...this.defaultEventProperties()}),this.tags({auth_method:l,action_element:"mfa_element",result:o.UDCLResult.ERR_OTHER},"mfa_dialog"))}}logLoginMFASendError(e,i,n){var _;const s=K(e,n),l=null===(_=null==i?void 0:i.error_reason)||void 0===_?void 0:_.message_text;let r=o.UDCLResult.ERR_OTHER;-1!==["not_found","invalid_code"].indexOf(l||"")?r=o.UDCLResult.ERR_INVALID_TOKEN:"too_many_attempts"===l&&(r=o.UDCLResult.ERR_TOO_MANY_REQUESTS),a.UDCL.logEnd(t.PAP_Login_Account({authMethod:s,actionElement:"mfa_dialog",eventState:r===o.UDCLResult.ERR_OTHER?"failed":"rejected",authErrorReason:r,...this.defaultEventProperties()}),this.tags({auth_method:s,action_element:"mfa_element",result:r},"mfa_dialog"))}logLoginMFAResendStart(e,i){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"resend_code_continue",actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"resend_code_continue",action_element:"mfa_dialog"}));const n=K(e,i);a.UDCL.logStart(t.PAP_Login_Account({authMethod:n,actionElement:"mfa_dialog_resend",...this.defaultEventProperties()}),this.tags({auth_method:n,action_element:"mfa_dialog_element"}))}logLoginMFAResendResponse(i,n,_){const s=K(n,_);switch(i){case e.TwoFactorResendResponse.OK:a.UDCL.logEnd(t.PAP_Login_Account({authMethod:s,actionElement:"mfa_dialog_resend",eventState:"success",...this.defaultEventProperties()}),this.tags({auth_method:s,action_element:"mfa_dialog_element",result:o.UDCLResult.SUCCESS}));break;case e.TwoFactorResendResponse.RATELIMIT:case e.TwoFactorResendResponse.UNREACHABLE:case e.TwoFactorResendResponse.EXPIRED:case e.TwoFactorResendResponse.BADCARRIER:case e.TwoFactorResendResponse.INVALIDNUMBER:case e.TwoFactorResendResponse.NOTAMOBILE:a.UDCL.logEnd(t.PAP_Login_Account({authMethod:s,actionElement:"mfa_dialog_resend",eventState:"rejected",authErrorReason:q[i],...this.defaultEventProperties()}),this.tags({auth_method:s,action_element:"mfa_dialog_element",result:q[i]}));break;default:a.UDCL.logEnd(t.PAP_Login_Account({authMethod:s,actionElement:"mfa_dialog_resend",eventState:"failed",authErrorReason:o.UDCLResult.ERR_OTHER,...this.defaultEventProperties()}),this.tags({auth_method:s,action_element:"mfa_dialog_element",result:o.UDCLResult.ERR_OTHER}))}}logLoginMFAResendError(e,i){const n=K(e,i);a.UDCL.logEnd(t.PAP_Login_Account({authMethod:n,actionElement:"mfa_dialog_resend",eventState:"failed",authErrorReason:o.UDCLResult.ERR_OTHER,...this.defaultEventProperties()}),this.tags({auth_method:n,action_element:"mfa_dialog_element",result:o.UDCLResult.ERR_OTHER}))}logSignupStart(){u(N.EMAIL_SIGNUP_START);const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";a.UDCL.logStart(t.PAP_SignUp_Account({authMethod:"email",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_method:"email",action_element:e})),a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"sign_up_form_submit_button",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"sign_up_form_submit_button",action_element:e}))}logSignupResponse(e){E(N.EMAIL_SIGNUP_SUCCEEDED,!0);const i=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";a.UDCL.logEnd(t.PAP_SignUp_Account({authMethod:"email",actionElement:i,eventState:"success",...this.defaultEventProperties()}),{papOptions:{userId:e},...this.tags({auth_method:"email",action_element:i,result:o.UDCLResult.SUCCESS})})}logSignupError(e={}){E(N.EMAIL_SIGNUP_FAILED,!0);const n=Object.keys(e);let _=o.UDCLResult.ERR_OTHER;if(e.error_reason){const t=e.error_reason.message_text;t&&(_=o.SERVER_ERROR_TO_UDCL_RESULT[t]||o.UDCLResult.ERR_OTHER)}else n.length>0&&(_=o.SERVER_ERROR_TO_UDCL_RESULT[n[0]]||o.UDCLResult.ERR_OTHER);_===o.UDCLResult.ERR_OTHER&&i.reportException({err:new Error(`Unexpected error during email signup: ${JSON.stringify(e)}`),severity:i.SEVERITY.NONCRITICAL,tags:["usc"]});const s=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";a.UDCL.logEnd(t.PAP_SignUp_Account({authMethod:"email",actionElement:s,eventState:_===o.UDCLResult.ERR_OTHER?"failed":"rejected",authErrorReason:_,...this.defaultEventProperties()}),this.tags({auth_method:"email",action_element:s,result:_}))}logSignupShowPasswordMask(e){const t=e?"show_password_text":"hide_password_text",i=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:i,...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:i}))}logSignupPasswordFilled(){const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"password_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"password_form_fill",action_element:e}))}logEmailVerifyWithCodeStart(){E(N.EMAIL_2FA_VWC_START,!0)}logEmailVerifyWithCodeSuccess(){E(N.EMAIL_2FA_VWC_SUCCESS,!0)}logEmailVerifyWithCodeSubmission(){E(N.EMAIL_2FA_VWC_SUBMISSION,!0)}logEmailVerifyWithCodeError(){E(N.EMAIL_2FA_VWC_ERROR,!0)}logEmailVerifyWithCodeSuccessCredentialsError(){E(N.EMAIL_2FA_VWC_SUCCESS_CREDENTIALS_ERROR,!0)}logSelectSMSPhoneDropdown(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_sms_select_phone_dropdown",actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_sms_select_phone_dropdown",action_element:"mfa_dialog"}))}logSelectSMSPhoneDropdownItem(e){const t=e?"mfa_sms_select_primary_phone_number":"mfa_sms_select_secondary_phone_number";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"mfa_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"mfa_dialog"}))}logMFARecoveryMethodDialog(e){a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:Q[e],...this.defaultEventProperties()}),this.tags({action_element:Q[e]}))}logMFARecoveryMethodSelected(e,t){a.UDCL.logEvent(o.PAP_Select_AuthAction({actionElement:Q[e],authAction:X[t],...this.defaultEventProperties()}),this.tags({auth_action:X[t],action_element:Q[e]}))}logSelectRecoveryMethodDropdown(e){a.UDCL.logEvent(o.PAP_Select_AuthAction({actionElement:Q[e],authAction:"mfa_select_recovery_method_dropdown",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_select_recovery_method_dropdown",action_element:Q[e]}))}logDeviceNotificationLoginStart(){a.UDCL.logStart(t.PAP_Login_Account({authMethod:"mfa_device_notification",actionElement:"mfa_help_dialog_device_notification",eventState:"start",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_help_dialog_device_notification"}))}logDeviceNotificationLoginSuccess(e){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"success",authMethod:"mfa_device_notification",actionElement:"mfa_help_dialog_device_notification",...this.defaultEventProperties()}),{papOptions:{userId:e},...this.tags({auth_method:"mfa_device_notification",action_element:"mfa_help_dialog_device_notification",result:o.UDCLResult.SUCCESS})})}logDeviceNotificationLoginRejected(i){let n=o.UDCLResult.ERR_ACCESS_DENIED;switch(i){case e.LoginRequestStatus.EXPIRED:case e.TwoFactorResendResponse.EXPIRED:n=o.UDCLResult.ERR_EXPIRED;break;case e.TwoFactorResendResponse.RATELIMIT:n=o.UDCLResult.ERR_RATE_LIMIT;break;default:n=o.UDCLResult.ERR_ACCESS_DENIED}a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",authMethod:"mfa_device_notification",actionElement:"mfa_help_dialog_device_notification",authErrorReason:n,...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_help_dialog_device_notification",result:n}))}logDeviceNotificationLoginError(){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"failed",authMethod:"mfa_device_notification",actionElement:"mfa_help_dialog_device_notification",authErrorReason:o.UDCLResult.ERR_OTHER,...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_help_dialog_device_notification",result:o.UDCLResult.ERR_OTHER}))}logDeviceNotificationLoginCancel(){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"canceled",authMethod:"mfa_device_notification",actionElement:"mfa_help_dialog_device_notification",...this.defaultEventProperties(),authErrorReason:o.UDCLResult.ERR_RESTART_FLOW_REQUIRED}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_help_dialog_device_notification",result:o.UDCLResult.ERR_RESTART_FLOW_REQUIRED}))}logDeviceNotificationShowMoreDevicesClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_select_device_notification_show_more_button",actionElement:"mfa_help_dialog_device_notification",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_select_device_notification_show_more_button",action_element:"mfa_help_dialog_device_notification"}))}logSendDeviceNotificationButtonClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_send_device_notification_button",actionElement:"mfa_help_dialog_device_notification",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_send_device_notification_button",action_element:"mfa_help_dialog_device_notification"}))}logBackupCodesLoginStart(){a.UDCL.logStart(t.PAP_Login_Account({authMethod:"mfa_backup_code",actionElement:"mfa_help_dialog_backup_codes",eventState:"start",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_backup_code",action_element:"mfa_help_dialog_backup_codes"}))}logBackupCodesLoginSuccess(e){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"success",authMethod:"mfa_backup_code",actionElement:"mfa_help_dialog_backup_codes",...this.defaultEventProperties()}),{papOptions:{userId:e},...this.tags({auth_method:"mfa_backup_code",action_element:"mfa_help_dialog_backup_codes",result:o.UDCLResult.SUCCESS})})}logBackupCodesLoginError(){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"failed",authMethod:"mfa_backup_code",actionElement:"mfa_help_dialog_backup_codes",authErrorReason:o.UDCLResult.ERR_OTHER,...this.defaultEventProperties()}),this.tags({auth_method:"mfa_backup_code",action_element:"mfa_help_dialog_backup_codes",result:o.UDCLResult.ERR_OTHER}))}logBackupCodesLoginRejected(e){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",authMethod:"mfa_backup_code",actionElement:"mfa_help_dialog_backup_codes",authErrorReason:$[e],...this.defaultEventProperties()}),this.tags({auth_method:"mfa_backup_code",action_element:"mfa_help_dialog_backup_codes",result:$[e]}))}logBackupPhoneLoginStart(){a.UDCL.logStart(t.PAP_Login_Account({authMethod:"mfa_phone_backup",actionElement:"mfa_help_dialog_backup_phone",eventState:"start",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_phone_backup",action_element:"mfa_help_dialog_backup_phone"}))}logBackupPhoneLoginSuccess(e){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"success",authMethod:"mfa_phone_backup",actionElement:"mfa_help_dialog_backup_phone",...this.defaultEventProperties()}),{papOptions:{userId:e},...this.tags({auth_method:"mfa_phone_backup",action_element:"mfa_help_dialog_backup_phone",result:o.UDCLResult.SUCCESS})})}logBackupPhoneLoginError(){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"failed",authMethod:"mfa_phone_backup",actionElement:"mfa_help_dialog_backup_phone",authErrorReason:o.UDCLResult.ERR_OTHER,...this.defaultEventProperties()}),this.tags({auth_method:"mfa_phone_backup",action_element:"mfa_help_dialog_backup_phone",result:o.UDCLResult.ERR_OTHER}))}logBackupPhoneLoginRejected(e){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",authMethod:"mfa_phone_backup",actionElement:"mfa_help_dialog_backup_phone",authErrorReason:Y[e],...this.defaultEventProperties()}),this.tags({auth_method:"mfa_phone_backup",action_element:"mfa_help_dialog_backup_phone",result:Y[e]}))}logResendBackupPhoneCode(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_backup_phone_resend_sms",actionElement:"mfa_help_dialog_backup_phone",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_backup_phone_resend_sms",action_element:"mfa_help_dialog_backup_phone"}))}logSendBackupPhoneCode(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_backup_phone_send_sms",actionElement:"mfa_help_dialog_backup_phone",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_backup_phone_send_sms",action_element:"mfa_help_dialog_backup_phone"}))}logLoginRequestReview(){a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"mfa_login_request_review",...this.defaultEventProperties()}),this.tags({action_element:"mfa_login_request_review"}))}logLoginRequestReviewExpired(){a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"mfa_login_request_review_expired",...this.defaultEventProperties()}),this.tags({action_element:"mfa_login_request_review_expired"}))}logLoginRequestReviewYesButtonClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"authorize_dropbox_account",actionElement:"mfa_login_request_review",...this.defaultEventProperties()}),this.tags({auth_action:"authorize_dropbox_account",action_element:"mfa_login_request_review"}))}logLoginRequestReviewNoButtonClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"do_not_authorize",actionElement:"mfa_login_request_review",...this.defaultEventProperties()}),this.tags({auth_action:"do_not_authorize",action_element:"mfa_login_request_review"}))}logPushNotificationInsteadOfSms(){a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({action_element:"mfa_device_notification_instead_of_sms_dialog"}))}logPushNotificationInsteadOfSmsResendClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_resend_device_notification_button",actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_resend_device_notification_button",action_element:"mfa_device_notification_instead_of_sms_dialog"}))}logPushNotificationInsteadOfSmsTrustChecked(e){const t=e?"trust_this_computer_check":"trust_this_computer_uncheck";a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:t,actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"mfa_device_notification_instead_of_sms_dialog"}))}logPushNotificationInsteadOfSmsEnterCodeClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"mfa_sms_send_code",actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"mfa_sms_send_code",action_element:"mfa_device_notification_instead_of_sms_dialog"}))}logPushNotificationInsteadOfSmsLoginStart(){a.UDCL.logStart(t.PAP_Login_Account({authMethod:"mfa_device_notification",actionElement:"mfa_device_notification_instead_of_sms_dialog",eventState:"start",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_device_notification_instead_of_sms_dialog"}))}logPushNotificationInsteadOfSmsLoginSuccess(e){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"success",authMethod:"mfa_device_notification",actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),{papOptions:{userId:e},...this.tags({auth_method:"mfa_device_notification",action_element:"mfa_device_notification_instead_of_sms_dialog",result:o.UDCLResult.SUCCESS})})}logPushNotificationInsteadOfSmsLoginRejected(i){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"rejected",authMethod:"mfa_device_notification",actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_device_notification_instead_of_sms_dialog",result:i===e.LoginRequestStatus.EXPIRED?o.UDCLResult.ERR_EXPIRED:o.UDCLResult.ERR_ACCESS_DENIED}))}logPushNotificationInsteadOfSmsLoginError(){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"failed",authMethod:"mfa_device_notification",actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_device_notification_instead_of_sms_dialog",result:o.UDCLResult.ERR_OTHER}))}logPushNotificationInsteadOfSmsLoginCancel(){a.UDCL.logEnd(t.PAP_Login_Account({eventState:"canceled",authMethod:"mfa_device_notification",actionElement:"mfa_device_notification_instead_of_sms_dialog",...this.defaultEventProperties()}),this.tags({auth_method:"mfa_device_notification",action_element:"mfa_device_notification_instead_of_sms_dialog",result:o.UDCLResult.ERR_RESTART_FLOW_REQUIRED}))}}class ee extends o.DoubleLoggerBase{logEnterEmailContinue(){u(w.ENTER_EMAIL_CONTINUE),a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"email_continue",actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"email_continue",action_element:"enter_email_dialog"}))}logEnterEmailContinueSSO(){u(w.ENTER_EMAIL_CONTINUE_SSO),a.UDCL.logStart(t.PAP_Login_Account({authMethod:"email_sso",actionElement:"login_email_sso_dialog",...this.defaultEventProperties()}),this.tags({auth_method:"email_sso",action_element:"login_email_sso_dialog"})),a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"login_form_submit_button",actionElement:"login_email_sso_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"login_form_submit_button",action_element:"login_email_sso_dialog"}))}logEmailRecognizedAsSSO(){E(w.LOGIN_SSO_USER,!0),a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"login_email_sso_dialog",...this.defaultEventProperties()}),this.tags({action_element:"login_email_sso_dialog"}))}logSSOOptOut(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"login_sso_user_continue_with_credentials",actionElement:"login_email_sso_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"login_sso_user_continue_with_credentials",action_element:"login_email_sso_dialog"}))}logThirdPartyRegister(){E(w.THIRD_PARTY_REGISTER,!0),a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"third_party_signup_dialog",...this.defaultEventProperties()}),this.tags({action_element:"third_party_signup_dialog"}))}logEnterEmail(){E(w.ENTER_EMAIL,!0),a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog"}))}logRegisterEnterAccountDetails(){E(w.REGISTER_ENTER_ACCOUNT_DETAILS,!0),a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"sign_up_account_details_dialog",...this.defaultEventProperties()}),this.tags({action_element:"sign_up_account_details_dialog"}))}logLoginEnterPassword(){E(w.LOGIN_ENTER_PASSWORD,!0),a.UDCL.logEvent(o.PAP_View_AuthDialog({actionElement:"login_password_dialog",...this.defaultEventProperties()}),this.tags({action_element:"login_password_dialog"}))}logEmailSubmittedWithPasswordAutofill(){E(w.EMAIL_SUBMITTED_WITH_PASSWORD_AUTOFILL,!0)}logDashUsageLimitsClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"dash_usage_limits_link",actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"dash_usage_limits_link",action_element:"enter_email_dialog"}))}logDashServicesAgreementClick(){a.UDCL.logEvent(o.PAP_Select_AuthAction({authAction:"dropbox_services_agreement_link",actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({auth_action:"dropbox_services_agreement_link",action_element:"enter_email_dialog"}))}}const te={logDeviceIdWithSource(e,t){a.dispatchDialogOpened({element_id:e,device_id:t||"not_available"})}};e.AppleDoubleLogger=J,e.EmailAuthDoubleLogger=Z,e.GetUrlForCliLinkNonce=function(e){var t,o,i;const n=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/cli_link_nonce",_=null!==(o=null==e?void 0:e.routeParams)&&void 0!==o?o:{},s=null!==(i=null==e?void 0:e.base)&&void 0!==i?i:window.location.origin;return new a.AjaxURL(a.replacePattern(n,_),s)},e.GetUrlForNewPairLoginAjax=F,e.KakaoDoubleLogger=z,e.SUSIUXAEventLogger=te,e.SusiDoubleLogger=ee,e.checkUserWithEmailExists=function(e){const o={email:e};return t.GetAccountRoutes(new a.NoAuthApiV2Client).rpc("check_user_with_email_exists",o,{})},e.convertLinkUserException=b,e.displayEvent=E,e.fetchUserFeatureVariants=function(e){const t={email:e};return(o=new a.NoAuthApiV2Client,o.ns("signup_signin")).rpc("get_feature_variants_for_user",t,{}).then((e=>e.feature_variants||{})).catch((e=>(i.reportException({err:e,severity:i.SEVERITY.NONCRITICAL,tags:["usc","get_feature_variants_for_user"]}),{})));var o},e.getApiV2ClientForActiveUser=k,e.knownHashPaths=v,e.resendTwoFactorCode=function(e,t,o,i){return new Promise(((n,_)=>a.WebRequest$1({url:c.GetUrlForTwofactorResend(),data:{backup:e,mobile_push:t,resend_attempts:o,return_json_data:i},success:n,error:_})))},e.retryU2fAuthentication=function(){return new Promise(((e,t)=>a.WebRequest$1({url:c.GetUrlForTwofactorU2FStartAuthentication(),success:e,error:t})))},e.signupErrorTags=I,e.submitRecoveryCode=function(e,t){const{code:o,continuationUrl:i,rememberMe:n}=e;return new Promise(((e,_)=>a.WebRequest$1({url:"/twofactor_recovery",type:"POST",data:{code:o,cont:i,remember_me:n},skipNotifyError:t,success:t=>{try{e(JSON.parse(t))}catch(e){_(e)}},error:(e,t,o)=>{try{_(JSON.parse(o))}catch(e){_(o)}}})))},e.submitTwoFactorForm=function(e,t,o=!1){let n;switch(e){case"multi":n=c.GetUrlForAjaxLogin2FaAddSessionTrue();break;case"pairing":n=F();break;case"cli_link_nonce":n=function(e){var t,o,i;const n=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/cli_link_twofactor",_=null!==(o=null==e?void 0:e.routeParams)&&void 0!==o?o:{},s=null!==(i=null==e?void 0:e.base)&&void 0!==i?i:window.location.origin;return new a.AjaxURL(a.replacePattern(n,_),s)}();break;case"admin":n=function(e){var t,o,i;const n=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/admin/login/twofactor",_=null!==(o=null==e?void 0:e.routeParams)&&void 0!==o?o:{},s=null!==(i=null==e?void 0:e.base)&&void 0!==i?i:window.location.origin;return new a.AjaxURL(a.replacePattern(n,_),s)}();break;case"bidirectional_pair":return async function(e){const t=e.checkpoint_token,o=e.code;r.assert(null!=t&&null!=o,"Expect checkpoint token and code not null");let n="";try{n=await a.generateFingerprintHeader()}catch(e){i.reportException({err:new Error(`Unexpected error generating fingerprint header: ${e}`),severity:i.SEVERITY.NONCRITICAL,tags:["usc"]})}const _=k(),s={checkpoint_token:t,code:o,remember_me:e.remember_me,device_binding:n||void 0};try{return await a.GetTeamRoutes(_).rpc("account_pair_two_factor_login",s,{})}catch(e){return i.reportException({err:e,severity:i.SEVERITY.NONCRITICAL,tags:["usc"]}),b(e)}}(t);default:n=c.GetUrlForAjaxLogin2Fa()}return new Promise(((e,i)=>a.WebRequest$1({url:n,type:"POST",data:t,success:t=>e(JSON.parse(t)),error:(e,t,o)=>i(JSON.parse(o)),skipNotifyError:o})))},e.thirdPartyLoginErrorTags=U,e.updateDropboxPasswordsEligibility=async function(e){l.isAnyUserSignedIn()||await a.dangerousDoNotUseDeprecatedRefreshViewerAfterLogin();try{const t=k();await function(e){return e.ns("passwords")}(t).rpc("update_freemium_eligibility",{entry_point:{".tag":e}},{})}catch(e){i.reportException({err:e,severity:"non-critical"})}},e.useLoginRequestPoller=t=>{const{userId:o,accessToken:l,contUrl:r,onStatusChange:u,onError:E,pollIntervalMs:d=y,shouldRetryOnError:g=!0,trusted:R=!1}=t,[h,m]=n.useState(e.LoginRequestStatus.SENT),[A,L]=n.useState(null),[p,f]=n.useState(g),S=n.useRef(null),C=n.useRef(!1),P=n.useRef(!1),D=n.useRef(R);D.current=R;const I=n.useCallback((async()=>{try{await function(e,t,o,n=!1){return new Promise(((l,r)=>{const u=c.GetUrlForAjaxLogin2Fa();u.searchParams.set("mobile_push","true"),a.WebRequest({url:u,type:"POST",data:{code:e,trusted:n},success:()=>{t?a.redirect(t):a.redirect("/"),l()},error:(e,t,a)=>{const n=_.intl.formatMessage({id:"hDNPT/",defaultMessage:"There was an issue signing you in."});s.Notify.error(n),null==o||o(n);try{if(JSON.parse(a).hasOwnProperty("code")&&200===e.status)return void r(t)}catch(e){e instanceof SyntaxError||i.reportException({err:e,severity:i.SEVERITY.NONCRITICAL,tags:["usc","login_request_poller_error"]})}r(t)}})}))}(l,r,(e=>{L(e),null==E||E(e)}),D.current)}catch(e){f(!1)}}),[l,r,E]),v=n.useCallback((async()=>{if(!o||!l)throw new Error("User ID and access token are required for polling");const e=new a.NoAuthApiV2Client,t={token:l,user_id:o};return function(e){return e.ns("two_factor_auth")}(e).rpc("get_login_request_status",t,{})}),[o,l]),U=n.useCallback((async()=>{if(P.current)try{switch((await v())[".tag"]){case"approved":m(e.LoginRequestStatus.APPROVED),null==u||u(e.LoginRequestStatus.APPROVED),P.current=!1,await I();break;case"denied":m(e.LoginRequestStatus.DENIED),null==u||u(e.LoginRequestStatus.DENIED),P.current=!1;break;case"unacknowledged":P.current&&(S.current&&(clearTimeout(S.current),S.current=null),S.current=setTimeout((()=>{P.current&&U()}),d));break;case"invalid":m(e.LoginRequestStatus.EXPIRED),null==u||u(e.LoginRequestStatus.EXPIRED),P.current=!1;break;default:throw new Error("Invalid response from get_login_request_status")}}catch(e){const t=G.getLoginStatusError;i.reportException({err:e instanceof Error?e:new Error(JSON.stringify(e)),severity:i.SEVERITY.NONCRITICAL,tags:["usc","login_request_poller_error"]}),C.current||(s.Notify.error(t),C.current=!0),L(t),null==E||E(t),p&&P.current?(S.current&&(clearTimeout(S.current),S.current=null),S.current=setTimeout((()=>{P.current&&U()}),d)):P.current=!1}}),[v,u,I,d,p,E]),T=n.useCallback((()=>{if(!o||!l){const e="User ID and access token are required to start polling";return L(e),void(null==E||E(e))}P.current=!0,L(null),C.current=!1,U()}),[o,l,U,E]),O=n.useCallback((()=>{P.current=!1,S.current&&(clearTimeout(S.current),S.current=null)}),[]),N=n.useCallback((()=>{O(),m(e.LoginRequestStatus.SENT),L(null),C.current=!1,P.current=!1}),[O]);return n.useEffect((()=>()=>{S.current&&clearTimeout(S.current)}),[]),{loginRequestStatus:h,isPolling:P.current,error:A,startPolling:T,stopPolling:O,reset:N}}}));
//# sourceMappingURL=c_common_logging_uxa_udcl_double_logger.js-vfl4hSFT-.map

//# debugId=05e4f961-7b2e-35d5-a215-0dd578482b83