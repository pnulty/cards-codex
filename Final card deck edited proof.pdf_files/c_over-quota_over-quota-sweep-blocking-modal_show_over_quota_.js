!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fcff31a3-b93b-341b-aa91-5e0140b1e38b")}catch(e){}}();
define(["exports","./e_ui_page_files_router","./e_data_modules_stormcrow","./c_quota_use_query_quota_upsell_info","./e_core_exception","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal","./c_over-quota_utils_logger"],(function(o,e,t,r,n,i,a){"use strict";function s(o){return{class:"quota",action:"eng",object:"should_show_oq_restrictions_modal",properties:o}}var c;o.Show=void 0,(c=o.Show||(o.Show={})).WarningOnly="WARNING_ONLY",c.EnforceRestrictionsOnly="ENFORCE_RESTRICTIONS_ONLY",c.All="ALL";const l=async(i,c,l)=>{const u=Math.random().toString(36).substring(2,15);e.UDCL.logStart(s({overQuotaSweepBlockingModalAction:c}),{key:u,tags:{overQuotaSweepBlockingModalAction:c}});try{const n=await(async(n,i,s)=>{var c,l,u,_;const{variant:d,error:v}=await e.fetchExperimentVariant("end_state_web_overquota_restrictions");if(d===e.Variant.OFF||void 0===d||v)return!1;if(s&&s.is_team)return!1;const{apiData:w}=await r.getQuotaUpsellInfoPackage.fetchQuery(t.queryClient,{apiArg:{}},{refetchOnReconnect:!1,refetchOnWindowFocus:!0,staleTime:18e5,cacheTime:18e5,retry:1});return!(n===o.Show.WarningOnly&&!(null===(c=w.restrictions)||void 0===c?void 0:c.show_restrictions_warning)||n===o.Show.EnforceRestrictionsOnly&&!(null===(l=w.restrictions)||void 0===l?void 0:l.enforce_restrictions)||![e.Variant.V1,e.Variant.CONTROL,e.Variant.HOLDOUT].includes(d)||!(null===(u=w.restrictions)||void 0===u?void 0:u.enforce_restrictions)&&!(null===(_=w.restrictions)||void 0===_?void 0:_.show_restrictions_warning)||(e.logExposure({feature:"end_state_web_overquota_restrictions",variant:d}),a.logAdditionalExposureDetails(d,i,w),d!==e.Variant.V1))})(i,c,l);return e.UDCL.logEnd(s({overQuotaSweepBlockingModalAction:c,eventState:"success"}),{key:u,tags:{overQuotaSweepBlockingModalAction:c}}),n}catch(o){return n.reportStack(`Error in showOQModalOrContinue: ${JSON.stringify(o)}`,{severity:n.SEVERITY.NONCRITICAL,tags:["last-mile","over_quota_restrictions_modal"]}),e.UDCL.logEnd(s({overQuotaSweepBlockingModalAction:c,eventState:"failed"}),{key:u,tags:{overQuotaSweepBlockingModalAction:c}}),!1}};o.shouldShowOQModal=l,o.showOQModalOrContinue=async({beforeShowModal:e,user:t,show:r=o.Show.All,...n})=>{await l(r,n.action,t)?(null==e||e(),i.openOverQuotaRestrictionsModal(n)):n.continueCallback()}}));
//# sourceMappingURL=c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue.js-vflgs5BQq.map

//# debugId=fcff31a3-b93b-341b-aa91-5e0140b1e38b