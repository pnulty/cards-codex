!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a679fa84-fddb-3aca-aac6-6003038079c2")}catch(e){}}();
define(["exports","react","./c_file_viewer_api_data","./c_file_viewer_api_navigation","./e_ui_page_files_router","./c_file_viewer_hooks_lifecycle_logging"],(function(e,r,t,i,a,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var l=o(r);function u(e){const r=a.useFileViewerAtomValue(a.currentArchivePathAtom);return l.default.useMemo((()=>{const t=a.concatenateArchivePath(r);return e[t]}),[r,e])}function c(e,r){var t;return r?((e,r)=>{for(let t=r.length;t>=0;t--){const i=r.slice(0,t);if(e[a.concatenateArchivePath(i)])return i}return[]})(e.entries,null!==(t=null==r?void 0:r.split("/").slice(1).filter(Boolean))&&void 0!==t?t:[]):[]}const s=(e,r,t)=>{var i,a,n;return null!==(n=null===(a=null===(i=e[r])||void 0===i?void 0:i.children)||void 0===a?void 0:a.reduce(((i,a)=>{const n=`${r}/${a}`,o=t(e[n],n);return void 0!==o?[...i,o]:i}),[]))&&void 0!==n?n:[]};e.getChildFilePaths=(e,r)=>s(e,r,((e,r)=>(null==e?void 0:e.isDir)?void 0:r)),e.getChildren=(e,r)=>s(e,r,(e=>e)),e.useArchiveEntryAtCurrentPath=u,e.useMaybeSetPasswordProtectedArchiveError=()=>{var e,r;const i=t.useRootPreviewMetadata(),o=n.useRootPreviewKey(),u=a.useArchiveDataQuery(o,i),c=n.useCurrentPreviewKey(),s=c&&a.isNestedArchiveFilePreviewKey(c)?c:void 0,v=a.useSetLocalErrorCallback(s),d=(null===(r=null===(e=u.data)||void 0===e?void 0:e.apiData)||void 0===r?void 0:r.isPasswordProtected)&&!!s;l.default.useEffect((()=>{d&&v(new a.FVError(a.FVErrorCode.PasswordProtectedArchivesNotSupported,a.ErrorLifecycle.Support))}),[d,v])},e.useSyncUrlParamWithState=e=>{const{optionalIOClients:{urlClient:r}}=a.useFileViewerContext(),t=i.useUpdateArchiveFileCurrentPathCallback();l.default.useEffect((()=>{var i,n;if(!(null==r?void 0:r.getQueryStringParameter(a.archiveSubpathQueryParam)))return;const o=c(e,r.getQueryStringParameter(a.archiveSubpathQueryParam));t(o,null!==(n=null===(i=e.entries[a.concatenateArchivePath(o)])||void 0===i?void 0:i.isDir)&&void 0!==n&&n,!0)}),[e,t,r])},e.useUrlControl=e=>{const r=a.useFileViewerContext().optionalIOClients.urlClient,t=i.useUpdateArchiveFileCurrentPathCallback(),n=u(e.entries);l.default.useEffect((()=>null==r?void 0:r.onQueryStringParameterChange(a.archiveSubpathQueryParam,((r,i)=>(r=>{var i;const a=c(e,r);return t(a,null!==(i=null==n?void 0:n.isDir)&&void 0!==i&&i,!0)})(i)))),[t,r,null==n?void 0:n.isDir,e])}}));
//# sourceMappingURL=c_file_viewer_preview_archive_utils.js-vflO7mQlw.map

//# debugId=a679fa84-fddb-3aca-aac6-6003038079c2