!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="18bdeb80-1bf4-3cbd-b14a-f6ebd2514386")}catch(e){}}();
define(["exports","react","./c_web-vitals","./e_edison","./c_file_viewer_api_data","./e_ui_page_files_router","./c_file_viewer_hooks_lifecycle_logging","./c_file_viewer_hooks_usePrevious"],(function(e,i,n,s,t,o,r,v){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}var l=_(i);const a=new Set([o.PreviewsTimingEvents.CONTAINER_MOUNT,o.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT,o.PreviewsTimingEvents.SDK_FILE_VIEWER_CODE_START,o.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START,o.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA,o.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT,o.PreviewsTimingEvents.FVSDK_APP_MOUNT,o.PreviewsTimingEvents.FVSDK_MARK_TTVC,o.PreviewsTimingEvents.PREVIEW_COMPONENT_MOUNT,o.PreviewsTimingEvents.PREVIEW_RENDERER_MOUNT,o.PreviewsTimingEvents.FVSDK_MARK_LCP,o.PreviewsTimingEvents.FVSDK_MARK_FCP,o.PreviewsTimingEvents.ASYNC_IMAGE_CONTAINER_MOUNT,o.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START,o.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT,o.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD,o.PreviewsTimingEvents.ASYNC_VIDEO_CONTAINER_MOUNT,o.PreviewsTimingEvents.FVSDK_VIDEO_CONTAINER_MOUNT,o.PreviewsTimingEvents.FVSDK_VIDEO_PLAYER_READY,o.PreviewsTimingEvents.FVSDK_VIDEO_MASTER_PLAYLIST_LOADED,o.PreviewsTimingEvents.ASYNC_DOC_CONTAINER_MOUNT,o.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START,o.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT,o.PreviewsTimingEvents.FVSDK_FIRST_DOC_PAGE_ON_LOAD,o.PreviewsTimingEvents.FVSDK_DOC_METADATA_LOAD]);e.useRecordPreviewsTimerOnMount=(e,i,n=!0)=>{const s=t.useFilePreviewSessionId(),{logger:_}=o.useFileViewerContext(),a=v.usePrevious(n);l.default.useEffect((()=>{var t;const o=performance.getEntriesByName(e,"mark"),v=r.getLoggingSession(s);if(o.length>0&&n&&!a){performance.clearMarks(e);const n=o[o.length-1],s=performance.now()-n.startTime;null===(t=null==_?void 0:_.logDuration)||void 0===t||t.call(_,{eventName:e,durationInMs:s,session:v?r.serializeSession(v):void 0,tags:i})}}),[_,n,a,s,i,e])},e.useTimingLogging=e=>{const i=l.default.useRef(!1),v=t.useFilePreviewSessionId(),{logger:_,isLoggedIn:g}=o.useFileViewerContext(),{onLogTimeline:T}=((e,i)=>{const n=t.useFilePreviewSessionId(),{logger:s}=o.useFileViewerContext(),v=l.default.useRef(!1);return{onLogTimeline:l.default.useCallback((()=>{var t;const _=o.PreviewsEventLogger.getStartEntry(),l=r.getLoggingSession(n);if(_&&!v.current){const n=o.PreviewsEventLogger.getEventTimeline();Object.entries(n).forEach((([n,t])=>{var o;i.has(n)&&(null===(o=null==s?void 0:s.logDuration)||void 0===o||o.call(s,{eventName:e,durationInMs:t,tags:{event:n},session:l?r.serializeSession(l):void 0}))})),null===(t=null==s?void 0:s.logDuration)||void 0===t||t.call(s,{eventName:e,durationInMs:_.startTime,tags:{event:"session_start_since_load"},session:l?r.serializeSession(l):void 0}),v.current=!0}}),[s,e,n,i])}})(`preview_timeline_ttvc_${e}`,a),E=l.default.useCallback(((e,i)=>({navigation_type:e,file_flip:String(!!(null==i?void 0:i.extra.was_flipped)),logged_in_user:String(g)})),[g]),u=o.useStabilizedCallback((e=>{var i;o.PreviewsEventLogger.mark(o.PreviewsTimingEvents.FVSDK_MARK_TTVC);const n=r.getLoggingSession(v);e.duration&&(null===(i=null==_?void 0:_.logDuration)||void 0===i||i.call(_,{eventName:o.PREVIEW_TTVC_DURATION_EVENT,durationInMs:e.duration,tags:E("script"===e.detail.navigationType?"ajax":"page_load",n),shouldLogToHive:!0,session:n?r.serializeSession(n):void 0})),T()})),P=o.useStabilizedCallback((e=>{var i;o.PreviewsEventLogger.mark(o.PreviewsTimingEvents.FVSDK_MARK_LCP);const n=r.getLoggingSession(v);e.value&&(o.PreviewsEventLogger.mark(o.PreviewsTimingEvents.FVSDK_MARK_LCP,e.value),null===(i=null==_?void 0:_.logDuration)||void 0===i||i.call(_,{eventName:"largest_contentful_paint",durationInMs:e.value,tags:E(e.navigationType,n),shouldLogToHive:!0,session:n?r.serializeSession(n):void 0}))})),d=o.useStabilizedCallback((e=>{var i;o.PreviewsEventLogger.mark(o.PreviewsTimingEvents.FVSDK_MARK_FCP);const n=r.getLoggingSession(v);e.value&&(null===(i=null==_?void 0:_.logDuration)||void 0===i||i.call(_,{eventName:"first_contentful_paint",durationInMs:e.value,tags:E(e.navigationType,n),shouldLogToHive:!0,session:n?r.serializeSession(n):void 0}))}));i.current||(n.w(d),n.W(P),i.current=!0),l.default.useEffect((()=>{const e=s.onTTVC(u);return()=>{e&&e()}}),[u])}}));
//# sourceMappingURL=c_file_viewer_logging_timing.js-vflkCz1HB.map

//# debugId=18bdeb80-1bf4-3cbd-b14a-f6ebd2514386