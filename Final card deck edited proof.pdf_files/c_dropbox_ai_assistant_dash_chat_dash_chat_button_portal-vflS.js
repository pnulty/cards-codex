!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0c6c3d10-75a6-3c42-b6b8-0a81158a1dfa")}catch(e){}}();
define(["exports","react","react-dom","./e_ui_page_files_router","./c_ncct_manual_assist_util","./c_core_i18n","./c__rollupPluginBabelHelpers","./c_ux_analytics_modal_tracking","./c_dig-icons_assets_ui-icon_line_video-enhance"],(function(e,t,a,r,n,o,l,i,s){"use strict";function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var d,u=c(t);function m(e,a){void 0===a&&(a=r.isStrictEqual);var n,o,l,s=t.useState(),c=s[0],d=s[1],u=t.useRef(e);return n=function(){a(u.current,e)||(d(u.current),u.current=e)},o=[e],l=i.useFirstMountState(),t.useEffect(l?r.noop:n,o),c}var g="https://"+n.computeDomains(null!==(d=window.__DEV_SERVER_HOSTNAME__)&&void 0!==d?d:"")[0].WEB_STATIC_CLOUDFLARE_CDN_HOST+"/static/metaserver/static/js/dropbox_ai_assistant/dash_chat/lottie-assets/dash_hover-vflct0b7j.lottie";r.injectInternalStyle("/static/metaserver/static/js/dropbox_ai_assistant/dash_chat/dash_cta_animated_icon.module.out-vflXpVv_U.css",(e=>"._icon-container_17rgn_1{margin-left:-4px;margin-right:-4px}._icon-size-medium_17rgn_6{height:24px;width:24px}._icon-size-large_17rgn_11{height:32px;width:32px}"));const p="_icon-container_17rgn_1",f="_icon-size-medium_17rgn_6",h="_icon-size-large_17rgn_11",_=({isHovered:e,size:a})=>{const n=t.useRef(null);return t.useEffect((()=>{var t;e&&(null===(t=n.current)||void 0===t||t.start())}),[e]),u.default.createElement("div",{className:r.cx(p,{[f]:"medium"===a,[h]:"large"===a})},u.default.createElement(r.LottiePlayer,{src:g,ref:n}))};_.displayName="DashCTAAnimatedIcon";r.injectInternalStyle("/static/metaserver/static/js/dropbox_ai_assistant/dash_chat/dash_chat_button_portal.module.out-vflQTTVGl.css",(e=>"._mobile-button-container_15pb3_1{display:inline-block;height:var(--dig-spacing__macro__large);position:relative;width:var(--dig-spacing__macro__large)}._emphasisEffect_15pb3_8{overflow:hidden;pointer-events:none;position:absolute}"));const v="_mobile-button-container_15pb3_1",b="_emphasisEffect_15pb3_8",E=e=>!sessionStorage.getItem(e)&&(sessionStorage.setItem(e,"true"),!0),S=["children"],C=["children","asChild","variant"],y=["children","className"],x=["children","className","_dangerouslySetClassName","sx"],w=["stroke","borderWidth","fill","className","style"],k=["children","asChild","maxHeight","maxWidth","minHeight","className"];var A={open:!1,triggerStrategy:"click",closeOnOutsideClick:!0,hasScrollLock:!1,isPortaled:!0,offsetDistance:4,placement:"bottom",spacing:"small",trapFocus:!0,shouldFocusContentOnOpen:!0,hoverBufferTime:200,anchorEl:null,boundaryEl:null,shouldHideOnAnchorHidden:!0,withArrow:!1},I={open:A.open,spacing:A.spacing,placement:A.placement,anchorEl:null,bodyEl:null,setBodyEl:()=>{},boundaryEl:null,triggerEl:null,setTriggerEl:()=>{},containerEl:null,setContainerEl:()=>{},openPopover:()=>{},closePopover:()=>{},triggerStrategy:A.triggerStrategy,closeOnOutsideClick:A.closeOnOutsideClick,shouldFocusContentOnOpen:A.shouldFocusContentOnOpen,isHoveringTrigger:u.createRef(),setIsHoveringTrigger:()=>{},isHoveringContent:u.createRef(),setIsHoveringContent:()=>{},isReturningFocus:u.createRef(),setIsReturningFocus:()=>{},queueClose:()=>{},hasScrollLock:A.hasScrollLock,isPortaled:A.isPortaled,offsetDistance:A.offsetDistance,trapFocus:A.trapFocus,shouldHideOnAnchorHidden:A.shouldHideOnAnchorHidden,availableHeight:void 0,setAvailableHeight:()=>{},floatingContext:void 0,arrowEl:null,setArrowEl:()=>{}},O=u.createContext(I),P=e=>{let{children:t}=e,a=l._objectWithoutProperties(e,S);const{open:r=A.open,onToggle:n,triggerStrategy:o=A.triggerStrategy,closeOnOutsideClick:i=A.closeOnOutsideClick,hasScrollLock:s=A.hasScrollLock,isPortaled:c=A.isPortaled,offsetDistance:d,placement:m=A.placement,spacing:g=A.spacing,trapFocus:p=A.trapFocus,shouldFocusContentOnOpen:f=A.shouldFocusContentOnOpen,anchorEl:h=A.anchorEl,boundaryEl:_=A.boundaryEl,shouldHideOnAnchorHidden:v=A.shouldHideOnAnchorHidden,paddingX:b,paddingY:E,paddingTop:C,paddingBottom:y,paddingLeft:x,paddingRight:w,hoverBufferTime:k=A.hoverBufferTime,withCloseButton:I,withArrow:P=A.withArrow}=a,T=null!=d?d:P?6:A.offsetDistance,[F,D]=u.useState(void 0),[H,R]=u.useState(null),[B,M]=u.useState(null),[W,j]=u.useState(null),[N,L]=u.useState(null),z=u.useRef(!1),U=u.useCallback((e=>{z.current=e}),[]),V=u.useRef(!1),q=u.useCallback((e=>{V.current=e}),[]),G=u.useRef(!1),Y=u.useCallback((e=>{G.current=e}),[]),K=u.useRef(null),X=u.useCallback((e=>{null==n||n(e,H)}),[n,H]),$=u.useCallback((()=>{X(!0)}),[X]),Q=u.useCallback((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r&&(X(!1),H&&e&&(U(!0),H.focus(),setTimeout((()=>{U(!1)}),0)))}),[X,H,U,r]),J=u.useCallback((()=>{K.current&&(clearTimeout(K.current),K.current=null),K.current=setTimeout((()=>{V.current||G.current||Q(!1)}),k)}),[Q,k]);u.useEffect((()=>()=>{K.current&&(clearTimeout(K.current),K.current=null)}),[]);const Z={open:r,triggerStrategy:o,closeOnOutsideClick:i,hasScrollLock:s,isPortaled:c,offsetDistance:T,placement:m,spacing:g,trapFocus:p,triggerEl:H,setTriggerEl:e=>{R(e)},containerEl:N,setContainerEl:L,openPopover:$,closePopover:Q,isHoveringTrigger:V,setIsHoveringTrigger:q,isHoveringContent:G,setIsHoveringContent:Y,isReturningFocus:z,setIsReturningFocus:U,queueClose:J,shouldFocusContentOnOpen:f,anchorEl:h,boundaryEl:_,shouldHideOnAnchorHidden:v,paddingX:b,paddingY:E,paddingTop:C,paddingBottom:y,paddingLeft:x,paddingRight:w,withCloseButton:I,withArrow:P,availableHeight:F,setAvailableHeight:D,bodyEl:B,setBodyEl:M,arrowEl:W,setArrowEl:j};return u.createElement(O.Provider,{value:Z},t)};P.displayName="Popover";var T=r.createSlot("DIG_Slot"),F=e=>{let{children:t,asChild:a,variant:n="primary"}=e,o=l._objectWithoutProperties(e,C);const i=D();return a&&u.isValidElement(t)?u.createElement(T,l._objectSpread2({},i),t):u.createElement(r.Button,l._objectSpread2(l._objectSpread2({variant:n},o),i),t)};F.displayName="Popover.Trigger";var D=()=>{const e=u.useContext(O),{setTriggerEl:t,openPopover:a,closePopover:n,triggerStrategy:o,open:i,containerEl:s,setIsHoveringTrigger:c,isReturningFocus:d,queueClose:m}=e,g=u.useRef(!1),p=r.useMediaQuery("(hover: hover)"),f=u.useCallback((()=>{i?n():a()}),[i,n,a]),h=u.useCallback((()=>{c(!0),a()}),[c,a]),_=u.useCallback((()=>{c(!1),m()}),[c,m]),v=u.useCallback((()=>{i?n(!1):a()}),[i,n,a]),b=u.useCallback((()=>{d.current||a()}),[d,a]),E=u.useCallback((e=>{i&&("Tab"!==e.key||e.shiftKey?"Escape"===e.key&&n(!1):s&&(g.current=!0,e.preventDefault(),s.focus()))}),[i,s,n]),S=u.useCallback((()=>{i&&!g.current&&n(!1),g.current=!1}),[i,n]),C=u.useCallback((e=>{if(e)if(H(e))t(e);else{if(!(e&&"object"==typeof e&&"contextElement"in e&&H(e.contextElement)))throw new Error("Popover.Trigger child must forward to an HTMLElement as its ref, or provide a `contextElement` on the imperative handle.");t(e.contextElement)}else t(null)}),[t]);return u.useMemo((()=>l._objectSpread2(l._objectSpread2(l._objectSpread2({ref:C,"aria-haspopup":"dialog","aria-expanded":i?"true":"false"},"click"===o?{onClick:f}:{}),"hover"===o&&p?{onMouseEnter:h,onMouseLeave:_,onFocus:b,onKeyDown:E,onBlur:S}:{}),"hover"!==o||p?{}:{onPointerDown:v})),[i,o,p,f,h,_,b,E,S,v,C])};function H(e){return"undefined"!=typeof window&&(e instanceof HTMLElement||e instanceof function(e){var t;return(null==(t=null==e?void 0:e.ownerDocument)?void 0:t.defaultView)||window}(e).HTMLElement)}function R(e){const t="undefined"!=typeof window&&"number"==typeof(null==window?void 0:window.devicePixelRatio)?window.devicePixelRatio:1;return Math.round(e*t)/t}var B=e=>{if(!e)return[];return Array.from(e.querySelectorAll(["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","))).filter((e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden")))},M=e=>{let{children:t}=e;const a=u.useContext(O),{open:n,anchorEl:o,boundaryEl:i,placement:s,offsetDistance:c=4,hasScrollLock:d,trapFocus:g,shouldFocusContentOnOpen:p,isPortaled:f=!0,triggerEl:h,containerEl:_,closePopover:v,closeOnOutsideClick:b,triggerStrategy:E,shouldHideOnAnchorHidden:S=!0,setAvailableHeight:C,withArrow:y,arrowEl:x}=a;!function(e,t){const a=u.default.useCallback((t=>{if(!e||"Tab"!==t.key)return;const a=B(e);if(0===a.length)return void t.preventDefault();const r=a[0],n=a[a.length-1],o="undefined"!=typeof document?document.activeElement:null;t.shiftKey?o===r&&(t.preventDefault(),n.focus()):o===n&&(t.preventDefault(),r.focus())}),[e]);u.default.useEffect((()=>{if(e&&t)return e.addEventListener("keydown",a),()=>{e.removeEventListener("keydown",a)}}),[e,a,t])}(_,n&&g);const w=m(n),[k,A]=u.useState(void 0);u.useLayoutEffect((()=>{A(i||void 0)}),[i]),u.useEffect((()=>{!1===w&&n&&_&&"hover"!==E&&p&&_.focus()}),[n,w,E,_,p]);const I=u.useCallback((()=>{b&&v(!1)}),[b,v]),P=u.useCallback((e=>{let{availableHeight:t}=e;C(t)}),[C]),{x:T,y:F,refs:D,strategy:H,middlewareData:M,placement:W,context:j}=r.useFloating({placement:s,strategy:"absolute",whileElementsMounted:(e,t,a)=>r.autoUpdate(e,t,a,{elementResize:!0}),middleware:[r.offset(y?c+9:c),r.flip({boundary:k,fallbackStrategy:"initialPlacement"}),k?r.shift({crossAxis:!0,mainAxis:!0,boundary:k}):r.shift({limiter:r.limitShift()}),r.size({apply:P}),...S?[r.hide({strategy:"referenceHidden",boundary:k})]:[],r.hide({strategy:"escaped",boundary:k}),...y&&x?[r.arrow({element:x,padding:12})]:[]]});r.useIsomorphicLayoutEffect((()=>{const e=o||h;e&&D.setReference(e)}),[D,o,h]);const N=!(!M.hide||!M.hide.referenceHidden)&&M.hide.referenceHidden,L=!(!M.hide||!M.hide.escaped)&&M.hide.escaped,z=u.useMemo((()=>l._objectSpread2(l._objectSpread2({},a),{},{floatingContext:j})),[a,j]);return n?u.createElement(O.Provider,{value:z},u.createElement(r.Layer,{_elevateByZ:r.ELEVATED_BASE_INDEX,_preferAbsolute:!0,isPortaled:f},u.createElement("div",{ref:D.setFloating,style:{position:H,top:"0",left:"0",visibility:L||N?"hidden":void 0,transform:`translate3d(${R(Number(T))}px,${R(Number(F))}px,0)`}},u.createElement(r.RemoveScroll,{enabled:n&&d},u.createElement(r.ClickOutside,{isActive:n,onClickOutside:I,shouldPropagateMouseEvents:!0,isClickThroughPortaled:f,isBlock:!0},t))))):null};M.displayName="Popover.Overlay";var W=r.createRuntimeFn({defaultClassName:"dig-x7xemsd_23-1-0",variantClassNames:{isFullWidth:{true:"dig-x7xemse_23-1-0"}},defaultVariants:{},compoundVariants:[]}),j=r.createRuntimeFn({defaultClassName:"dig-x7xemsa_23-1-0",variantClassNames:{withCloseButton:{true:"dig-x7xemsb_23-1-0"}},defaultVariants:{},compoundVariants:[]}),N=e=>{let{children:t}=e;const a=u.useContext(O),{withCloseButton:r}=a;return u.createElement("div",{className:j({withCloseButton:!!r})},t)};N.displayName="Popover.Header";var L=e=>{let{children:t,className:a}=e,n=l._objectWithoutProperties(e,y);const{setBodyEl:o}=u.useContext(O);return u.createElement("div",l._objectSpread2({ref:o,className:r.classNames2("dig-x7xemsc_23-1-0",r.makeScrollbarClassName({borderRadius:"Large"}),a)},n),t)};L.displayName="Popover.Body";var z=u.forwardRef(((e,t)=>{let{children:a,className:n,_dangerouslySetClassName:o,sx:i}=e,s=l._objectWithoutProperties(e,x);return u.createElement(r.Box,l._objectSpread2(l._objectSpread2(l._objectSpread2({},i),s),{},{className:o,ref:t}),a)})),U=e=>{let{isFullWidth:t=!1,marginTop:a="Micro Small",marginBottom:r="Micro Small"}=e;return u.createElement(z,{sx:{borderTop:"Solid",borderColor:"Border Subtle",marginTop:a,marginBottom:r},_dangerouslySetClassName:W({isFullWidth:t}),role:"separator"})};function V(e){return"number"==typeof e?`${e}px`:null!=e?e:""}U.displayName="Popover.Divider";var q={small:["var(--dig-spacing__dimension__12)","var(--dig-spacing__dimension__12)"],medium:["var(--dig-spacing__dimension__12)","var(--dig-spacing__dimension__16)"],large:["var(--dig-spacing__dimension__20)","var(--dig-spacing__dimension__16)"],xlarge:["var(--dig-spacing__dimension__16)","var(--dig-spacing__dimension__20)"]};var G=u.forwardRef(((e,t)=>{let{stroke:a="Border Subtle - On Base",borderWidth:n=1,fill:o="Background Raised",className:i,style:s}=e,c=l._objectWithoutProperties(e,w);const{floatingContext:d,setArrowEl:m}=u.useContext(O),g=u.useMemo((()=>((e,t)=>a=>{"function"==typeof t?t(a):t.current=null!=a?a:void 0,e&&("function"==typeof e?e(a):e.current=a)})(t,m)),[t,m]);return d?u.createElement(r.FloatingArrow,l._objectSpread2(l._objectSpread2({},c),{},{ref:g,context:d,className:i,width:18,height:9,fill:r.vars.Color[o],stroke:r.vars.Color[a],"data-testid":"popover-arrow",strokeWidth:n,style:l._objectSpread2(l._objectSpread2({},s),{},{transform:"translateY(-0.5px)"})})):null}));G.displayName="Popover.Arrow";var Y=u.forwardRef(((e,t)=>{let{children:a,asChild:n=!1,maxHeight:o,maxWidth:i,minHeight:s,className:c}=e,d=l._objectWithoutProperties(e,k);const m=u.useContext(O),{spacing:g,paddingX:p,paddingY:f,paddingTop:h,paddingBottom:_,paddingLeft:v,paddingRight:b,withCloseButton:E,closePopover:S,triggerStrategy:C,setContainerEl:y,bodyEl:x,availableHeight:w,withArrow:A}=m,{top:I,left:P,right:F,bottom:D}=function(e,t,a,r,n,o,l){var i,s,c,d;const[u,m]=q[e];return{top:V(null!=(i=null!=r?r:a)?i:m),left:V(null!=(s=null!=o?o:t)?s:u),right:V(null!=(c=null!=l?l:t)?c:u),bottom:V(null!=(d=null!=n?n:a)?d:m)}}(g,p,f,h,_,v,b),H=K(o,i,s,w),R={ref:y,tabIndex:-1,role:"dialog","aria-modal":!0,onKeyDown:e=>{"Escape"===e.key&&S()},onMouseEnter:()=>{"hover"===C&&m.setIsHoveringContent(!0)},onMouseLeave:()=>{"hover"===C&&(m.setIsHoveringContent(!1),m.queueClose())}},B=(e=>e?"boolean"==typeof e?u.createElement(G,null):e:null)(A);return n?u.createElement(T,l._objectSpread2(l._objectSpread2({},d),R),a):u.createElement("div",l._objectSpread2(l._objectSpread2({},d),{},{className:r.classNames2("dig-x7xems7_23-1-0",c),style:l._objectSpread2({},r.assignInlineVars({"var(--dig-x7xems0_23-1-0)":I,"var(--dig-x7xems1_23-1-0)":D,"var(--dig-x7xems2_23-1-0)":P,"var(--dig-x7xems3_23-1-0)":F}))},R),u.createElement(z,{sx:{borderRadius:"Large"},_dangerouslySetClassName:r.classNames2("dig-x7xems8_23-1-0",r.makeScrollbarClassName({borderRadius:"Large"})),style:l._objectSpread2(l._objectSpread2({},H),x?{}:{overflowY:"auto"})},a),!!E&&u.createElement(r.IconButton,{className:"dig-x7xems9_23-1-0",variant:"borderless",shape:"standard",size:"medium","aria-label":E,onClick:()=>S()},u.createElement(r.UIIcon,{src:r.CloseLine})),B)}));Y.displayName="Popover.Content";var K=(e,t,a,r)=>u.useMemo((()=>{const n={},o=[];return e&&o.push($(e)),r&&o.push(r-8+"px"),o.length>0&&(n.maxHeight=`min(${o.join(", ")})`),t&&(n.maxWidth=$(t)),n.minHeight=void 0!==a?$(a):"60px",{maxHeight:n.maxHeight?X(n.maxHeight):void 0,maxWidth:n.maxWidth?X(n.maxWidth):void 0,minHeight:n.minHeight?X(n.minHeight):void 0}}),[e,t,a,r]),X=e=>`calc(${e} - 2px)`,$=e=>"number"==typeof e?`${e}px`:e,Q=Object.assign(P,{Trigger:F,Overlay:M,Header:N,Body:L,Divider:U,Content:Y,Arrow:G});r.injectInternalStyle("/static/metaserver/static/js/dropbox_ai_assistant/dash_chat/dash_chat_prompt_suggestion_card.module.out-vflgHwOL3.css",(e=>'._listItemWrapper_lw9jl_4:not(:last-child):after{background-color:var(--dig-color__border__base);content:"";display:block;height:1px;margin:var(--dig-spacing__micro__xsmall);width:calc(100% - var(--dig-spacing__micro__xsmall)*2)}._listItem_lw9jl_4{border-radius:var(--dig-radius__small);padding:var(--dig-spacing__micro__small) var(--dig-spacing__micro__xsmall)}._popoverContentContainer_lw9jl_18{width:270px}._popoverContentContainer_lw9jl_18>*{border:1px solid var(--dig-color__border__base);border-radius:var(--dig-radius__xlarge);box-shadow:0 16px 32px 0 rgba(0,97,254,.05)}._popoverContentContainer_lw9jl_18:hover>*{box-shadow:0 16px 32px 0 rgba(0,97,254,.17)}._listContent_lw9jl_34{min-width:0;text-align:left;width:100%}[dir=rtl] ._listContent_lw9jl_34{text-align:right}'));const J=o.intl.formatMessage({id:"3h9519",defaultMessage:"Close prompt suggestion"}),Z=o.intl.formatMessage({id:"6OExWi",defaultMessage:"Try asking"}),ee={id:"summarize_long_document",icon:s.SummarizeLine,title:o.intl.formatMessage({id:"UtgXQA",defaultMessage:"Summarize a long document"})},te={id:"transcribe_video",icon:s.VideoEnhanceLine,title:o.intl.formatMessage({id:"4GOwic",defaultMessage:"Transcribe a video"})},ae={id:"describe_an_image_and_find_it",icon:r.AiSearchLine,title:o.intl.formatMessage({id:"R6J02I",defaultMessage:"Describe an image and find it"})},re={id:"identify_recurring_themes",icon:s.LightbulbLine,title:o.intl.formatMessage({id:"1BUicM",defaultMessage:"Identify recurring themes"})},ne={id:"summarize_for_quick_insights",icon:s.SummarizeLine,title:o.intl.formatMessage({id:"bzFl47",defaultMessage:"Summarize for quick insights"})},oe=[ee,te,ae],le=[re,ae,ne],ie=({anchorEl:e,isOpen:t,suggestions:a,onClose:n,onPromptClick:o,additionalPopoverProps:l})=>u.default.createElement(r.ThemeProvider,{subtheme:r.aiSubtheme},u.default.createElement(r.ThemeContainer,null,u.default.createElement(r.LayerContext.Provider,{value:{zIndex:1001}},u.default.createElement(Q,{anchorEl:e,placement:"top-end",open:t,paddingX:"var(--dig-spacing__micro__xsmall)",paddingY:"var(--dig-spacing__micro__small)",onToggle:e=>{e||n()},closeOnOutsideClick:!1,...l},u.default.createElement(Q.Overlay,null,u.default.createElement(r.Box,{className:"_popoverContentContainer_lw9jl_18"},u.default.createElement(Q.Content,null,u.default.createElement(Q.Header,null,u.default.createElement(r.Box,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingX:"Micro Medium",paddingY:"Micro Small"},u.default.createElement(r.Text,{tagName:"span",size:"medium",color:"subtle"},Z),u.default.createElement(r.IconButton,{variant:"transparent",size:"small",onClick:n,"aria-label":J},u.default.createElement(r.UIIcon,{src:r.CloseLine,size:"small"})))),u.default.createElement(Q.Body,null,u.default.createElement(r.List,{paddingX:"var(--dig-spacing__micro__small)",paddingY:0},a.map(((e,t)=>{var a;return u.default.createElement("div",{key:e.id,className:"_listItemWrapper_lw9jl_4"},u.default.createElement(r.List.Item,{key:e.id,tagName:"button",onClick:()=>o(e,t),isSelectable:!0,className:"_listItem_lw9jl_4"},u.default.createElement(r.List.Accessory,null,u.default.createElement(r.UIIcon,{src:null!==(a=e.icon)&&void 0!==a?a:s.AiChatLine,size:"medium",color:"var(--dig-color__text__subtle)"})),u.default.createElement(r.List.Content,{className:"_listContent_lw9jl_34"},u.default.createElement(r.Truncate,{lines:2},u.default.createElement(r.Text,{size:"medium"},e.title)))))})))))))))));ie.displayName="DashChatPromptSuggestionCardUI";const se=({anchorEl:e,file:a})=>{const[n,o]=r.useDashChatPromptSuggestionCardTimeout(r.WebIASurface.PREVIEWS),l=t.useCallback((()=>{o(!0),r.logDashChatPromptSuggestionHidden(r.WebIASurface.PREVIEWS)}),[o]),i=t.useCallback(((e,t)=>{o(!0),r.dispatchWebIAUserAction({type:"previews.prompt_suggestion",message:e.title,docIds:[a.file_id],file:a}),r.logDashChatPromptSuggestionSelected(r.WebIASurface.PREVIEWS,t)}),[a,o]),{isTranscriptNeeded:s,isTranscriptSuccess:c}=((e,a)=>{const[n,o]=t.useState(!1),l=t.useMemo((()=>new r.DefaultUserApiV2Client(r.mustGetActiveUserApiV2Properties())),[]),i=r.useGenerateTranscriptsCallback({apiV2Client:l}),s=t.useMemo((()=>r.getFilename(e)),[e]);return t.useEffect((()=>{a&&(r.isFileVideo(s)||r.isFileAudio(s))&&(o(!1),i(e.file_id).then((e=>{"completed"===e.status&&o(!0)})))}),[s,i,e.file_id,a]),{isTranscriptNeeded:r.isFileVideo(s)||r.isFileAudio(s),isTranscriptSuccess:n}})(a,!n),d=!n&&(!s||c),[m,g]=r.useContextEngineConversationsGetQuerySuggestions(d,void 0,!1,a.file_id,a.href),p=t.useMemo((()=>{var e;return null!==(e=null==m?void 0:m.filter((e=>!!e.text&&void 0!==e.prediction_id)).map((e=>({id:e.prediction_id,title:e.text}))))&&void 0!==e?e:[]}),[m]),f=!n&&!g&&p.length>0;return t.useEffect((()=>{f&&r.logDashChatPromptSuggestionShown(r.WebIASurface.PREVIEWS,p.length)}),[f,p.length]),u.default.createElement(ie,{anchorEl:e,isOpen:f,suggestions:p,onClose:l,onPromptClick:i,additionalPopoverProps:{offsetDistance:-8}})};se.displayName="DashChatPromptSuggestionCardOnPreview";const ce=({anchorEl:e,onToggleOpen:a})=>{const n=r.useSelector(r.getCurrentFolderInfo)||null,o=r.useSelector(r.path),l=r.useSelector(r.isInFolderView),[i,s]=r.useDashChatPromptSuggestionCardTimeout(r.WebIASurface.BROWSE),c=t.useCallback((()=>{s(!0),r.logDashChatPromptSuggestionHidden(r.WebIASurface.BROWSE),a(!1)}),[s,a]),d=t.useCallback(((e,t)=>{var a;s(!0),r.dispatchWebIAUserAction({type:"browse.prompt_suggestion",message:e.title,docIds:[null!==(a=null==n?void 0:n.file_id)&&void 0!==a?a:o]}),r.logDashChatPromptSuggestionSelected(r.WebIASurface.BROWSE,t)}),[s,n,o]),m=l?le:oe,g=!i&&m.length>0;return((e,a)=>{const n=r.useSelector(r.getCurrentFolderInfo),o=null==n?void 0:n.fq_path,l=r.useGetDashChatSidebarOpenState(),i=t.useRef(o),s=t.useRef(l),c=t.useRef(a);t.useEffect((()=>{c.current=a}),[a]),t.useEffect((()=>{c.current&&void 0!==o&&o!==i.current&&e()}),[o,e]),t.useEffect((()=>{const t=()=>{c.current&&e()};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e]),t.useEffect((()=>{c.current&&l&&s.current!==l&&e(),s.current=l}),[l,e]),t.useEffect((()=>()=>{c.current&&e()}),[e])})(c,g),t.useEffect((()=>{a(g)}),[g,a]),t.useEffect((()=>{g&&r.logDashChatPromptSuggestionShown(r.WebIASurface.BROWSE,m.length)}),[g,m.length]),u.default.createElement(ie,{anchorEl:e,isOpen:g,suggestions:m,onClose:c,onPromptClick:d})};ce.displayName="DashChatPromptSuggestionCardOnBrowse";const de=()=>u.default.createElement("svg",{width:"110",height:"40",viewBox:"0 0 110 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:b},u.default.createElement("g",{filter:"url(#filter0_f_16155_61111)"},u.default.createElement("ellipse",{cx:"45.7682",cy:"-6.96724",rx:"44.9408",ry:"29.2472",transform:"rotate(17.9526 45.7682 -6.96724)",fill:"#0061FE","fill-opacity":"0.2"})),u.default.createElement("defs",null,u.default.createElement("filter",{id:"filter0_f_16155_61111",x:"-17.9336",y:"-58.0549",width:"127.404",height:"102.175",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},u.default.createElement("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),u.default.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),u.default.createElement("feGaussianBlur",{stdDeviation:"10",result:"effect1_foregroundBlur_16155_61111"})))),ue=o.intl.formatMessage({id:"9KHFxJ",defaultMessage:"Dash"}),me=o.intl.formatMessage({id:"W9ARhr",defaultMessage:"Ask Dash"}),ge=o.intl.formatMessage({id:"TQeAUH",defaultMessage:"Have a question? Dash is always here"}),pe=o.intl.formatMessage({id:"0D6aK/",defaultMessage:"Whenever you need instant answers about your work, select Ask Dash to open it again."}),fe=o.intl.formatMessage({id:"n9VYyK",defaultMessage:"Got it"}),he="dash-chat-dismiss-tooltip",_e=({onDisplayChange:e,tooltipId:a,triggerRef:n,surface:o})=>{const[l,i]=r.useDashChatDismissTooltipShouldShowOnSurface(),[s,c]=t.useState(!1),d=t.useRef(null),m=t.useMemo((()=>s?document.getElementById("global-header-portal"):null),[s]);r.useResizeObserver(m,(()=>{var e,t;s&&(null===(t=null===(e=d.current)||void 0===e?void 0:e.update)||void 0===t||t.call(e))})),t.useEffect((()=>{l===o&&(c(!0),i(null))}),[l,i,o]),t.useEffect((()=>{s&&r.logDashChatCtaEducationTooltipShown(o)}),[s,o]);const g=t.useCallback((()=>{r.logDashChatCtaEducationTooltipDismissed(o),c(!1)}),[c,o]);return u.default.createElement(r.Tooltip.Control,{variant:"rich",id:a,open:s,triggerRef:n,auto:!0,placement:"bottom-end",maxWidth:277,onDisplayed:()=>e(!0),onHidden:()=>e(!1),ref:d},u.default.createElement(r.Tooltip.Title,null,ge),u.default.createElement(r.Tooltip.Text,null,pe),u.default.createElement(r.Tooltip.Actions,null,u.default.createElement(r.Button,{variant:"outline",onClick:g,autoFocus:!0},fe)))},ve=({onClick:e,surface:a})=>{const n=r.useIsMobileScreen(r.Breakpoint.MOBILE),o=r.useIsDashChatM1Enabled(),l=r.useGetDashChatSidebarOpenState(),i=!l,[s,c]=t.useState(!1),[d,m]=t.useState(!1),g=t.useRef(null),p=t.useCallback((()=>c(!0)),[]),f=t.useCallback((()=>c(!1)),[]),h=r.useIsDashChatPromptSuggestionCardEnabled()&&!l,[b,E]=t.useState(!1);if(!i)return null;const S=u.default.createElement("span",{className:v},u.default.createElement(r.IconButton,{variant:"outline",size:"large",onClick:e,"aria-label":me,"aria-describedby":d?he:void 0,onMouseEnter:p,onMouseLeave:f,ref:g},u.default.createElement(_,{isHovered:s,size:"large"}))),C=u.default.createElement(r.Button,{onClick:e,onMouseEnter:p,onMouseLeave:f,size:"large",variant:o?"outline":"opacity",ref:g,"aria-describedby":d?he:void 0,withIconStart:o?u.default.createElement(_,{isHovered:s,size:"medium"}):u.default.createElement(r.UIIcon,{src:r.DropboxDashLine})},o?me:ue,b&&u.default.createElement(de,null));return u.default.createElement(u.default.Fragment,null,n?S:C,u.default.createElement(_e,{onDisplayChange:m,tooltipId:he,triggerRef:g,surface:a}),h&&!d?u.default.createElement(be,{anchorEl:g.current,surface:a,onToggleOpen:E}):null)},be=t.memo((({anchorEl:e,surface:t,onToggleOpen:a})=>t===r.WebIASurface.BROWSE?u.default.createElement(ce,{anchorEl:e,onToggleOpen:a}):null)),Ee=()=>{const e=r.useSelector(r.getCurrentFolderInfo),a=r.useSelector(r.selectedFiles),n=null==e?void 0:e.fq_path,o=r.usePrevious(n),l=r.useIsMobileScreen(r.Breakpoint.MOBILE);t.useEffect((()=>{"/"===(null==e?void 0:e.fq_path)&&r.canAutoOpenOnBrowse()&&E("dash_chat_sidebar_opened")&&r.dispatchWebIAUserAction({type:"browse.auto_open",scopedFolder:e?r.convertFolderToFSSFolder(e.fq_path,e.file_id):void 0,isMobile:l})}),[e,l]),t.useEffect((()=>{e&&o!==n&&r.dispatchWebIAUserAction({type:"browse.navigation",scopedFolder:r.convertFolderToFSSFolder(e.fq_path,e.file_id)})}),[e,n,o]);return u.default.createElement(ve,{onClick:()=>{const t={type:"browse.header",files:a.toArray(),scopedFolder:e?r.convertFolderToFSSFolder(e.fq_path,e.file_id):void 0};o===n?(r.openDashChatSidebar(t),r.logWebIAUserAction(t)):r.dispatchWebIAUserAction(t)},surface:r.WebIASurface.BROWSE})},Se=({selectedFiles:e,scopedFolderPath:t,folderFileId:a})=>u.default.createElement(ve,{onClick:()=>{var n;const o=r.searchSessionManager.getSession({searchSessionExtensionType:"PASSIVE"}).searchSessionId;r.dispatchWebIAUserAction({type:"search.header",files:null!==(n=null==e?void 0:e.toArray())&&void 0!==n?n:[],scopedFolder:t&&a?r.convertFolderToFSSFolder(t,a):void 0,searchSessionId:o})},surface:r.WebIASurface.SEARCH_RESULTS_PAGE}),Ce=()=>u.default.createElement(ve,{onClick:()=>{r.dispatchWebIAUserAction({type:"stacks.header"})},surface:r.WebIASurface.STACKS}),ye=()=>u.default.createElement(ve,{onClick:()=>{r.dispatchWebIAUserAction({type:"share.header"})},surface:r.WebIASurface.SHARE}),xe=()=>u.default.createElement(ve,{onClick:()=>{r.dispatchWebIAUserAction({type:"requests.header"})},surface:r.WebIASurface.REQUESTS});e.DASH_CHAT_DISMISS_TOOLTIP_ID=he,e.DashCTAAnimatedIcon=_,e.DashChatButtonDismissTooltip=_e,e.DashChatButtonPortal=({sourceContext:e,selectedFiles:t,scopedFolderPath:n,folderFileId:o})=>{const l=r.useShouldShowDashRedesign({allowLockedState:!0}),i=document.getElementById(r.SEARCH_ANSWER_BUTTON_PORTAL_TARGET);if(!i||!l)return null;let s;switch(e){case"search":s=u.default.createElement(Se,{selectedFiles:t,scopedFolderPath:n,folderFileId:o});break;case"browse":s=u.default.createElement(Ee,null);break;case"stacks":s=u.default.createElement(Ce,null);break;case"share":s=u.default.createElement(ye,null);break;case"requests":s=u.default.createElement(xe,null)}return a.createPortal(s,i)},e.DashChatPromptSuggestionCardOnPreview=se,e.Popover=Q,e.oncePerSession=E}));
//# sourceMappingURL=c_dropbox_ai_assistant_dash_chat_dash_chat_button_portal.js-vflRo5h1I.map

//# debugId=0c6c3d10-75a6-3c42-b6b8-0a81158a1dfa