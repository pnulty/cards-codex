!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3edab5f9-2387-3709-bd70-50212f5859e4")}catch(e){}}();
define(["exports","./e_ui_page_files_router","./c_core_i18n","./e_core_exception","./c_gen_browse_web_BrowseUtilWeb"],(function(e,t,o,n,r){"use strict";var s,i,_;e.ACCESS_LEVEL=void 0,(s=e.ACCESS_LEVEL||(e.ACCESS_LEVEL={}))[s.ACCESS=0]="ACCESS",s.LIMITED_ACCESS="locked",s.LIMITED_ACCESS_VAULT="vault",s.NO_ACCESS="no_access",e.Operation=void 0,(i=e.Operation||(e.Operation={}))[i.COPY=0]="COPY",i[i.MOVE=1]="MOVE",i[i.UPLOAD=2]="UPLOAD",i[i.EXPORT_LEGAL_HOLD=3]="EXPORT_LEGAL_HOLD",e.FolderPickerLoadingState=void 0,(_=e.FolderPickerLoadingState||(e.FolderPickerLoadingState={}))[_.LOADING=0]="LOADING",_[_.ERROR=1]="ERROR",_[_.LOADED=2]="LOADED",o.intl.formatMessage({id:"BCyGLk",defaultMessage:"Try again"}),o.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),o.intl.formatMessage({id:"v3oTv1",defaultMessage:"Something went wrong on our end"});const a={};function d(e,o){const n=r.GetUrlForTreeViewFolders(),s={folder:o};return t.WebRequestOref({url:n,type:"POST",subject_user:e.id,data:s,dataType:"json",skipNotifyError:!0})}e.DIALOG_ACTIONS_HEIGHT=64,e.DIALOG_BODY_PADDING=26,e.DIALOG_HEAD_HEIGHT=64,e.FOLDER_SUGGESTION_HEIGHT=89,e.INVALID_FOCUS_INDEX=-1,e.KEY_SCOPE="folder_picker_keyboard_selection",e.LOADING_MIN_TIME=200,e.MAX_FOLDER_NAME_LENGTH=20,e.PATH_BREADCRUMB_HEIGHT=40,e.SUGGESTED_LOCATION_KEY_SCOPE="suggested_location_keyboard_selection",e.getFolderContents=d,e.getFolderContentsAPIv2=async function(e,o,r,s){var i;const _=new t.DefaultUserApiV2Client(e);try{const e=await t.GetFilesRoutes(_).rpc("list_subfolders",{path:o,max_height:r,limit_sub_folder_count:s},{}),n=[];return(e.subfolder_entries||[]).forEach((e=>{const t=e.folder_metadata;let o=!1,r=!1,s=0;t.sharing_info&&(o=t.sharing_info.read_only||!!t.sharing_info.no_access,r=!!t.sharing_info.no_access,void 0!==t.sharing_info.shared_folder_id&&(s=parseInt(t.sharing_info.shared_folder_id,10))),n.push({path:t.path_display||"",has_subdirs:e.has_subfolders||!1,icon:t.icon||"",read_only:o||!1,contained_ns:e.contained_ns||0,target_ns:s,no_access:r,is_encrypted:void 0!==t.is_encrypted&&t.is_encrypted})})),n}catch(e){const o=t.filterApiError(e);throw n.reportException({err:(null===(i=null==o?void 0:o.raw)||void 0===i?void 0:i.responseBody)?new Error(o.raw.responseBody):e,severity:"non-critical",tags:["js:browse"]}),e}},e.getFolderContentsWithCache=function(e,t){return(!a[t]||Date.now()-a[t].timestamp>3e3)&&(a[t]={folderContents:d(e,t),timestamp:Date.now()}),a[t].folderContents},e.getFolderSuggestion=function(e,o,n){return function(e){return e.ns("ml")}(new t.DefaultUserApiV2Client(e)).rpc("get_folder_suggestion",{paths:o,action:n},{})}}));
//# sourceMappingURL=c_folder_dialog_api.js-vfl7Jswsj.map

//# debugId=3edab5f9-2387-3709-bd70-50212f5859e4