!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="927eed14-63bd-39f0-95ed-867bf603d4d4")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./e_ui_page_files_router","./c_trial-plan-card_components_header","./c_trial-cards_trial-plan-card","./c_pap-events_replay_shown_modal","./e_data_modules_stormcrow"],(function(e,a,t,i,l,r,o,n,s){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}var u=d(t);const c=i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),g=i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),v=i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),f=e=>i.intl.formatMessage({id:"oZoBRB",defaultMessage:"Get {planSize}"},{planSize:e}),m=i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"}),p=i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),_=(e,a)=>i.intl.formatMessage({id:"Ju0e9k",defaultMessage:"You're using <b>{usedBytes} of {quotaBytes}</b> of your free Dropbox storage space. Upgrade to a plan that scales with your work—or your over-quota files may be deleted."},{usedBytes:e,quotaBytes:a,b:e=>u.default.createElement("strong",null,e)}),M=i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),y=i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),C=i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),h=e=>i.intl.formatMessage({id:"QRtV/H",defaultMessage:"<b>Sharing will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>u.default.createElement("strong",null,e)}),b=i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>u.default.createElement("strong",null,e)}),w=i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),S=e=>i.intl.formatMessage({id:"+CKpIi",defaultMessage:"Upgrade to view {fileName}"},{fileName:e}),I=e=>i.intl.formatMessage({id:"8t0sN4",defaultMessage:"<b>Preview will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>u.default.createElement("strong",null,e)}),P=i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>u.default.createElement("strong",null,e)}),E=i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),U=i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),T=i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"});const A=i.intl.formatMessage({id:"Z6zJXZ",defaultMessage:"Show all plans"}),L=i.intl.formatMessage({id:"YvYJx0",defaultMessage:"Your special savings"}),D=i.intl.formatMessage({id:"5kkHg1",defaultMessage:"Redeem offer"});i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>u.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>u.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});const V=i.intl.formatMessage({id:"aRx2b4",defaultMessage:"Get more storage to upload your file(s)"}),x=i.intl.formatMessage({id:"VPYpFU",defaultMessage:"Uploading the selected file(s) would put you over your storage limit."}),k=i.intl.formatMessage({id:"EcxI0t",defaultMessage:"Compare plans"}),N="portable-checkout-modal";var O;a.ViewMode=void 0,(O=a.ViewMode||(a.ViewMode={})).Sharing="SHARING",O.Preview="PREVIEW",O.UploadOrCreate="UPLOAD_OR_CREATE",O.UploadNearQuota="UPLOAD_NEAR_QUOTA";const R=e=>{throw new Error(`Unhandled value: ${e}`)};function B(e){if(null==e)return"";const a=new Date(1e3*e);return i.intl.formatDate(a,{year:"numeric",month:"long",day:"numeric"})}const F=l.createDefaultApiv2QueryFn(l.GetSpaceUpsellsRoutes,"get_plans"),G=l.createApiv2Query({nsClient:l.GetSpaceUpsellsRoutes,rpc:"get_plans",queryFn:(...e)=>(...a)=>l.reportExceptionIfRequestFails((async()=>await F(...e)(...a)),["get_plans"])});a.COMPARE_PLANS=k,a.DOWNLOAD_FILE=p,a.MANAGE_FILES=g,a.OVER_QUOTA_DELETION_WARNING=_,a.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP=706,a.PORTABLE_CHECKOUT_MODAL_ID=N,a.PREVIEW_TITLE=S,a.SHARING_ENFORCE_RESTRICTIONS=w,a.SHARING_RESTRICTION_WARNING=h,a.SHARING_RESTRICTION_WARNING_NO_DATE=b,a.UPGRADE=c,a.VIEW_PLANS=m,a.WARNING_BADGE=M,a.getAutoLayoutModalProps=function({viewMode:e,isMobileView:t,fileName:s,quotaUpsellInfo:d,warningMode:c,usedLessThanPlusQuota:M,filePreview:k,planContent:N,quotaUsedBytes:O,quotaAllocatedBytes:F,shouldUseSmallSkus:G,onViewPlansClick:H,onCloseClick:q,onDownloadFileClick:W,onManageFilesClick:z,onGetPlanClick:Q}){const Y=function(e,t){switch(e){case a.ViewMode.Sharing:return C;case a.ViewMode.Preview:return S(t||"");case a.ViewMode.UploadOrCreate:return U;case a.ViewMode.UploadNearQuota:return V;default:return R(e)}}(e,s),K=function(e,t){var i;const l=null===(i=null==t?void 0:t.restrictions)||void 0===i?void 0:i.restrictions_start_time_utc_seconds;switch(e){case a.ViewMode.Sharing:return l?h(B(l)):b;case a.ViewMode.Preview:return l?I(B(l)):P;case a.ViewMode.UploadOrCreate:return T;case a.ViewMode.UploadNearQuota:return x;default:return R(e)}}(e,d),Z=function(e){switch(e){case a.ViewMode.Sharing:return w;case a.ViewMode.Preview:return E;case a.ViewMode.UploadOrCreate:return T;case a.ViewMode.UploadNearQuota:return x;default:return R(e)}}(e),J=void 0!==W&&e===a.ViewMode.Preview&&!c&&(!t||t&&!M),X={title:Y,bannerOptions:{type:c?"warning":"alert",text:c?K:Z,ctaText:J?p:void 0,ctaOnClick:J?W:void 0},firstChild:u.default.createElement(u.default.Fragment,null),primaryCtaText:G?A:m,primaryCtaOnClick:H,showCloseButton:c||t,onCloseButtonClick:e=>q(e),width:706,minWidth:706,maxWidth:1200};if(M&&N){const i=function(e,a,t,i,r,o,n){var s,d,u,c,f,m,p;const _={heading:null===(s=null==e?void 0:e.INDIVIDUAL)||void 0===s?void 0:s.advertised_space_short_gb_rounded,productFamily:(null===(d=null==e?void 0:e.INDIVIDUAL)||void 0===d?void 0:d.display_name)||"",eyebrow:n?(null===(u=null==e?void 0:e.INDIVIDUAL)||void 0===u?void 0:u.dropbox_brand_name)+" "+(null===(c=null==e?void 0:e.INDIVIDUAL)||void 0===c?void 0:c.display_name):null===(f=null==e?void 0:e.INDIVIDUAL)||void 0===f?void 0:f.display_name,eyebrowSubtle:!0,primaryCtaText:g,primaryOnClick:o,bulletsHeader:n||a?void 0:v,boldHeading:!0,fillMode:"outline",cardSizeVariant:"narrow-full-height",bullets:a?[]:[[l.CheckmarkLine,(null===(p=null===(m=null==e?void 0:e.INDIVIDUAL)||void 0===m?void 0:m.features)||void 0===p?void 0:p[0])||""]],alternativeToPricingSectionText:y,alternativeToPricingSectionTextSize:n?"medium":"large",stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a};return t||(_.quotaIndicatorInfo={usedBytes:i,quotaBytes:r,subtextVerbForm:"imperative",meterColor:"red",textSize:"small"}),_}(N,t,c,O,F,z,G),s=function(e,a,t,i,o,s){var d,u,c,g,m,p,_,M,y,C,h,b,w,S,I,P,E,U,T,A,V,x,k,N,O,R,B;let F;if(s){const s={planSelectorName:l.PlanTypes.basicPlus500GB,monthlyBillingByMonth:(null===(d=null==e?void 0:e.BASIC500)||void 0===d?void 0:d.monthly_billing_by_month)||"",annualBillingByMonth:(null===(u=null==e?void 0:e.BASIC500)||void 0===u?void 0:u.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(c=null==e?void 0:e.BASIC500)||void 0===c?void 0:c.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(g=null==e?void 0:e.BASIC500)||void 0===g?void 0:g.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};F={productFamily:(null===(m=null==e?void 0:e.BASIC500)||void 0===m?void 0:m.display_name)||"",heading:(null===(p=null==e?void 0:e.BASIC500)||void 0===p?void 0:p.advertised_space_short_gb_rounded)||"",eyebrow:(null===(_=null==e?void 0:e.BASIC500)||void 0===_?void 0:_.display_name)||"",eyebrowSubtle:!0,primaryCtaText:D,primaryOnClick:o,bulletsHeader:void 0,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:{...s,priceTextSize:"medium"},bullets:[[l.CheckmarkLine,(null===(y=null===(M=null==e?void 0:e.BASIC500)||void 0===M?void 0:M.features)||void 0===y?void 0:y[0])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,isRecommended:!0,recommendationVariant:r.TrialCardRecommendationVariants.PILL,recommendationIcon:l.UpsellFill,recommendedText:L,allowHorizontalExpansion:!a},t||(F.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(C=null==e?void 0:e.BASIC500)||void 0===C?void 0:C.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(h=null==e?void 0:e.BASIC500)||void 0===h?void 0:h.advertised_space_short_gb_rounded)||"",textSize:"small"})}else{const r={planSelectorName:l.PlanTypes.plus,monthlyBillingByMonth:(null===(b=null==e?void 0:e.PLUS)||void 0===b?void 0:b.monthly_billing_by_month)||"",annualBillingByMonth:(null===(w=null==e?void 0:e.PLUS)||void 0===w?void 0:w.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(S=null==e?void 0:e.PLUS)||void 0===S?void 0:S.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(I=null==e?void 0:e.PLUS)||void 0===I?void 0:I.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};F={productFamily:(null===(P=null==e?void 0:e.PLUS)||void 0===P?void 0:P.display_name)||"",heading:(null===(E=null==e?void 0:e.PLUS)||void 0===E?void 0:E.advertised_space_short_gb_rounded)||"",eyebrow:(null===(U=null==e?void 0:e.PLUS)||void 0===U?void 0:U.display_name)||"",eyebrowSubtle:!0,primaryCtaText:f((null===(T=null==e?void 0:e.PLUS)||void 0===T?void 0:T.advertised_space_short_gb_rounded)||""),primaryOnClick:o,bulletsHeader:v,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:r,bullets:[[l.CheckmarkLine,(null===(V=null===(A=null==e?void 0:e.PLUS)||void 0===A?void 0:A.features)||void 0===V?void 0:V[0])||""],[l.CheckmarkLine,(null===(k=null===(x=null==e?void 0:e.PLUS)||void 0===x?void 0:x.features)||void 0===k?void 0:k[1])||""],[l.CheckmarkLine,(null===(O=null===(N=null==e?void 0:e.PLUS)||void 0===N?void 0:N.features)||void 0===O?void 0:O[2])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a},t||(F.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(R=null==e?void 0:e.PLUS)||void 0===R?void 0:R.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(B=null==e?void 0:e.PLUS)||void 0===B?void 0:B.advertised_space_short_gb_rounded)||"",textSize:"small"})}return F}(N,t,c,O,Q,G);t?(X.firstChild=u.default.createElement(o.TrialPlanCard,{...s}),X.secondChild=u.default.createElement(o.TrialPlanCard,{...i})):(X.firstChild=u.default.createElement(o.TrialPlanCard,{...i}),X.secondChild=u.default.createElement(o.TrialPlanCard,{...s})),X.centerMobileView=!0,e!==a.ViewMode.Preview||c?X.primaryCtaProps=t?{variant:"transparent"}:{variant:"outline"}:t?(X.primaryCtaProps={variant:"opacity",size:"xlarge",fullWidth:!0,style:{maxWidth:"384px"}},void 0!==W&&(X.secondaryCtaProps={variant:"transparent",size:"large"},X.secondaryCtaText=p,X.secondaryCtaOnClick=W)):(X.firstChild=k,X.secondChild=u.default.createElement(o.TrialPlanCard,{...s}),X.primaryCtaProps={variant:"outline"},X.secondaryCtaText=g,X.secondaryCtaOnClick=z,X.secondaryCtaProps={variant:"transparent"})}else X.firstChild=u.default.createElement(l.Text,null,_(l.format_bytes$1(i.intl,O),l.format_bytes$1(i.intl,F))),X.secondaryCtaText=g,X.secondaryCtaOnClick=z,X.primaryCtaProps={variant:"primary"};return X},a.getPlansRequestPackage=G,a.getRestrictionsDateString=B,a.getViewMode=function(e){switch(e){case"share_modal":case"share_link":case"share_add_people":case"transfer":case"photos_copy_link":case"share_qr_code":case"shared_page_create_shared_folder":return a.ViewMode.Sharing;case"file_viewer":case"quick_view":case"standalone_preview":return a.ViewMode.Preview;case"upload":case"create":case"upload_menu_action_bar":return a.ViewMode.UploadOrCreate;default:return R(e)}},a.openPortableCheckoutModal=a=>{new Promise((function(a,t){e(["./e_ui_page_files_router"],a,t)})).then((function(e){return e.portable_checkout_frame_esnext})).then((async({PortableCheckoutModal:e})=>{l.mountModal(u.default.createElement(i.Provider,{value:i.intl},u.default.createElement(s.QueryClientProvider,{client:l.queryClient},u.default.createElement(e,{...a}))),void 0,N)}))},a.useGetPlans=({planNames:e,revenueContentLocation:a,locale:t=n.getPageLocale(),countryOverride:i=n.getCountryOverride(),enabled:r=!0})=>{var o;const s=a,{isError:d,data:c,isLoading:g,error:v}=G.useQuery({apiArg:{plan_names:e,revenue_content_location:s,locale:t,country_override:i}},{enabled:r});return u.default.useEffect((()=>{var e,t;d?l.UDCL.logEvent("get_plans",{tags:{status:"failed",location:a,errorMessage:(null===(e=null==v?void 0:v.apiError)||void 0===e?void 0:e.summary)||"unknown error"}}):!g&&(null==c?void 0:c.apiData)&&(null===(t=c.apiData)||void 0===t?void 0:t.plans)&&Object.keys(c.apiData.plans).length&&l.UDCL.logEvent("get_plans",{tags:{status:"success",location:a}})}),[c,v,d,a,g]),{plansInfo:null===(o=null==c?void 0:c.apiData)||void 0===o?void 0:o.plans,isLoadingPlansInfo:g,plansInfoError:v}}}));
//# sourceMappingURL=c_over-quota_utils_use_get_plans.js-vfl_84E6u.map

//# debugId=927eed14-63bd-39f0-95ed-867bf603d4d4