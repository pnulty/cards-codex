!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f0ac8127-d08d-3aed-991e-56f8d4aa0804")}catch(e){}}();
define(["exports","./e_ui_page_files_router","./c_pap-events_replay_shown_modal","./e_edison","./c_bem","./c_file_transfers_lib_urls","./e_data_modules_stormcrow","./c_action_bar_action_bar_constants","./c_core_i18n","./c_fileops_downloads","./c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_pap-events_share_copy_shared_link"],(function(e,r,a,n,i,o,t,s,l,d,f,c){"use strict";var T,S,g,u,_,F,m,p,E,C,L,O;function h(e){return r=>function(e){return e.value?e.value[".tag"]:"other"}(r)===e}e.UserFlow=void 0,(T=e.UserFlow||(e.UserFlow={})).TRANSFER_MANAGEMENT_MODAL="transfer_management_modal",T.MANAGEMENT_LIST_VIEW="management_list_view",T.CREATION="creation",T.RECIPIENT="recipient",T.BROWSE="browse",T.TRANSFER_CREATION_MODAL="transfer_creation_modal",e.ModalVisibilityChange=void 0,(S=e.ModalVisibilityChange||(e.ModalVisibilityChange={})).OPEN="open",S.CANCEL="cancel",S.OK="ok",e.SettingsVisibilityChange=void 0,(g=e.SettingsVisibilityChange||(e.SettingsVisibilityChange={})).OPEN="open",g.CLOSE="close",e.TransferListView=void 0,(u=e.TransferListView||(e.TransferListView={}))[u.Active=0]="Active",u[u.Expired=1]="Expired",u[u.All=2]="All",e.Actions=void 0,(_=e.Actions||(e.Actions={})).ChangeSettingsModalState="FileTransfers/ChangeSettingsModalState",_.ChangeConfirmTransferDeletionModalState="FileTransfers/ChangeConfirmTransferDeletionModalState",_.LogCopyTransferLink="FileTransfers/LogCopyTransferLink",_.DeleteTransferSummary="FileTransfers/DeleteTransferSummary",_.ExpireTransferSummary="FileTransfers/ExpireTransferSummary",_.ReactivateTransferSummary="FileTransfers/ReactivateTransferSummary",_.FinishedEditing="FileTransfers/FinishedEditing",_.HideOnboardingStep="FileTransfers/HideOnboardingStep",_.InitApp="FileTransfers/InitApp",_.LogAllItemsUploaded="FileTransfers/LogAllItemsUploaded",_.LogAutoDownload="FileTransfers/LogAutoDownload",_.LogOnboarding="FileTransfers/LogOnboarding",_.LogEmailFeedback="FileTransfers/LogEmailFeedback",_.LogUpsell="FileTransfers/LogUpsell",_.MarkOnboardingStepComplete="FileTransfers/MarkOnboardingStepComplete",_.MarkServerRestrictedFiles="FileTransfers/MarkServerRestrictedFiles",_.MetadataUpdated="FileTransfers/MetadataUpdated",_.SendTransferViaEmail="FileTransfers/SendTransferViaEmail",_.ReceivedTransferRowClick="FileTransfers/ReceivedTransferRowClick",_.TransferManagementTabClick="FileTransfers/TransferManagementTabClick",_.SetActiveUserId="FileTransfers/SetActiveUserId",_.SetBackground="FileTransfers/SetBackground",_.SetBackgroundPreview="FileTransfers/SetBackroundPreview",_.SetLogo="FileTransfers/SetLogo",_.SaveLogo="FileTransfers/SaveLogo",_.SetCurrentTransfer="FileTransfers/SetCurrentTransfer",_.SetExpiration="FileTransfers/SetExpiration",_.SetIsShared="FileTransfers/SetShareStatus",_.SetIsShareComplete="FileTransfer/SetShareComplete",_.ChangeManagementModalState="FileTransfers/ChangeManagementModalState",_.SetProductConfig="FileTransfers/SetProductConfig",_.SetRecipients="FileTransfers/SetRecipients",_.SetShareUrl="FileTransfers/SetShareUrl",_.SetFileTransfersUserMetadata="FileTransfers/SetFileTransfersUserMetadata",_.UpdateTransferSummaries="FileTransfers/UpdateTransferSummaries",_.UpdateReceivedTransferSummaries="FileTransfers/UpdateReceivedTransferSummaries",_.ViewFeedbackForm="FileTransfers/ViewFeedbackForm",_.TemporarilySaveEmailFormInfo="FileTransfers/TemporarilySaveEmailFormInfo",_.ClearSavedEmailFormInfo="FileTransfers/ClearSavedEmailFormInfo",_.LogInternetDisconnected="FileTransfers/LogInternetDisconnected",_.LogOnboardingStepShown="FileTransfers/LogOnboardingStepShown",_.MarkOnboardingStepShown="FileTransfers/MarkOnboardingStepShown",_.LogShareError="FileTransfers/LogShareError",_.UpdateSettingsFromManagementModal="FileTransfers/UpdateSettingsFromManagementModal",_.LogSettingsClicked="LogSettingsClicked",_.RemoveReceivedTransferFromList="FileTransfers/RemoveReceivedTransferFromList",_.LogRemoveReceivedTransferClicked="FileTransfers/LogRemoveReceivedTransferClicked",_.LogViewReplayFileTransferPrompt="FileTransfers/ViewReplayFileTransferPrompt",_.LogClickReplayFileTransferPrompt="FileTransfers/ClickReplayFileTransferPrompt",_.LogClickDownloadSUSIFooter="FileTransfers/LogClickDownloadSUSIFooter",_.LogHeadlessBrowserDetected="FileTransfers/LogHeadlessBrowserDetected",e.UploadStatus=void 0,(F=e.UploadStatus||(e.UploadStatus={}))[F.Waiting=0]="Waiting",F[F.Uploading=1]="Uploading",F[F.Success=2]="Success",F[F.Error=3]="Error",function(e){e.Dropbox="dropbox",e.Computer="computer",e.Transfer="transfer"}(m||(m={})),e.OriginalFileSource=void 0,(p=e.OriginalFileSource||(e.OriginalFileSource={})).Dropbox="dropbox",p.Computer="computer",p.Unknown="unknown",function(e){e.DRAG_DROP="drag_drop",e.DROPBOX_CHOOSER_ADDITIONAL="dropbox_chooser_additional",e.DROPBOX_CHOOSER_INITIAL="dropbox_chooser_initial",e.UPLOAD_BUTTON_ADDITIONAL="upload_button_additional",e.UPLOAD_BUTTON_INITIAL="upload_button_initial",e.DESKTOP_CONTEXT_MENU="desktop_context_menu",e.PAGELET_ON_LOAD="pagelet_on_load",e.TRANSFER_CREATION_MODAL_ON_LOAD="transfer_creation_modal_on_load"}(E||(E={})),function(e){e.EmptyFile="empty_file",e.IgnoredFile="ignored_file",e.OverMaxFileSize="over_max_file_size",e.PointerFile="pointer_file",e.TemporaryFile="temporary_file",e.InvalidChar="invalid_char",e.TimeOut="time_out",e.NotFound="not_found",e.NoPermission="no_permission",e.Restricted="restricted",e.InvalidArgs="invalid_args",e.Unknown="unknown"}(C||(C={})),function(e){e.CancelButton="cancel_button",e.WindowClose="window_close"}(L||(L={})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DOWNLOADING=1]="DOWNLOADING",e[e.ERROR=2]="ERROR",e[e.PAUSED=3]="PAUSED",e[e.FETCHING_TOKENS=4]="FETCHING_TOKENS",e[e.CANCELED=5]="CANCELED",e[e.COMPLETED=6]="COMPLETED"}(O||(O={}));const A=h("image"),R=h("video");e.folderEligibleForTransfer=e=>!r.File.isNoAccessSharedFolder(e),e.getLocalStorageBooleanValueForKey=function(e){const r=localStorage.getItem(e);return null===r?null:"true"===r},e.getTransferFilesKey=function(e){return e||o.NULL_FILE_TRANSFER_KEY},e.isAtRoot=function(e){return null===function(e){let r;if("dest"in e)r=e.dest;else if("fullPath"in e){if(!e.fullPath)return null;r=e.fullPath,"/"===r.charAt(0)&&(r=e.fullPath.substring(1))}else{if(!("path"in e))throw new Error("file must be either PluploadFile, StateFileInfo, or FileSystemEntry");if(!e.path)return null;r=e.path}const a=r.split("/");if(a.length<=1)return null;return a[0]}(e)},e.isColorBackground=function(e){return!!e.color_hex&&!e.asset},e.isImageBackground=function(e){return!!e.asset&&A(e.asset)},e.isVideoBackground=function(e){return!!e.asset&&R(e.asset)},e.redirectToCreateTransferWithFiles=(e,a)=>{f.showOQModalOrContinue({action:"transfer",continueCallback:function(){const n=o.prepareFileIdsParam(e);r.Snackbar.sync(l.intl.formatMessage({id:"EmOY+w",defaultMessage:"Creating new transfer..."}),!1,"create-transfer"),r.redirect(o.createTransferUrlWithParams({referrer:a,fileids:n}))},abortCallback:()=>{}})},e.setLocalStorageValueForKey=function(e,r){localStorage.setItem(e,r.toString())},e.shouldShowTransferInSplitShare=(e,a)=>e&&a.length>0&&!a.some((e=>e.is_cloud_doc))&&!a.some(r.File.isNoAccessSharedFolder)}));
//# sourceMappingURL=c_file_transfers_lib_utils.js-vflFAo1El.map

//# debugId=f0ac8127-d08d-3aed-991e-56f8d4aa0804