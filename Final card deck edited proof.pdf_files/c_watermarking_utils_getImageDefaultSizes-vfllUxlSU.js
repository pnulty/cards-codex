!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="987b69c6-918c-3623-9f65-4c1fbc830a55")}catch(e){}}();
define(["exports"],(function(t){"use strict";const a=t=>t/180*Math.PI,e=({image:t,scale:e,opacity:n,angle:i})=>{const h=a(i),o=document.createElement("canvas"),s=o.getContext("2d");if(!s)throw new Error("Cannot draw on canvas");const c=t.width*e,r=t.height*e;o.width=Math.round(Math.abs(c*Math.cos(h))+Math.abs(r*Math.sin(h))),o.height=Math.round(Math.abs(c*Math.sin(h))+Math.abs(r*Math.cos(h)));let l=0,d=0;return i<90?d=c*Math.sin(h):i<180?(l=-c*Math.cos(h),d=c*Math.sin(h)-r*Math.cos(h)):i<270?(l=-c*Math.cos(h)-r*Math.sin(h),d=-r*Math.cos(h)):l=-r*Math.sin(h),s.globalAlpha=n,s.translate(l,d),s.rotate(-h),s.drawImage(t,0,0,c,r),{canvas:o,actualUnrotatedHeight:r,actualUnrotatedWidth:c}},n=(t,a,e,n,i=!1)=>{t.save(),t.font=`${e}px ${n}`;const h=t.measureText(a);return t.restore(),i?{width:h.width,height:h.actualBoundingBoxAscent+h.actualBoundingBoxDescent||e}:{width:h.width,height:h.fontBoundingBoxAscent+h.fontBoundingBoxDescent||e}},i=({text:t,size:e,fontFamily:i,color:h,opacity:o,angle:s})=>{const c=a(s),r=document.createElement("canvas"),l=r.getContext("2d");if(!l)throw new Error("Cannot draw on canvas");const{width:d,height:g}=n(l,t,e,i);r.width=Math.abs(d*Math.cos(c))+Math.abs(g*Math.sin(c)),r.height=Math.abs(d*Math.sin(c))+Math.abs(g*Math.cos(c));let M="#000";"light"===h&&(M="#fff"),l.font=`${e}px ${i}`,l.globalAlpha=o,l.fillStyle=M,l.textBaseline="bottom";let u=0,m=r.height;s<90?u=g*Math.sin(c):s<180?(u=g*Math.sin(c)-d*Math.cos(c),m+=g*Math.cos(c)):s<270?(u=-d*Math.cos(c),m=0):m+=d*Math.sin(c),l.translate(u,m),l.rotate(-c),l.fillText(t,0,0);const{width:f,height:w}=n(l,t,e,i,!0);return{canvas:r,actualUnrotatedHeight:w,actualUnrotatedWidth:f}},h={size:1,minSize:.2,maxSize:5};t.drawImageTile=e,t.drawTextTile=i,t.getImageDefaultSizes=function(t,a){if(!t||!a)return h;const e=t.width/a.width,n=t.height/a.height,i=Math.max(e,n);if(i*h.maxSize<=.9)return h;const o=.9/i;return{size:o/5,minSize:o/25,maxSize:o}},t.tilingFunc=({scale:t,mode:n,imageWatermarkOptions:h,textWatermarkOptions:o})=>{let s=o;"image"===n&&(s=h);const{angle:c}=s,r=a(c)%(Math.PI/2);let l,d,g;if("text"===n){const{text:a,size:e,fontFamily:n,color:h,opacity:s}=o,r=i({text:a,size:e*t,fontFamily:n,color:h,opacity:s,angle:c});l=r.canvas,d=r.actualUnrotatedHeight,g=r.actualUnrotatedWidth}else{const{image:a,size:n,opacity:i}=h;if(!a)throw new Error("NO_TILE_INPUT");const o=e({image:a,scale:n*t,opacity:i,angle:c});l=o.canvas,d=o.actualUnrotatedHeight,g=o.actualUnrotatedWidth}const M=Math.max(d,g);let u=M/2,m=M/2;"text"===n&&(u=2*d,m=o.lineHeight*d);const f=g+u,w=d+m;let x=0,p=0,z=0;return c%180==0?(x=f,p=w,z=u/-1.2):c%180==90?(x=w,p=f):c>0&&c<90||c>180&&c<270?(x=w/Math.sin(r),p=f*Math.sin(r),z=-f*Math.cos(r)):(c>90&&c<180||c>270&&c<360)&&(x=w/Math.cos(r),p=f*Math.cos(r),z=f*Math.sin(r)),{canvas:l,width:l.width,height:l.height,distanceX:x,distanceY:p,startX:-l.width/2,startY:-l.height/2,offsetXPerRow:z,offsetYPerCol:0}}}));
//# sourceMappingURL=c_watermarking_utils_getImageDefaultSizes.js-vflGgD_o1.map

//# debugId=987b69c6-918c-3623-9f65-4c1fbc830a55