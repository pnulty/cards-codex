!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="23cebda0-6c3a-3e8d-ac5b-dd881833f3d9")}catch(e){}}();
define(["exports","react","./e_ui_page_files_router","./c_core_i18n","./c_google_one_tap_google_one_tap_platform","./c_react_query_helpers_queries_upload_info","./c_flows_conversions_conversion_actions","./c_conversions_actions_unzip","./c_flows_utils_auto_folder_helpers","./c_lodash-es_lodash","./c_file_viewer_api_data"],(function(e,t,n,i,o,r,l,a,s,c,u){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}var d=_(t);const f=(e,t,l)=>d.default.createElement(n.Menu.Segment,null,e.map((e=>{const a=t.bytes/Math.pow(1024,2),c=s.getConversionFileSizeLimitMB([n.file_extension(n.getFilename(t))],e.actionText),u=a>c,_=i.intl.formatMessage({id:"0vePbC",defaultMessage:"File is larger than the {fileSizeLimitMB}MB limit"},{fileSizeLimitMB:c}),f=d.default.createElement(n.Menu.ActionItem,{key:e.actionText,disabled:u,value:{handler:()=>(({file:e,user:t,action:i,encryptionOptions:l,logUserAction:a,context:s,shareToken:c,actionSurface:u="",sharedLinkInfo:_,sharePermissions:d,previewSurface:f})=>{if(a(n.UserAction.SelectSaveAs,s,{conversion_type:i.actionText,actionSurface:u}),t)i.convert([e],t,{shareToken:c,source:"preview"});else{const e=new URL(window.location.href);e.searchParams.set("save_as","true"),e.searchParams.set("save_as_action",i.actionText),window.history.replaceState(e.href,"",e.href),r.showAuthModal({mode:n.Mode.REGISTER,sharedLinkUrl:e.href,kind:n.LoginOrRegisterKind.POSTSAVEAS,encryptionOptions:l,loggingExtra:{signup_source:"save_as"},signupTag:o.RegistrationSource.SHMODEL_SAVE_AS_REGISTER,webSignInTag:n.getWebSignInTag(!1,f,d),authDialogPreviousElement:n.AuthDialogPreviousElementTag.SAVE_AS,sharedLinkInfo:_})}})({...l,action:e})},withLeftAccessory:d.default.createElement(n.UIIcon,{src:e.actionIcon,width:"20px",height:"20px"})},e.actionText);return u?d.default.createElement(n.Tooltip,{key:e.actionText,title:_,placement:"left",id:"flows-disabled-menu-item-tooltip"},d.default.createElement("div",null,f)):f})));e.FileConversionMenuSegment=e=>{const{conversionActions:t,file:n}=e,i=t.filter((e=>e.actionGroup===l.ConversionActionGroup.VIDEO_SCALE)),o=t.filter((e=>e.actionGroup!==l.ConversionActionGroup.VIDEO_SCALE)),r=o.length>0?f(o,n,e):null,a=i.length>0?f(i,n,e):null;return d.default.createElement(d.default.Fragment,null,r,a)},e.getConversionActions=function({getActiveFile:e,user:t},i){const{file:o,sharedLinkInfo:r,sharePermission:s}=e();return a.canConvertFile(o,s)&&n.canDownloadFile(r,s)?l.getConversionActionsForFiles(t,[o],{},i):[]},e.usePrintCallback=()=>{const{optionalIOClients:{printClient:e}}=n.useFileViewerContext(),t=function(){var e,t,n;const i=u.useRootPreviewMetadata();if(!i)return"";const{content:o}=i;return"image"===(null==o?void 0:o[".tag"])?null!==(e=null==o?void 0:o.full_size_src)&&void 0!==e?e:"":"ssr_doc"===(null==o?void 0:o[".tag"])?null!==(t=null==o?void 0:o.autoprint_url)&&void 0!==t?t:"":"text"===(null==o?void 0:o[".tag"])&&null!==(n=null==o?void 0:o.extracted_text)&&void 0!==n?n:""}(),i=u.useRootPreviewType();return d.default.useMemo((()=>()=>{t&&(null==e||e.print(t,i))}),[i,e,t])}}));
//# sourceMappingURL=c_file_viewer_api_clients.js-vfl-p-ZuQ.map

//# debugId=23cebda0-6c3a-3e8d-ac5b-dd881833f3d9