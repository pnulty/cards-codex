!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f177a77c-2c7d-3cc1-974b-9044fffd46c2")}catch(e){}}();
define(["require","exports","./c_action_bar_action_bar_constants","./c_bem"],(function(e,n,t,r){"use strict";function a(e){return btoa(e).replace(/\//g,"_").replace(/\+/g,"-")}function o(e){return String.fromCharCode(...new Uint8Array(e))}function c(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}async function i(){const n=t.edge&&!t.edgeChromium();if(void 0!==window.crypto.subtle&&!n&&!t.checkBrowserVersion(t.chrome,40,!1))return window.crypto;if(n){const{legacyEdgeWrapper:n}=await new Promise((function(n,t){e(["./c_security_legacy_edge_shim"],n,t)})),t=n();if(void 0!==t)return t}throw function(e){const n=new Error(e);return n.isBrowserNotSupported=!0,n}("WebCrypto not supported")}async function s(e,n){const t=await i(),r=await t.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),a=await t.subtle.sign({name:"HMAC"},r,n);return new Uint8Array(a)}async function u(e){const n=c(e),t=r.readCsrfToken();if(""===t||null===t)throw new Error("Missing CSRF token");const a=c(t),i=await s(a,n);return btoa(o(i))}n.addHeaderRedirectToken=async function(e){return await async function(e,n,t){const a=r.URI.parse(e),o=await u(encodeURIComponent(t));return a.updateQuery({[n]:o}),a.toString()}(e,"rtoken","header_redirect")},n.b64urldecode=function(e){return c(atob(e.replace(/_/g,"/").replace(/-/g,"+")))},n.b64urlencode=function(e){return a(o(e))},n.b64urlencodeString=a,n.b64urlencodeStringUnpadded=function(e){return btoa(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")},n.bytesToString=o,n.csrfHmacUrltoken=u,n.dec2hex=e=>("0"+e.toString(16)).substr(-2),n.encryptWithPublicKey=async function(e,n,t){return i().then((async r=>{const a=r.getRandomValues(new Uint8Array(12)),o=await r.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"]),c=await r.subtle.encrypt({name:"AES-GCM",iv:a},o,n),i=await r.subtle.exportKey("raw",o),s=await r.subtle.importKey("spki",e,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),u=await r.subtle.encrypt({name:"RSA-OAEP"},s,i),l=new ArrayBuffer(2);return new DataView(l).setInt16(0,t),function(...e){let n=0;for(const t of e)n+=t.byteLength;const t=new Uint8Array(n);let r=0;for(const n of e){const e=new Uint8Array(n);t.set(e,r),r+=n.byteLength}return t}(l,u,a,c)}))},n.getRandomValues=async function(e){return(await i()).getRandomValues(e),e},n.hashSHA256=async function(e){const n=await i(),t=await n.subtle.digest("SHA-256",e);return new Uint8Array(t)},n.hmacMessage=s,n.readHmacCookieToken=async function(e,n){const t=e.split(":");if(3!==t.length)return null;const[a,o,s]=t;if("1"!==a)return null;const u=(new TextEncoder).encode(o);let l=decodeURIComponent(s);try{l=atob(l)}catch{return null}const d=c(l),w=null!=n?n:r.readCsrfToken();if(!w)return null;const y=(new TextEncoder).encode(w);return await async function(e,n,t){const r=await i(),a=await r.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["verify"]);return await r.subtle.verify({name:"HMAC"},a,t,n)}(y,u,d)?decodeURIComponent(o):null},n.stringToBytes=c}));
//# sourceMappingURL=c_security_csrf_hmac.js-vflo-lPwv.map

//# debugId=f177a77c-2c7d-3cc1-974b-9044fffd46c2