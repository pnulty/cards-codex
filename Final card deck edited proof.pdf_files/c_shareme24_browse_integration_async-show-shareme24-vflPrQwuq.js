!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b526a677-9414-3298-be89-0ace6cc705ca")}catch(e){}}();
define(["require","exports","react","./e_ui_page_files_router","./e_data_modules_stormcrow","./e_core_exception","./c_pap-events_folder_modal_select_create_folder_modal_create_button","./c_lib_logging"],(function(e,a,o,n,i,t,r,l){"use strict";function s(e){if(e&&e.__esModule)return e;var a=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(a,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),a.default=e,Object.freeze(a)}var d=s(o);const c=async()=>(await n.loadAfterDisplay((async()=>{const{CopyLinkMiniModal:a}=await new Promise((function(a,o){e(["./c_views_copy_link_mini_modal_copy_link_mini_modal.after-display"],a,o)}));return{default:a.show}}))).default,y=Symbol("ON_ASYNC_SHOW_SHAREME_24"),_=Symbol("ON_EXCLUDE_FALLBACK"),p=Symbol("ON_LOADING_WRAPPER_DETECT_SUCCESS"),u=Symbol("ON_LOADING_WRAPPER_DETECT_FAILURE"),f=Symbol("ON_LOADING_WRAPPER_DETECT_CANCEL"),S=new Map,{defaultEmitter:m}=l.defineLogger((async({event:e})=>{var a,o;if(e.key===y){const i=e.payload.sessionId,t={actionElement:e.payload.actionElement,actionSurface:e.payload.actionSurface,isDir:e.payload.isDir.toString()};return n.UDCL.logStart("ops.sm24.browse_load",{tags:t,key:i}),void n.UDCL.logStart(r.PAP_Load_ShareModal({actionElement:e.payload.actionElement,actionSurface:e.payload.actionSurface,contentAction:"share",sharedObjType:e.payload.sharedObjectType,fileExtension:e.payload.fileExtension,isDir:e.payload.isDir,screen:e.payload.screen,shareModalType:e.payload.shareModalType}),{tags:{...t,isSm24:"sm24"===(null===(a=e.payload.shareModalType)||void 0===a?void 0:a.toString())?"true":"false",screen:(null===(o=e.payload.screen)||void 0===o?void 0:o.toString())||"unspecified"},key:i})}if(e.key!==_){if(e.key===u){if(S.get(e.payload.sessionId))return;return S.set(e.payload.sessionId,!0),void n.UDCL.logEnd("ops.sm24.browse_load",{tags:{actionElement:e.payload.actionElement,actionSurface:e.payload.actionSurface,isDir:e.payload.isDir.toString()},eventState:"failed",key:e.payload.sessionId})}if(e.key===p){if(S.get(e.payload.sessionId))return;return S.set(e.payload.sessionId,!0),void n.UDCL.logEnd("ops.sm24.browse_load",{tags:{actionElement:e.payload.actionElement,actionSurface:e.payload.actionSurface,isDir:e.payload.isDir.toString(),...void 0!==e.payload.isSharingBanned&&{isSharingBanned:e.payload.isSharingBanned.toString()}},eventState:"success",key:e.payload.sessionId})}if(e.key===f){if(S.get(e.payload.sessionId))return;return S.set(e.payload.sessionId,!0),void n.UDCL.logEnd("ops.sm24.browse_load",{tags:{actionElement:e.payload.actionElement,actionSurface:e.payload.actionSurface,isDir:e.payload.isDir.toString()},eventState:"canceled",key:e.payload.sessionId})}return n.exhausts(e,void 0)}n.UDCL.logEvent("ops.sm24.browse_exclude_fallback",{tags:{actionElement:e.payload.actionElement,actionSurface:e.payload.actionSurface}})}));"undefined"==typeof jest&&n.waitForTTI().then((()=>n.loadAfterDisplay((async()=>(await new Promise((function(a,o){e(["./c_shareme24_browse_integration_index.after-display"],a,o)})),{default:null})))));const E="sm24-modal-id",v=n.lazyAfterDisplay((async()=>{const{ShareMe24Browse:a}=await new Promise((function(a,o){e(["./c_shareme24_browse_integration_index.after-display"],a,o)}));return{default:a}})),h=e=>d.createElement(d.Suspense,{fallback:d.createElement(d.Fragment,null)},d.createElement(n.Provider,{store:n.getStoreForBrowse()},d.createElement(i.QueryClientProvider,{client:i.queryClient},d.createElement(v,{isOpen:!0,...e}))));h.displayName="ShareMe24";a.ON_LOADING_WRAPPER_DETECT_CANCEL=f,a.ON_LOADING_WRAPPER_DETECT_FAILURE=u,a.ON_LOADING_WRAPPER_DETECT_SUCCESS=p,a.asyncShowShareMe24=e=>{var a,o;if(n.isWebShortcutByExtension(e.fileOrFolder.ns_path))return void(async e=>{var a;const o=await c(),i=e.actionSurface.toLowerCase().includes("search"),t="anchored"===e.displayType?{anchorRef:e.anchorRef,placement:e.overlayPlacement,isCenteredDisplayed:!1,onHoverLocked:e.onHoverLocked}:{isCenteredDisplayed:!0};o({user:e.user,file:e.fileOrFolder,filePath:e.fileOrFolder.file_id,setIsCreatingSharedLink:(e,a)=>{n.getStoreForBrowse().dispatch({type:i?n.ActionTypes.SET_IS_CREATING_SHARED_LINK:n.ActionTypes$1.SET_IS_CREATING_SHARED_LINK,payload:{fileIdOrPath:a,isCreatingSharedLink:e}})},browseFile:e.fileOrFolder,actionSurface:e.actionSurface,userActionSource:null===(a=e.shareModalExtras)||void 0===a?void 0:a.userActionSource,isFromShareMe24Modal:!0,zIndexOverride:500,isTriggeredAsShareModal:!0,...t})})(e);if(m.select(y).emit({...e,...(o=e.fileOrFolder,{fileExtension:o.ext||void 0,isDir:o.is_dir,sharedObjectType:o.is_dir?o.target_ns?"shared_folder":"folder":"file"}),shareModalType:"sm24",screen:"share_screen"}),!v)return;"anchored"===e.displayType&&(null===(a=e.onHoverLocked)||void 0===a||a.call(e,{isOpen:!0})),n.mountModal(d.createElement(h,{...e,onRequestClose:()=>{var a;"anchored"===e.displayType&&(null===(a=e.onHoverLocked)||void 0===a||a.call(e,{isOpen:!1}),e.focusAnchorRefOnClose&&n.unmountModal(e.anchorRef.current,E)),n.unmountModal(void 0,E)},onFallback:()=>{var a,o,i,r;m.select(_).emit(e),t.reportStack("SM24 Share Modal - falling back to legacy handler",{severity:t.SEVERITY.CRITICAL,tags:["sm24_fallback","shareme24_browse"],exc_extra:{file_id:null!==(o=null===(a=e.fileOrFolder)||void 0===a?void 0:a.file_id)&&void 0!==o?o:"",action_surface:null!==(i=e.actionSurface)&&void 0!==i?i:"",action_element:null!==(r=e.actionElement)&&void 0!==r?r:""}}),e.onFallback(),n.unmountModal(void 0,E)},onActionClicked:(a=!1)=>{var o;"anchored"!==e.displayType||a||null===(o=e.onHoverLocked)||void 0===o||o.call(e,{isOpen:!1}),n.unmountModal(void 0,E)},onInbandShareCompleted:()=>{var a;e.onInbandShareCompleted&&e.onInbandShareCompleted(),"anchored"===e.displayType&&(null===(a=e.onHoverLocked)||void 0===a||a.call(e,{isOpen:!1})),n.unmountModal(void 0,E)}}),void 0,E)},a.defaultEmitter=m,a.getShowCopyLinkMiniModalCallback=c,a.useShowCopyLinkMiniModalCallback=()=>n.useAfterDisplayPassthroughCallback({importer:async()=>new Promise((function(a,o){e(["./c_views_copy_link_mini_modal_copy_link_mini_modal.after-display"],a,o)})).then((({CopyLinkMiniModal:e})=>({default:{fn:e.show}})))})}));
//# sourceMappingURL=c_shareme24_browse_integration_async-show-shareme24.js-vfl5RKNMI.map

//# debugId=b526a677-9414-3298-be89-0ace6cc705ca