!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="aeccf65f-5d3d-39f1-a817-fc2a860254f1")}catch(e){}}();
define(["exports","react","./e_ui_page_files_router","./c_lib_logging","./c_src_bindings_provider","./c_core_i18n","./c_inband-screen_internals_share-modal-share","./c_common_logging-contexts_desktop-platform-logging-metadata","./c_common_components_buttons","./c_react_query_api_helpers_queries_seen_state_info","./c_src_utils_initials","./c_action_bar_action_bar_constants","./c_common_components_layout","./c_sharing_common_utils","react-dom","./e_core_exception","./c_bem","./c_pap-events_replay_shown_modal","./c_ncct_manual_assist_util","./c_core_notify","./e_edison","./c__rollupPluginBabelHelpers","./c_lodash-es_lodash","./e_data_modules_stormcrow","./c_src_sink_index","./c_pap-events_pdf_edit_select_replace_original_confirmation","./c_memoize-one","react/jsx-runtime","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_chat_chat_constants","./c_api-v2-client_src_dropbox","./c_src_bindings_api-context","./c_flux_action_type","./c_react_query_helpers_queries_login_and_register_constants","./c_pap-events_share_copy_shared_link","metaserver/static/js/langpack","./c_dig-components_banner_index","./c_dig-icons_pictogram_icon","./c_dig-icons_assets_ui-icon_line_minus","./c_abuse_fingerprintjs_abuse_fpjs_provider","./c_fingerprintjs_fpjs-pro-static_fp","./c_sharing_settings_utils_link_metadata_types","./c_domain_restriction_utils_date_formatting","./c_continuous_onboarding_milestone_api","./c_sharing_ui_util","./c_pap-events_folder_modal_select_create_folder_modal_create_button","./c_icon_icon_helper","./c_domain_restriction_hooks_use_domain_restriction","./c_sharing_sharing_pap_logging_common_util","./c_sharing_sharing_pap_logging_send_share_invite_util","./c_dig-components_typeahead_index","./c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_quota_use_query_quota_upsell_info","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal","./c_over-quota_utils_use_get_plans","./c_trial-plan-card_components_header","./c_dig-components_combinations_index","./c_dig-components_label_group_index","./c_dig-icons_assets_ui-icon_line_tag","./c_trial-cards_trial-plan-card","./c_dig-components_meter_index","./c_react-hookz_web_useRafCallback","./c_growth-components_over-quota-file-viewer-modal","./c_dig-content-icons_icons_file-generic-large","./c_quota_utils","./c_ui_async_overquota_modal_controller","./c_over-quota_utils_oq_price_decrease_helper","./c_custom_campaigns_out_of_space_modal_out_of_space_checkout_modal_logger","./c_over-quota_utils_logger"],(function(e,t,a,n,r,o,s,c,i,l,_,d,u,m,p,g,f,h,b,E,v,I,C,S,O,y,x,M,j,q,w,P,N,A,R,k,T,F,L,B,D,G,z,H,W,$,U,Y,V,J,K,Q,X,Z,ee,te,ae,ne,re,oe,se,ce,ie,le,_e,de,ue,me,pe,ge){"use strict";function fe(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var he=fe(t);const be=({objectIdentifier:e,onRequestClose:t,onInbandShareCompleted:a,prefillContacts:n})=>{const[r,o]=he.useState((()=>n?n.map((e=>({".tag":"email",email:e}))):[])),[c,i]=he.useState(""),d=he.useCallback((()=>{l.invalidateObjectMembers(e),_.invalidateSharingObjectMetadata(e),_.invalidateNewApiObjectMetadata(e),a()}),[e,a]),u=_.useSharingObjectMetadata(e.fileId),m=s.useSharingPrefs(),p=_.useSharingAccountInfo(),g=u.isLoading,f=m.isLoading,h=p.isLoading;return g||f||h?he.createElement(s.LoadingScreen,null):he.createElement(s.Inband,{oid:e,inviteMessage:c,inviteTargets:r,hasUpdatedAccountMetadata:!1,onCloseClick:t,onTargetsDropdownFocusChange:()=>{},onInviteMessageChange:i,onInviteTargetsChange:o,onShareStart:()=>{},onShareFailure:()=>{},onInbandShareSuccess:d,onStartInband:()=>{},onRefreshObjectMetadata:()=>{},onRefreshModal:()=>{}})};be.displayName="GrantAccessInbandScreen";const Ee=e=>e.formatMessage({id:"azBLeN",defaultMessage:"Close"}),ve=({children:e,objectIdentifier:t})=>{const a=_.useSharingObjectMetadata(t.fileId),o=!a.isLoading&&!a.isError,i=s.useSharingPrefs(),l=!i.isLoading&&!i.isError;return he.createElement(n.ContextProvider,{context:c.Context$2,value:o?a.output:void 0},he.createElement(r.MetadataProvider,{sharingObjectMetadata:o?a.output:void 0,sharingPrefs:l?i.output:void 0,sharingObjectIdentifier:t,shareMe24Metadata:{isShareMe24:!1}},e))};ve.displayName="GrantAccessLoggingMetadataProvider";const Ie=({objectIdentifier:e,fileOrFolder:t,sessionId:n,user:s,actionSurface:c,isOpen:l,onRequestClose:_,onInbandShareCompleted:m,prefillContacts:p})=>{const g=a.getFilename(t),f=()=>{_()},h=()=>he.createElement(he.Fragment,null,he.createElement("div",{className:u.classes.headerSectionTextContainer},he.createElement(a.Text,{size:"medium",isBold:!0,className:u.classes.headerSectionPrimaryText},he.createElement(a.Truncate,{location:.5},o.intl.formatMessage({id:"spRUFl",defaultMessage:"Add people to"}))),he.createElement(a.Text,{size:"small",color:"subtle"},he.createElement(a.Truncate,{location:.5},g))),he.createElement("div",{className:u.classes.headerSectionButtonContainer},he.createElement(i.HeaderIconButton,{onClick:f,variant:"borderless","aria-label":Ee(o.intl),"data-testid":"grant-access-close-button"},he.createElement(a.UIIcon,{src:a.CloseLine})))),b=d.is_mobile_or_tablet();return he.createElement(r.SharingSdkProvider,{userApiProps:s,origin:a.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS,actionInfo:{actionSurface:c}},b?he.createElement(a.Drawer.ModalDrawer,{onRequestClose:f,"aria-label":"grant-access-modal-drawer","data-testid":"grant-access-modal-drawer",isOpen:l,alignment:"bottom",height:"100%",shouldAnimate:!0},he.createElement("div",{className:u.classes.drawerOuterWrapper},he.createElement(a.Drawer.Container,null,he.createElement(a.Drawer.Header,{className:u.classes.drawerHeader},he.createElement(a.Drawer.Layout,null,he.createElement(a.Drawer.LayoutItem,{width:"fill"},he.createElement(a.Drawer.Layout,null,he.createElement(h,null))))),he.createElement(a.Drawer.Body,{className:a.cx(u.classes.modalInnerWrapper,u.classes.drawerBody)},he.createElement("div",{style:{padding:"6px"}},he.createElement(ve,{objectIdentifier:e},he.createElement(be,{objectIdentifier:e,onRequestClose:f,onInbandShareCompleted:m,prefillContacts:p}))))))):he.createElement(a.Modal$1,{width:380,isCentered:!0,open:l,onRequestClose:f},he.createElement("div",{"data-testid":"grant-access-modal",className:u.classes.outerWrapper},he.createElement(a.Modal$1.Header,{className:u.classes.headerSection},he.createElement(h,null)),he.createElement(a.Modal$1.Body,{className:u.classes.modalInnerWrapper},he.createElement("div",{style:{padding:"6px"}},he.createElement(ve,{objectIdentifier:e},he.createElement(be,{objectIdentifier:e,onRequestClose:f,onInbandShareCompleted:m,prefillContacts:p})))))))};Ie.displayName="GrantAccessModal";const Ce=e=>{const t=he.useMemo((()=>e.fileOrFolder.is_dir?e.fileOrFolder.target_ns?{type:"shared_folder"}:{type:"file_folder"}:{type:"file",name:a.filename(e.fileOrFolder.fq_path),size:e.fileOrFolder.bytes}),[e.fileOrFolder]),i=he.useMemo((()=>({actionSurface:e.actionSurface,actionElement:e.actionElement,contentAction:"share",tiburonOrigin:a.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,screen:"share_screen",shareModalType:"sm24"})),[e.actionSurface,e.actionElement]),[l,d]=he.useState(m.getObjectIdentifier(e.fileOrFolder));return he.useEffect((()=>{(async()=>{if(!l.fileId||""===l.fileId){const e=await _.fetchLegacySharingObjectMetadataObjectIdentifier(l);d(e)}})()}),[l]),e.isOpen?he.createElement(o.Provider,{value:o.intl},he.createElement(r.MetadataProvider,{shareModalSessionId:e.sessionId,sharingObjectIdentifier:l},he.createElement(n.ContextProvider,{context:s.Context,value:e.sessionId},he.createElement(n.ContextProvider,{context:c.Context,value:i},he.createElement(n.ContextProvider,{context:c.Context$1,value:t},he.createElement(Ie,{objectIdentifier:l,fileOrFolder:e.fileOrFolder,sessionId:e.sessionId,user:e.user,actionSurface:e.actionSurface,isOpen:e.isOpen,onRequestClose:e.onRequestClose,onInbandShareCompleted:e.onInbandShareCompleted,prefillContacts:e.prefillContacts})))))):null};Ce.displayName="GrantAccessBrowse",e.GrantAccessBrowse=Ce}));
//# sourceMappingURL=c_grant-access_browse_integration_index.after-display.js-vflZFnpBB.map

//# debugId=aeccf65f-5d3d-39f1-a817-fc2a860254f1