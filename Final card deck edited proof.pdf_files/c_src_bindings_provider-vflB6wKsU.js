!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a5115bad-3754-3e83-82e5-a1e291226ded")}catch(e){}}();
define(["exports","react","./c_core_i18n","./c_api-v2-client_src_dropbox","./e_ui_page_files_router","react-dom","./c_src_bindings_api-context","./c_flux_action_type","./c_bem","./c_react_query_helpers_queries_login_and_register_constants","./c_pap-events_share_copy_shared_link"],(function(e,t,a,n,r,i,o,s,_,c,d){"use strict";function l(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var u=l(t),E=l(i);const A=u.createContext(new n.Dropbox({})),S=({sdk:e,children:t})=>u.createElement(A.Provider,{value:e},t);S.displayName="DropboxSdkProvider";a.createIntl({locale:"en"});const p=({children:e,intl:t})=>t?u.createElement(a.Provider,{value:t},e):e;p.displayName="Provider";const m=(...e)=>{},g=r.SHARE_ACTION_ORIGIN_TYPE.SHARING_SDK_SANDBOX,h=(...e)=>(...t)=>{e.forEach((e=>{try{e(...t)}catch(e){}}))},v=u.createContext({sink:m,metadata:{},origin:g,actionInfo:void 0}),f=({sink:e,children:t,origin:a,actionInfo:n})=>{const r=u.useMemo((()=>({sink:e,metadata:{},origin:a,actionInfo:n})),[e,a,n]);return u.createElement(v.Provider,{value:r},t)};f.displayName="Provider";const T=()=>{const e=u.useContext(v);return u.useCallback(((t,a)=>{const n={type:t,payload:a};e.sink(n,e.metadata,e.origin,e.actionInfo)}),[e])},R=({children:e,...t})=>{const a=u.useContext(v),[n]=u.useState({sink:a.sink,metadata:{},origin:a.origin,actionInfo:a.actionInfo});return n.metadata={...a.metadata,...t},u.createElement(v.Provider,{value:n},e)};var I;R.displayName="MetadataProvider",e.Platforms=void 0,(I=e.Platforms||(e.Platforms={})).SANDBOX="SANDBOX",I.METASERVER="METASERVER",I.PAPER="PAPER",I.DESKTOP="DESKTOP",I.MS_TEAMS="MS_TEAMS",I.MS_TEAMS_MOBILE="MS_TEAMS_MOBILE";const C=u.createContext(e.Platforms.SANDBOX),L=({platform:e,children:t})=>u.createElement(C.Provider,{value:e},t);L.displayName="Provider";const b=()=>u.useContext(C),N=u.createContext({redirectWindowToken:null}),M=({children:e,...t})=>{const a=u.useMemo((()=>({redirectWindowToken:t.redirectWindowToken})),[t.redirectWindowToken]);return u.createElement(N.Provider,{value:a},e)};function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},O.apply(this,arguments)}M.displayName="Provider";var k="data-focus-lock",y="data-focus-lock-disabled",D={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},P=r.createMedium({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),F=r.createMedium(),w=r.createMedium(),x=r.createSidecarMedium({async:!0}),H=[],G=u.forwardRef((function(e,a){var n,i=u.useState(),o=i[0],s=i[1],_=u.useRef(),c=u.useRef(!1),d=u.useRef(null),l=e.children,E=e.disabled,A=e.noFocusGuards,S=e.persistentFocus,p=e.crossFrame,m=e.autoFocus;e.allowTextSelection;var g=e.group,h=e.className,v=e.whiteList,f=e.hasPositiveIndices,T=e.shards,R=void 0===T?H:T,I=e.as,C=void 0===I?"div":I,L=e.lockProps,b=void 0===L?{}:L,N=e.sideCar,M=e.returnFocus,w=e.focusOptions,G=e.onActivation,V=e.onDeactivation,U=u.useState({})[0],B=u.useCallback((function(){d.current=d.current||document&&document.activeElement,_.current&&G&&G(_.current),c.current=!0}),[G]),K=u.useCallback((function(){c.current=!1,V&&V(_.current)}),[V]);t.useEffect((function(){E||(d.current=null)}),[]);var j=u.useCallback((function(e){var t=d.current;if(t&&t.focus){var a="function"==typeof M?M(t):M;if(a){var n="object"==typeof a?a:void 0;d.current=null,e?Promise.resolve().then((function(){return t.focus(n)})):t.focus(n)}}}),[M]),W=u.useCallback((function(e){c.current&&P.useMedium(e)}),[]),$=F.useMedium,q=u.useCallback((function(e){_.current!==e&&(_.current=e,s(e))}),[]),Y=O(((n={})[y]=E&&"disabled",n[k]=g,n),b),z=!0!==A,Q=z&&"tail"!==A,X=r.useMergeRefs([a,q]);return u.createElement(u.Fragment,null,z&&[u.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:E?-1:0,style:D}),f?u.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:E?-1:1,style:D}):null],!E&&u.createElement(N,{id:U,sideCar:x,observed:o,disabled:E,persistentFocus:S,crossFrame:p,autoFocus:m,whiteList:v,shards:R,onActivation:B,onDeactivation:K,returnFocus:j,focusOptions:w}),u.createElement(C,O({ref:X},Y,{className:h,onBlur:$,onFocus:W}),l),Q&&u.createElement("div",{"data-focus-guard":!0,tabIndex:E?-1:0,style:D}))}));G.propTypes={},G.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var V=G;function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function K(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}var j=function(e){for(var t=Array(e.length),a=0;a<e.length;++a)t[a]=e[a];return t},W=function(e){return Array.isArray(e)?e:[e]},$=function(e){return Array.isArray(e)?e[0]:e},q=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},Y=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},z=function(e,t){return!e||Y(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue||"none"!==t.getPropertyValue("display")&&"hidden"!==t.getPropertyValue("visibility"))}(e)&&t(q(e))},Q=function e(t,a){var n=t.get(a);if(void 0!==n)return n;var r=z(a,e.bind(void 0,t));return t.set(a,r),r},X=function e(t,a){var n=t.get(a);if(void 0!==n)return n;var r=function(e,t){return!(e&&!Y(e))||!!te(e)&&t(q(e))}(a,e.bind(void 0,t));return t.set(a,r),r},J=function(e){return e.dataset},Z=function(e){return"INPUT"===e.tagName},ee=function(e){return Z(e)&&"radio"===e.type},te=function(e){var t=e.getAttribute("data-no-autofocus");return![!0,"true",""].includes(t)},ae=function(e){var t;return Boolean(e&&(null===(t=J(e))||void 0===t?void 0:t.focusGuard))},ne=function(e){return!ae(e)},re=function(e){return Boolean(e)},ie=function(e,t){var a=e.tabIndex-t.tabIndex,n=e.index-t.index;if(a){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return a||n},oe=function(e,t,a){return j(e).map((function(e,t){return{node:e,index:t,tabIndex:a&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}})).filter((function(e){return!t||e.tabIndex>=0})).sort(ie)},se=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),_e="".concat(se,", [data-focus-guard]"),ce=function e(t,a){return j((t.shadowRoot||t).children).reduce((function(t,n){return t.concat(n.matches(a?_e:se)?[n]:[],e(n))}),[])},de=function(e,t){var a;return e instanceof HTMLIFrameElement&&(null===(a=e.contentDocument)||void 0===a?void 0:a.body)?le([e.contentDocument.body],t):[e]},le=function(e,t){return e.reduce((function(e,a){var n,r=ce(a,t),i=(n=[]).concat.apply(n,r.map((function(e){return de(e,t)})));return e.concat(i,a.parentNode?j(a.parentNode.querySelectorAll(se)).filter((function(e){return e===a})):[])}),[])},ue=function(e,t){return j(e).filter((function(e){return Q(t,e)})).filter((function(e){return function(e){return!((Z(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))}(e)}))},Ee=function(e,t){return void 0===t&&(t=new Map),j(e).filter((function(e){return X(t,e)}))},Ae=function(e,t,a){return oe(ue(le(e,a),t),!0,a)},Se=function(e,t){return oe(ue(le(e),t),!1)},pe=function(e,t){return ue((a=e.querySelectorAll("[".concat("data-autofocus-inside","]")),j(a).map((function(e){return le([e])})).reduce((function(e,t){return e.concat(t)}),[])),t);var a},me=function e(t,a){return t.shadowRoot?e(t.shadowRoot,a):!(void 0===Object.getPrototypeOf(t).contains||!Object.getPrototypeOf(t).contains.call(t,a))||j(t.children).some((function(t){var n;if(t instanceof HTMLIFrameElement){var r=null===(n=t.contentDocument)||void 0===n?void 0:n.body;return!!r&&e(r,a)}return e(t,a)}))},ge=function e(t){return t.parentNode?e(t.parentNode):t},he=function(e){return W(e).filter(Boolean).reduce((function(e,t){var a=t.getAttribute(k);return e.push.apply(e,a?function(e){for(var t=new Set,a=e.length,n=0;n<a;n+=1)for(var r=n+1;r<a;r+=1){var i=e[n].compareDocumentPosition(e[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter((function(e,a){return!t.has(a)}))}(j(ge(t).querySelectorAll("[".concat(k,'="').concat(a,'"]:not([').concat(y,'="disabled"])')))):[t]),e}),[])},ve=function e(t){if(void 0===t&&(t=document),t&&t.activeElement){var a=t.activeElement;return a.shadowRoot?e(a.shadowRoot):a instanceof HTMLIFrameElement&&function(e){try{return e()}catch(e){return}}((function(){return a.contentWindow.document}))?e(a.contentWindow.document):a}},fe=function(e,t){return void 0===t&&(t=ve($(e).ownerDocument)),!(!t||t.dataset&&t.dataset.focusGuard)&&he(e).some((function(e){return me(e,t)||function(e,t){return Boolean(j(e.querySelectorAll("iframe")).some((function(e){return function(e,t){return e===t}(e,t)})))}(e,t)}))},Te=function(e,t){return ee(e)&&e.name?function(e,t){return t.filter(ee).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},Re=function(e){return e[0]&&e.length>1?Te(e[0],e):e[0]},Ie=function(e,t){return e.length>1?e.indexOf(Te(e[t],e)):t},Ce="NEW_FOCUS",Le=function(e,t,a,n){var r=e.length,i=e[0],o=e[r-1],s=ae(a);if(!(a&&e.indexOf(a)>=0)){var _,c,d=void 0!==a?t.indexOf(a):-1,l=n?t.indexOf(n):d,u=n?e.indexOf(n):-1,E=d-l,A=t.indexOf(i),S=t.indexOf(o),p=(_=t,c=new Set,_.forEach((function(e){return c.add(Te(e,_))})),_.filter((function(e){return c.has(e)}))),m=(void 0!==a?p.indexOf(a):-1)-(n?p.indexOf(n):d),g=Ie(e,0),h=Ie(e,r-1);return-1===d||-1===u?Ce:!E&&u>=0?u:d<=A&&s&&Math.abs(E)>1?h:d>=S&&s&&Math.abs(E)>1?g:E&&Math.abs(m)>1?u:d<=A?h:d>S?g:E?Math.abs(E)>1?u:(r+u+E)%r:void 0}},be=function(e,t,a){var n,r=e.map((function(e){return e.node})),i=Ee(r.filter((n=a,function(e){var t,a=null===(t=J(e))||void 0===t?void 0:t.autofocus;return e.autofocus||void 0!==a&&"false"!==a||n.indexOf(e)>=0})));return i&&i.length?Re(i):Re(Ee(t))},Ne=function e(t,a){return void 0===a&&(a=[]),a.push(t),t.parentNode&&e(t.parentNode.host||t.parentNode,a),a},Me=function(e,t){for(var a=Ne(e),n=Ne(t),r=0;r<a.length;r+=1){var i=a[r];if(n.indexOf(i)>=0)return i}return!1},Oe=function(e,t,a){var n=W(e),r=W(t),i=n[0],o=!1;return r.filter(Boolean).forEach((function(e){o=Me(o||e,e)||o,a.filter(Boolean).forEach((function(e){var t=Me(i,e);t&&(o=!o||me(t,o)?t:Me(t,o))}))})),o},ke=function(e,t){var a=ve(W(e).length>0?document:$(e).ownerDocument),n=he(e).filter(ne),r=Oe(a||e,e,n),i=new Map,o=Se(n,i),s=Ae(n,i).filter((function(e){var t=e.node;return ne(t)}));if(s[0]||(s=o)[0]){var _,c,d,l=Se([r],i).map((function(e){return e.node})),u=(_=l,c=s,d=new Map,c.forEach((function(e){return d.set(e.node,e)})),_.map((function(e){return d.get(e)})).filter(re)),E=u.map((function(e){return e.node})),A=Le(E,l,a,t);if(A===Ce){var S=be(o,E,function(e,t){return e.reduce((function(e,a){return e.concat(pe(a,t))}),[])}(n,i));return S?{node:S}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===A?A:u[A]}},ye=0,De=!1,Pe=function(e,t,a){void 0===a&&(a={});var n,r,i=ke(e,t);if(!De&&i){if(ye>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),De=!0,void setTimeout((function(){De=!1}),1);ye++,n=i.node,r=a.focusOptions,"focus"in n&&n.focus(r),"contentWindow"in n&&n.contentWindow&&n.contentWindow.focus(),ye--}};function Fe(e){setTimeout(e,1)}var we=function(){return document&&document.activeElement===document.body||function(e){void 0===e&&(e=document);var t=ve(e);return!!t&&j(e.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(e){return me(e,t)}))}()},xe=null,He=null,Ge=null,Ve=!1,Ue=function(){return!0};function Be(e,t,a,n){var r=null,i=e;do{var o=n[i];if(o.guard)o.node.dataset.focusAutoGuard&&(r=o);else{if(!o.lockItem)break;if(i!==e)return;r=null}}while((i+=a)!==t);r&&(r.node.tabIndex=0)}var Ke=function(e){return e&&"current"in e?e.current:e},je=function e(t,a,n){return a&&(a.host===t&&(!a.activeElement||n.contains(a.activeElement))||a.parentNode&&e(t,a.parentNode,n))},We=function(){var e,t,a,n,r,i,o,s=!1;if(xe){var _=xe,c=_.observed,d=_.persistentFocus,l=_.autoFocus,u=_.shards,E=_.crossFrame,A=_.focusOptions,S=c||Ge&&Ge.portaledElement,p=document&&document.activeElement;if(S){var m=[S].concat(u.map(Ke).filter(Boolean));if(p&&!function(e){return(xe.whiteList||Ue)(e)}(p)||(d||(E?Boolean(Ve):"meanwhile"===Ve)||!we()||!He&&l)&&(S&&!(fe(m)||p&&function(e,t){return t.some((function(t){return je(e,t,t)}))}(p,m)||(o=p,Ge&&Ge.portaledElement===o))&&(document&&!He&&p&&!l?(p.blur&&p.blur(),document.body.focus()):(s=Pe(m,He,{focusOptions:A}),Ge={})),Ve=!1,He=document&&document.activeElement),document){var g=document&&document.activeElement,h=(t=he(e=m).filter(ne),a=Oe(e,e,t),n=new Map,r=Ae([a],n,!0),i=Ae(t,n).filter((function(e){var t=e.node;return ne(t)})).map((function(e){return e.node})),r.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:i.indexOf(t)>=0,guard:ae(t)}}))),v=h.map((function(e){return e.node})).indexOf(g);v>-1&&(h.filter((function(e){var t=e.guard,a=e.node;return t&&a.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),Be(v,h.length,1,h),Be(v,-1,-1,h))}}}return s},$e=function(e){We()&&e&&(e.stopPropagation(),e.preventDefault())},qe=function(){return Fe(We)},Ye=function(){Ve="just",Fe((function(){Ve="meanwhile"}))};P.assignSyncMedium((function(e){var t=e.target,a=e.currentTarget;a.contains(t)||(Ge={observerNode:a,portaledElement:t})})),F.assignMedium(qe),w.assignMedium((function(e){return e({moveFocusInside:Pe,focusInside:fe})}));var ze=function(e,a){return function(n){var r,i=[];function o(){r=e(i.map((function(e){return e.props}))),a(r)}var s,_,c,d=function(e){var t,a;function s(){return e.apply(this,arguments)||this}a=e,(t=s).prototype=Object.create(a.prototype),t.prototype.constructor=t,U(t,a),s.peek=function(){return r};var _=s.prototype;return _.componentDidMount=function(){i.push(this),o()},_.componentDidUpdate=function(){o()},_.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),o()},_.render=function(){return u.default.createElement(n,this.props)},s}(t.PureComponent);return s=d,_="displayName",c="SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")",(_=K(_))in s?Object.defineProperty(s,_,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[_]=c,d}}((function(e){return e.filter((function(e){return!e.disabled}))}),(function(e){var t=e.slice(-1)[0];t&&!xe&&(document.addEventListener("focusin",$e),document.addEventListener("focusout",qe),window.addEventListener("blur",Ye));var a=xe,n=a&&t&&t.id===a.id;xe=t,a&&!n&&(a.onDeactivation(),e.filter((function(e){return e.id===a.id})).length||a.returnFocus(!t)),t?(He=null,n&&a.observed===t.observed||t.onActivation(),We(),Fe(We)):(document.removeEventListener("focusin",$e),document.removeEventListener("focusout",qe),window.removeEventListener("blur",Ye),He=null)}))((function(){return null})),Qe=u.forwardRef((function(e,t){return u.createElement(V,O({sideCar:ze,ref:t},e))})),Xe=V.propTypes||{};Xe.sideCar,function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a])}(Xe,["sideCar"]),Qe.propTypes={};var Je=Qe;function Ze(e){const t=window.document.createElement("a");t.href=e;let a=t.protocol||window.location.protocol;":"===t.protocol&&(a=window.location.protocol);const n=t.hostname||window.location.hostname;let r=t.port||window.location.port;"443"===r&&"https:"===a&&(r="");let i=n;return r&&(i=i+":"+r),a+"//"+i+(0===t.pathname.indexOf("/")?t.pathname:`/${t.pathname}`)+t.search+t.hash}class et{unregisterChild(e){this.children=this.children.filter((t=>t!==e)),this.updateStatus()}registerChild(e){this.children=[...this.children,e],this.updateStatus()}updateStatus(){(this.children.length>0||this.callbacks.length>0)!==this.isActive&&(this.isActive?(this.isActive=!1,this.parents.forEach((e=>e.unregisterChild(this)))):(this.isActive=!0,this.previousValue=this.currentValue,this.parents.forEach((e=>e.registerChild(this)))))}obs(e){const t=(t,a)=>e(t,a);return this.callbacks=[...this.callbacks,t],this.updateStatus(),()=>{this.cancelledCallbacks.set(t,!0),this.callbacks=this.callbacks.filter((e=>e!==t)),this.updateStatus()}}updateValue(){const e=this.parents;if(this.generation=this.tracker.generation,this.tracker.stack.push([]),this.currentValue=this.getter(this.currentValue),this.parents=this.tracker.stack.pop()||[],!this.isActive)return;this.currentValue!==this.previousValue&&(this.tracker.toUpdate=[...this.tracker.toUpdate,...this.children],this.tracker.toNotify=[...this.tracker.toNotify,this]);const t=this.parents,a=t.filter((t=>!e.find((e=>t===e)))),n=e.filter((e=>!t.find((t=>e===t))));a.forEach((e=>e.registerChild(this))),n.forEach((e=>e.unregisterChild(this)))}get(){return(this.tracker.stack[this.tracker.stack.length-1]||[]).push(this),this.generation!==this.tracker.generation&&this.updateValue(),this.currentValue}notify(){if(this.currentValue===this.previousValue)return;const e=this.previousValue;this.previousValue=this.currentValue,this.callbacks.forEach((t=>{this.cancelledCallbacks.has(t)||t(this.currentValue,e)}))}set(e){if(this.tracker.depth++,this.tracker.generation++,this.tracker.toUpdate.push(this),this.setter(e),this.tracker.depth--,0===this.tracker.depth){for(;this.tracker.toUpdate.length>0;){const e=this.tracker.toUpdate;this.tracker.toUpdate=[],e.forEach((e=>e.updateValue()))}for(;this.tracker.toNotify.length>0;){const e=this.tracker.toNotify;this.tracker.toNotify=[],e.forEach((e=>e.notify()))}}}constructor(e,t,a){this.callbacks=[],this.children=[],this.parents=[],this.isActive=!1,this.cancelledCallbacks=new WeakMap,this.tracker=e,this.getter=t,this.setter=a,this.currentValue=this.getter(null),this.previousValue=this.currentValue,this.generation=this.tracker.generation,this.updateValue()}}const tt=new class{constructor(){this.stack=[],this.depth=0,this.generation=0,this.toNotify=[],this.toUpdate=[]}},at=e=>{let t=e;return new et(tt,(()=>t),(e=>{t=e}))},nt=at,rt=e=>{const[,t]=u.useState((()=>e.get()));return u.useEffect((()=>e.obs((e=>t(e)))),[e]),e.get()},it=(e,t)=>{const[a]=u.useState((()=>{const a=nt(e);return{$props:a,store:t(a)}}));return u.useEffect((()=>a.$props.set(e))),a.store},ot=rt,st=e=>window.open(e,"_blank"),_t=u.createContext(st),ct=({openUrl:e,children:t})=>u.createElement(_t.Provider,{value:e},t);ct.displayName="Provider";const dt=()=>{const e=u.useContext(_t);return u.useCallback((t=>{e(t)}),[e])},lt=e=>e.formatMessage({id:"0NA7+K",defaultMessage:"Close"}),ut=u.createContext({store:{$item:nt(null),$props:nt({})}}),Et=()=>{const{store:e}=u.useContext(ut),t=u.useRef(null);return a=>{const n=Math.random().toString();return e.$item.set({key:n,Snackbar:a,snackbarRef:t}),requestAnimationFrame((()=>{var a,n;null===(n=(a=e.$props.get()).onSnackbarShownChange)||void 0===n||n.call(a,!0,t)})),()=>{const t=e.$item.get();t&&t.key===n&&e.$item.set(null)}}},At=()=>{const{store:e}=u.useContext(ut),t=ot(e.$item),a=(e=>{const{store:t}=u.useContext(ut);return u.useCallback((()=>{const a=t.$item.get();a&&a.key===e&&(t.$item.set(null),requestAnimationFrame((()=>{var e,a;null===(a=(e=t.$props.get()).onSnackbarShownChange)||void 0===a||a.call(e,!1)})))}),[t,e])})(t?t.key:"");return t?E.createPortal(u.createElement("div",{ref:t.snackbarRef,key:t.key,style:{position:"fixed",display:"flex",zIndex:2e4,width:"100%",bottom:"1em",justifyContent:"center"},"data-sharing-sdk":"1"},u.createElement(t.Snackbar,{style:{flexGrow:1},key:t.key,open:!0,onRequestClose:a})),document.body):null},St=({children:e,onSnackbarShownChange:t})=>{const a=it({onSnackbarShownChange:t},(e=>({$item:nt(null),$props:e}))),n=u.useMemo((()=>({store:a})),[a]);return u.createElement(ut.Provider,{value:n},u.createElement(u.Fragment,null,e,u.createElement(At,null)))};St.displayName="Provider";var pt;e.Status=void 0,(pt=e.Status||(e.Status={})).SUCCESS="SUCCESS",pt.ERROR="ERROR",pt.FATAL="FATAL";const mt=r.isObjectOf({status:r.isNumber,headers:r.isUnknown,error:r.isObjectOf({error:r.isObjectOf({".tag":r.isString})})}),gt=r.isObjectOf({status:r.isNumber}),ht=async t=>{try{const a=await t;return{status:e.Status.SUCCESS,output:a.result}}catch(t){const a=t;return mt(a)?{status:e.Status.ERROR,error:a.error.error,statusCode:a.status}:gt(t)?{status:e.Status.FATAL,statusCode:t.status,error:t}:{status:e.Status.FATAL,error:t}}},vt=(e,t)=>({name:e.name,fetch:t,type:"standard"}),ft=vt({name:"sharing_receiving.SharingTiburonLogger"},(e=>t=>{const a={...t,extras:Rt(It(JSON.stringify(t.extras)))};return ht(e.sharingReceivingSharingTiburonLogger(a))})),Tt=e=>e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65,Rt=e=>{let t=2,a="";const n=e.length;let r=0;for(let i=0;i<n;i++)t=i%3,i>0&&4*i/3%76==0&&(a+="\r\n"),r|=e[i]<<(16>>>t&24),2!==t&&e.length-i!=1||(a+=String.fromCodePoint(Tt(r>>>18&63),Tt(r>>>12&63),Tt(r>>>6&63),Tt(63&r)),r=0);return a.substr(0,a.length-2+t)+(2===t?"":1===t?"=":"==")},It=e=>{let t;const a=e.length;let n=0;for(let r=0;r<a;r++)t=e.codePointAt(r),t>65536&&r++,n+=t<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;const r=new Uint8Array(n);let i=0,o=0;for(;i<n;)t=e.codePointAt(o),t<128?r[i++]=t:t<2048?(r[i++]=192+(t>>>6),r[i++]=128+(63&t)):t<65536?(r[i++]=224+(t>>>12),r[i++]=128+(t>>>6&63),r[i++]=128+(63&t)):t<2097152?(r[i++]=240+(t>>>18),r[i++]=128+(t>>>12&63),r[i++]=128+(t>>>6&63),r[i++]=128+(63&t),o++):t<67108864?(r[i++]=248+(t>>>24),r[i++]=128+(t>>>18&63),r[i++]=128+(t>>>12&63),r[i++]=128+(t>>>6&63),r[i++]=128+(63&t),o++):(r[i++]=252+(t>>>30),r[i++]=128+(t>>>24&63),r[i++]=128+(t>>>18&63),r[i++]=128+(t>>>12&63),r[i++]=128+(t>>>6&63),r[i++]=128+(63&t),o++),o++;return r},Ct=e=>{if(r.getAccessType(e))switch(r.getAccessType(e)){case"owner":return"owner";case"editor":return"writer";default:return"reader"}},Lt=e=>({user_access_type:Ct(e),is_folder:r.getIsFolder(e),fq_path:r.isNewApiMetadata(e)?e.common_metadata.path_lower:e.path_lower,content_id:r.isNewApiMetadata(e)?r.getIsFile(e)?e.common_metadata.file_id:r.getIsSharedFolder(e)?r.getSharedFolderId(e):r.getIsFolder(e)?e.common_metadata.path_lower:e.common_metadata.file_id:r.getIsFile(e)?e.id:r.getIsSharedFolder(e)?e.shared_folder_id:r.getIsFolder(e)?e.path_lower:r.getIsCollection(e)?e.collectionId:"",...{...r.getIsSharedFolder(e)||r.getIsCollection(e)?{ns_id:r.getSharedFolderId(e)}:{}},can_create_edit_link:r.getCanDoAction(e,r.CREATE_EDIT_LINK_TAG),can_create_view_link:r.getCanDoAction(e,r.CREATE_VIEW_LINK_TAG),can_edit_inband_invite:r.getCanDoAction(e,r.INVITE_EDITOR_TAG),can_view_inband_invite:r.getCanDoAction(e,r.INVITE_VIEWER_TAG),max_access:r.getCanDoAction(e,r.CREATE_EDIT_LINK_TAG)||r.getCanDoAction(e,r.INVITE_EDITOR_TAG)?"editor":"viewer"}),bt=e=>e&&"other"!==e[".tag"]?"viewer"===e[".tag"]?"reader":"writer":null,Nt=e=>{const t={link_id:e.id,link_access_level:(a=e.link_permissions.link_access_level,a?a[".tag"]:r.VIEWER[".tag"]),audience:r.getCurrentAudience(e)[".tag"]};var a;const n=(e=>{const t=new URL(e);if(t.search.includes("rlkey"))return{kind:"rlkey",val:t.searchParams.get("rlkey"),link_type:"righteous"};if(t.pathname.includes("/s/")||t.pathname.includes("/sh/")){const e=e=>e.pathname.includes("/raw/")||e.pathname.includes("/dl/")||e.pathname.includes("/print/"),a=e(t)?3:2;return{kind:"tkey",val:t.pathname.split("/")[a],link_type:"shmodel"}}return null})(e.url);return n&&(t[n.kind]=n.val,t.link_type=n.link_type),t},Mt=e=>{const t={tray_style:e.loggingExtras.tray_style,tray_variants:e.loggingExtras.variants};return{platform_name:e.platformName,platform_version:e.platformVersion,build_channel:e.buildChannel,build_number:e.buildNumber,...t}},Ot=(e,t,a,n)=>{const i=t.shareModalSessionId,o=t.sharingObjectMetadata,s=t.desktopMetadata;return i&&(n={...n,modal_session_id:i}),t.sharingObjectIdentifier&&("file"===t.sharingObjectIdentifier[".tag"]?n={...n,file_id:t.sharingObjectIdentifier.fileId}:"shared_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,ns_id:t.sharingObjectIdentifier.sharedFolderId}:"file_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,fq_path:t.sharingObjectIdentifier.path}:"collection"===t.sharingObjectIdentifier[".tag"]&&(n={...n,ns_id:t.sharingObjectIdentifier.nsId,collection_id:t.sharingObjectIdentifier.collectionId})),o&&!r.isNewApiMetadata(o)&&o.path_lower&&(n={...n,fq_path:o.path_lower}),o&&r.isNewApiMetadata(o)&&o.common_metadata.path_lower&&(n={...n,fq_path:o.common_metadata.path_lower}),o&&!r.isNewApiMetadata(o)&&r.getIsFile(o)&&(n={...n,file_id:o.id}),o&&r.isNewApiMetadata(o)&&r.getIsFile(o)&&(n={...n,file_id:o.common_metadata.file_id}),o&&!r.isNewApiMetadata(o)&&r.getIsSharedFolder(o)&&(n={...n,ns_id:o.shared_folder_id}),o&&r.isNewApiMetadata(o)&&r.getIsSharedFolder(o)&&(n={...n,ns_id:o.metadata_response&&"shared_folder_id"in o.metadata_response?o.metadata_response.shared_folder_id:""}),o&&r.getIsCollection(o)&&(n={...n,ns_id:o.shared_folder_id,collection_id:o.collectionId}),s&&(n={...n,...Mt(s)}),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:n}},kt=(e,t,a,n)=>{const r=t.shareModalSessionId,i=t.sharingLinkMetadata,o=t.sharingObjectMetadata,s=t.desktopMetadata;return r&&(n={...n,modal_session_id:r}),i&&(n={...n,...Nt(i)}),o&&(n={...n,...Lt(o)}),s&&(n={...n,...Mt(s)}),t.sharingObjectIdentifier&&("file"===t.sharingObjectIdentifier[".tag"]?n={...n,file_id:t.sharingObjectIdentifier.fileId}:"shared_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,ns_id:t.sharingObjectIdentifier.sharedFolderId}:"file_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,fq_path:t.sharingObjectIdentifier.path}:"collection"===t.sharingObjectIdentifier[".tag"]&&(n={...n,ns_id:t.sharingObjectIdentifier.nsId,collection_id:t.sharingObjectIdentifier.collectionId})),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:n}},yt=e=>{const t=u.useContext(A),a=T();if("standard"===e.type){const n=u.useMemo((()=>e.fetch(t)),[e,t]);return u.useCallback((async t=>{const r=Math.random().toString();a("ENDPOINT_FETCH_BEGIN",{name:e.name,input:t,id:r});const i=Date.now(),o=await n(t),s=Date.now();return a("ENDPOINT_FETCH_END",{name:e.name,id:r,latency:s-i,response:o}),o}),[n,e,a])}{const t=e.useFetch();return u.useCallback((async n=>{const r=Math.random().toString();a("ENDPOINT_FETCH_BEGIN",{name:e.name,input:n,id:r});const i=Date.now(),o=await t(n),s=Date.now();return a("ENDPOINT_FETCH_END",{name:e.name,id:r,latency:s-i,response:o}),o}),[t,e,a])}},Dt=(e,t)=>{let a={is_alpha:!0};return t.sharingAccessLevel&&(a={...a,access:t.sharingAccessLevel[".tag"]}),e.createSharedLinkStartTime&&(a={...a,timing:Date.now()-e.createSharedLinkStartTime}),a={...a,include_ns_creation:!1},a},Pt=e=>{if(e.shareMe24Metadata){if(e.shareMe24Metadata.shouldStyleForSM21)return s.ScreenName.ManageAccessScreen;if(e.shareMe24Metadata.isShareMe24)return s.ScreenName.ShareMe24ShareScreen}return s.ScreenName.ShareScreen},Ft=()=>{const t=(()=>{const t=yt(ft);return u.useMemo((()=>({SHARE_MODAL_SHARE__PREVALIDATION__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptTargetValidation,e,n,a))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptTargetValidation,e,n,a))},SHARE_MODAL_SHARE__PREVALIDATION__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedTargetValidation,e,n,a))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedTargetValidation,e,n,a))},SHARE_MODAL_SHARE__PREVALIDATION__API_ERROR:({event:e,metadata:a,extras:n,origin:r})=>{t(Ot(s.TiburonEventName.FailTargetValidation,a,r,{...n,error:e.payload.error[".tag"]}))},SHARE_MODAL_SHARE__PREVALIDATION__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailTargetValidation,e,n,{...a,error:"unknown server error"}))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_ERROR:({event:e,metadata:a,extras:n,origin:r})=>{t(Ot(s.TiburonEventName.FailTargetValidation,a,r,{...n,error:e.payload.error[".tag"]}))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailTargetValidation,e,n,{...a,error:"unknown server error"}))},SHARE_MODAL_MANAGE_ACCESS__MANAGE_ACCESS__CLICK:({metadata:e,extras:a,origin:n})=>{e.sharingObjectMembership&&(a={...a,access_level:e.sharingObjectMembership.access_type[".tag"]}),t(Ot(s.TiburonEventName.ClickManageAccess,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_MEMBER_ACCESS__CLICK:({event:e,metadata:a,extras:n,origin:r})=>{t(Ot(s.TiburonEventName.SelectChangeMemberPermission,a,r,{...n,new_access:"editor"===e.payload.next[".tag"]?"writer":"reader",old_access:"editor"===e.payload.previous[".tag"]?"writer":"reader"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedChangeMemberPermission,e,n,{...a,http_status_code:200,response_status:"success",is_alpha:!1}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedChangeMemberPermission,e,n,{...a,http_status_code:200,response_status:"success",is_alpha:!1}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailChangeMemberPermission,e,n,{...a,is_alpha:!1,http_status_code:0,error_tag:"undefined"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_ERROR:({event:e,metadata:a,extras:n,origin:r})=>{t(Ot(s.TiburonEventName.FailChangeMemberPermission,a,r,{...n,is_alpha:!1,http_status_code:e.payload.response.statusCode,error_tag:e.payload.response.error[".tag"]}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailChangeMemberPermission,e,n,{...a,is_alpha:!1,http_status_code:0,error_tag:"undefined"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR:({event:e,metadata:a,extras:n,origin:r})=>{t(Ot(s.TiburonEventName.FailChangeMemberPermission,a,r,{...n,is_alpha:!1,http_status_code:e.payload.response.statusCode,error_tag:e.payload.response.error[".tag"]}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_ERROR:({event:e,metadata:a,extras:n,origin:r})=>{t(Ot(s.TiburonEventName.FailTransferFolder,a,r,{...n,is_alpha:!1,http_status_code:e.payload.response.statusCode,error_tag:e.payload.response.error[".tag"]}))},SHARE_MODAL_SHARE__CREATE_LINK__API_START:({metadata:e,extras:a,origin:n,cache:r})=>{e.sharingAccessLevel&&(a={...a,access:e.sharingAccessLevel[".tag"]}),r.createSharedLinkStartTime=Date.now(),t(Ot(s.TiburonEventName.AttemptCreateSharedLinkWithSettings,e,n,a))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_START:({metadata:e,extras:a,origin:n,cache:r})=>{e.sharingAccessLevel&&(a={...a,access:e.sharingAccessLevel[".tag"]}),r.createSharedLinkStartTime=Date.now(),t(Ot(s.TiburonEventName.AttemptCreateSharedLinkWithSettings,e,n,a))},SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS:({metadata:e,event:a,origin:n,extras:r,cache:i})=>{(e={...e,sharingLinkMetadata:a.payload.response.output}).sharingLinkMetadata&&(r={...r,...Nt(e.sharingLinkMetadata)}),t(Ot(s.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,n,{http_status_Code:200,response_status:"success",...Dt(i,e),...r}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS:({metadata:e,event:a,origin:n,extras:r,cache:i})=>{(e={...e,sharingLinkMetadata:a.payload.response.output}).sharingLinkMetadata&&(r={...r,...Nt(e.sharingLinkMetadata)}),t(Ot(s.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,n,{http_status_Code:200,response_status:"success",...Dt(i,e),...r}))},SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR:({metadata:e,event:a,extras:n,origin:r,cache:i})=>{"shared_link_already_exists"!==a.payload.response.error[".tag"]?t(Ot(s.TiburonEventName.FailCreateSharedLinkWithSettings,e,r,{error_tag:a.payload.response.error[".tag"],http_status_code:a.payload.response.statusCode,fail_at:"link_creation",...Dt(i,e),...n})):t(Ot(s.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,r,{http_status_code:a.payload.response.statusCode,response_status:"success",...Dt(i,e),...n}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR:({metadata:e,extras:a,cache:n,origin:r,event:i})=>{"shared_link_already_exists"!==i.payload.response.error[".tag"]?t(Ot(s.TiburonEventName.FailCreateSharedLinkWithSettings,e,r,{error_tag:i.payload.response.error[".tag"],http_status_code:i.payload.response.statusCode,fail_at:"link_creation",...Dt(n,e),...a})):t(Ot(s.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,r,{http_status_code:i.payload.response.statusCode,response_status:"success",...Dt(n,e),...a}))},SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL:({metadata:e,extras:a,origin:n,cache:r})=>{t(Ot(s.TiburonEventName.FailCreateSharedLinkWithSettings,e,n,{fail_at:"link_creation",...Dt(r,e),http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL:({metadata:e,extras:a,origin:n,cache:r})=>{t(Ot(s.TiburonEventName.FailCreateSharedLinkWithSettings,e,n,{fail_at:"link_creation",...Dt(r,e),http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_SHARE__CREATE_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.ClickTibCreateLink,e,n,a))},SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.ClickTibCreateLink,e,n,a))},SHARE_MODAL_SHARE__INVITE__START:({metadata:e,extras:a,origin:n,cache:r})=>{r.inviteStartTime=Date.now(),t(Ot(s.TiburonEventName.ClickInbandShareButton,e,n,{in_progress:!1,access_level:bt(e.sharingAccessLevel),screen:Pt(e),...a}));const i=e.sharingLinkMetadata;i&&t(kt(s.TiburonEventName.ClickShareButtonLinkSettingsStatus,e,n,{...a,isPasswordRequired:i.link_permissions.require_password||!1,isExpirationEnabled:!!i.expires,isDisabledDownloadEnabled:!i.link_permissions.allow_download}))},SHARE_MODAL_SHARE__COPY_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{var i,o;t(kt(s.TiburonEventName.CopySharedLink,e,n,{...a,tokenized_contact_count:null===(i=e.sharingInviteTargets)||void 0===i?void 0:i.length,sender_trackey:r.getSenderTrackeyFromURL(null===(o=e.sharingLinkMetadata)||void 0===o?void 0:o.url)}))},SHARE_MODAL_SHARE__COPY_LINK__COPY_SUCCESS:({metadata:e,event:a,extras:n,origin:i})=>{var o;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(kt(s.TiburonEventName.CopySharedLink,e,i,{...n,sender_trackey:r.getSenderTrackeyFromURL(null===(o=e.sharingLinkMetadata)||void 0===o?void 0:o.url)}))},SHARE_MODAL_SETTINGS__COPY_LINK__COPY_SUCCESS:({metadata:e,event:a,extras:n,origin:i})=>{var o;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(kt(s.TiburonEventName.CopySharedLink,e,i,{...n,sender_trackey:r.getSenderTrackeyFromURL(null===(o=e.sharingLinkMetadata)||void 0===o?void 0:o.url),screen:s.ScreenName.SettingsScreen}))},SHARE_MODAL_SHARE__COPY_LINK_LEGO__COPY_SUCCESS:({metadata:e,event:a,extras:n,origin:i})=>{var o;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(kt(s.TiburonEventName.CopySharedLink,e,i,{...n,sender_trackey:r.getSenderTrackeyFromURL(null===(o=e.sharingLinkMetadata)||void 0===o?void 0:o.url)}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_START:({metadata:e,event:a,origin:n,extras:i})=>{var o,_;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(kt(s.TiburonEventName.CopySharedLink,e,n,{...i,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,sender_trackey:r.getSenderTrackeyFromURL(null===(_=e.sharingLinkMetadata)||void 0===_?void 0:_.url)}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR:({metadata:e,extras:a,origin:n})=>{var r;t(kt(s.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(r=e.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR:({metadata:e,extras:a,origin:n})=>{var r;t(kt(s.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(r=e.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN:({metadata:e,extras:a,origin:n})=>{var r;t(kt(s.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(r=e.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK_LEGO__CREATE_ERROR:({metadata:e,extras:a,origin:n})=>{var r;t(kt(s.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(r=e.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK_LEGO__COPY_ERROR:({metadata:e,extras:a,origin:n})=>{var r;t(kt(s.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(r=e.sharingInviteTargets)||void 0===r?void 0:r.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__INVITE__CANCELLED:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailInbandShare,e,n,{error_tag:"contacts_error",error_message:"contact validation error",num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,access_level:bt(e.sharingAccessLevel),screen:Pt(e),...a}))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_ERROR:({metadata:e,extras:a,origin:n,cache:r,event:i})=>{r.inviteStartTime&&(a.timing=Date.now()-r.inviteStartTime),t(kt(s.TiburonEventName.FailInbandShare,e,n,{...a,error_tag:i.payload.response.error[".tag"],http_status_code:i.payload.response.statusCode,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Pt(e)}))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_FATAL:({metadata:e,extras:a,origin:n,cache:r})=>{r.inviteStartTime&&(a.timing=Date.now()-r.inviteStartTime),t(kt(s.TiburonEventName.FailInbandShare,e,n,{...a,error_tag:"undefined",http_status_code:0,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Pt(e)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_ERROR:({event:e,metadata:a,extras:n,origin:r,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),t(kt(s.TiburonEventName.FailInbandShare,a,r,{...n,error_tag:e.payload.response.error[".tag"],http_status_code:e.payload.response.statusCode,num_recipients:a.sharingInviteTargets?a.sharingInviteTargets.length:0,screen:Pt(a)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_FATAL:({metadata:e,extras:a,origin:n,cache:r})=>{r.inviteStartTime&&(a={...a,timing:Date.now()-r.inviteStartTime}),t(kt(s.TiburonEventName.FailInbandShare,e,n,{...a,error_tag:"undefined",http_status_code:0,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Pt(e)}))},SHARE_MODAL_SHARE__INVITE__SHARE_FILE_FOLDER__FAILURE:({event:e,metadata:a,extras:n,origin:r,cache:i})=>{var o;i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===e.payload.output.type||"PollingApiError"===e.payload.output.type?n={...n,error_tag:e.payload.output.value.response.error[".tag"],http_status_code:e.payload.output.value.response.statusCode}:"NetworkFailure"===e.payload.output.type||"PollingNetworkFailure"===e.payload.output.type?n={...n,error_tag:"network",http_status_code:null!==(o=e.payload.output.value.response.statusCode)&&void 0!==o?o:0}:"PollingFailed"===e.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===e.payload.output.type&&(n={...n,error_tag:"network",http_status_code:408}),t(kt(s.TiburonEventName.FailInbandShare,a,r,{...n,num_recipients:a.sharingInviteTargets?a.sharingInviteTargets.length:0,screen:Pt(a)}))},SHARE_MODAL_SETTINGS__PAGE_VIEW:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.ViewSettingsScreen,e,n,{...a,settings_tab:r.payload.selected_tab})),t(Ot(s.TiburonEventName.ViewSettingsTab,e,n,{...a,settings_tab:r.payload.selected_tab}))},SHARE_MODAL_SETTINGS__TAB_CHANGE:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.ViewSettingsTab,e,n,{...a,settings_tab:r.payload.selected_tab}))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_GEAR__CLICK:({metadata:e,extras:a,origin:n})=>{t(kt(s.TiburonEventName.ClickSettingsGear,e,n,{...a,screen:s.ScreenName.ManageAccessScreen}));const i=e.sharingObjectMetadata;i&&(r.getIsFile(i)?t(Ot(s.TiburonEventName.OpenFileSettingsModal,e,n,a)):r.getIsFolder(i)&&t(Ot(s.TiburonEventName.OpenFolderSettingsModal,e,n,a)))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_TEXT__CLICK:({metadata:e,extras:a,origin:n,event:i})=>{t(kt(s.TiburonEventName.ClickManageAccessPageSettingsText,e,n,{...a,screen:s.ScreenName.ManageAccessScreen,settings_tab:i.payload.settings_tab,link_access_level:i.payload.link_access_level,link_type:i.payload.link_type}));const o=e.sharingObjectMetadata;o&&t(Ot(r.getIsFile(o)?s.TiburonEventName.OpenFileSettingsModal:s.TiburonEventName.OpenFolderSettingsModal,e,n,a))},SHARE_MODAL_SHARE__SETTINGS_GEAR__CLICK:({metadata:e,extras:a,origin:n})=>{t(kt(s.TiburonEventName.ClickSettingsGear,e,n,{...a,screen:s.ScreenName.ShareScreen}));const i=e.sharingObjectMetadata;i&&(r.getIsFile(i)?t(Ot(s.TiburonEventName.OpenFileSettingsModal,e,n,a)):r.getIsFolder(i)&&t(Ot(s.TiburonEventName.OpenFolderSettingsModal,e,n,a)))},SHARE_MODAL_SHARE__SETTINGS_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{a=e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?{...a,settings_tab:"edit_link_settings"}:{...a,settings_tab:"view_link_settings"},t(kt(s.TiburonEventName.ClickSettingsText,e,n,a))},SHARE_MODAL_SHARE__MODIFY_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{a=e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?{...a,settings_tab:"edit_link_settings"}:{...a,settings_tab:"view_link_settings"},t(kt(s.TiburonEventName.OpenLinkSettingsModal,e,n,a))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_SUCCESS:({metadata:e,extras:a,origin:n,cache:r})=>{r.inviteStartTime&&(a={...a,timing:Date.now()-r.inviteStartTime}),t(Ot(s.TiburonEventName.SucceedInbandShare,e,n,{...a,access_level:bt(e.sharingAccessLevel),num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Pt(e)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_SUCCESS:({metadata:e,extras:a,cache:n,origin:r})=>{n.inviteStartTime&&(a={...a,timing:Date.now()-n.inviteStartTime}),t(Ot(s.TiburonEventName.SucceedInbandShare,e,r,{...a,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Pt(e)}))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_ATTEMPT:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptNavigateAwayDuringShare,e,n,a))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_AWAY:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedNavigateAwayDuringShare,e,n,a))},SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED:({event:e,metadata:a,extras:n,origin:r})=>{n={...n,element_trackingId:"link_settings_pro_upsell",element_href:e.payload.href},t(Ot(s.TiburonEventName.ElementClick,a,r,n))},SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED:({event:e,metadata:a,extras:n,origin:r})=>{n={...n,element_trackingId:"link_settings_pro_upsell",element_href:e.payload.href},t(Ot(s.TiburonEventName.ElementView,a,r,n))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptRemoveAllMembers,e,n,a))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR:({metadata:e,event:a,origin:n,extras:r})=>{t(Ot(s.TiburonEventName.FailRemoveAllMembers,e,n,{http_status_code:a.payload.response.statusCode,error_message:a.payload.response.error[".tag"],...r}))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailRemoveAllMembers,e,n,{http_status_code:0,error_message:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedRemoveAllMembers,e,n,{http_status_code:200,response_status:"success",...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptRemoveMember,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptRemoveMember,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptRemoveMember,e,n,{relinquish_membership:!0,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptRemoveMember,e,n,{relinquish_membership:!0,...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_ERROR:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.FailRemoveMember,e,n,{http_status_code:r.payload.response.statusCode,error_tag:r.payload.response.error[".tag"],...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailRemoveMember,e,n,{http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_ERROR:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.FailRemoveMember,e,n,{relinquish_membership:!0,http_status_code:r.payload.response.statusCode,error_tag:r.payload.response.error[".tag"],...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailRemoveMember,e,n,{relinquish_membership:!0,http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE:({event:e,metadata:a,extras:n,origin:r,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===e.payload.output.type||"PollingApiError"===e.payload.output.type?n={...n,error_tag:e.payload.output.value.response.error[".tag"],http_status_code:e.payload.output.value.response.statusCode}:"NetworkFailure"===e.payload.output.type||"PollingNetworkFailure"===e.payload.output.type?n={...n,error_tag:"unknown",http_status_code:0}:"PollingFailed"===e.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===e.payload.output.type&&(n={...n,error_tag:"timeout",http_status_code:0}),t(kt(s.TiburonEventName.FailRemoveMember,a,r,n))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_FAILURE:({event:e,metadata:a,extras:n,origin:r,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===e.payload.output.type||"PollingApiError"===e.payload.output.type?n={...n,error_tag:e.payload.output.value.response.error[".tag"],http_status_code:e.payload.output.value.response.statusCode}:"NetworkFailure"===e.payload.output.type||"PollingNetworkFailure"===e.payload.output.type?n={...n,error_tag:"unknown",http_status_code:0}:"PollingFailed"===e.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===e.payload.output.type&&(n={...n,error_tag:"timeout",http_status_code:0}),t(kt(s.TiburonEventName.FailRemoveMember,a,r,{relinquish_membership:!0,...n}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedRemoveMember,e,n,{http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedRemoveMember,e,n,{http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedRemoveMember,e,n,{relinquish_membership:!0,http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedRemoveMember,e,n,{relinquish_membership:!0,http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptTransferFolder,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailTransferFolder,e,n,{http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedTransferFolder,e,n,{http_status_code:200,...a}))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__START:({metadata:e,extras:a,origin:n,cache:r})=>{r.shareModalDataLoadStartTime=Date.now(),r.inviteStartTime=void 0,r.createSharedLinkStartTime=void 0,t(Ot(s.TiburonEventName.BeginShareFlow,e,n,a))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__SUCCESS:({metadata:e,extras:a,origin:n,cache:r})=>{r.shareModalDataLoadStartTime&&(a={...a,timing:Date.now()-r.shareModalDataLoadStartTime}),t(Ot(s.TiburonEventName.ViewShareModal,e,n,a))},SHARE_MODAL_RELINQUISHED_SCREEN__VIEW:({metadata:e,extras:a,origin:n,cache:r})=>{a={...a,is_relinquished_screen:!0},r.shareModalDataLoadStartTime&&(a={...a,timing:Date.now()-r.shareModalDataLoadStartTime}),t(Ot(s.TiburonEventName.ViewShareModal,e,n,a))},SHARE_MODAL_ERROR_SCREEN__VIEW:({metadata:a,extras:n,origin:r,event:i})=>{if("response"in i.payload.initialLoadError){const t=i.payload.initialLoadError.response;let a;t.status!==e.Status.FATAL&&(a=t.error[".tag"]);const r=t.error;n={...n,http_status_code:t.statusCode,error_summary:a,error_message:r,failing_endpoint:i.payload.initialLoadError.type}}else n={...n,event:i};t(Ot(s.TiburonEventName.ViewErrorScreen,a,r,n))},SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE:({metadata:e,extras:a,origin:n,event:i})=>{if(e.sharingLinksMetadata){const t=r.getByAccessLevel(e.sharingLinksMetadata,i.payload.link_access_level);t&&(a={...a,...Nt(t)})}t(Ot(s.TiburonEventName.ChangeSharedLinkAudience,e,n,{old_audience:i.payload.previous[".tag"],new_audience:i.payload.next[".tag"],screen:s.ScreenName.SettingsScreen,...a}))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_CHANGE_ACCESS_MODAL__VIEW:({metadata:e,extras:a,event:n,origin:r})=>{t(Ot(s.TiburonEventName.OpenParentFolderAccessModal,e,r,{...a,num_parent_folders:n.payload.numParents}))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_REMOVE_ACCESS_MODAL__VIEW:({metadata:e,extras:a,event:n,origin:r})=>{t(Ot(s.TiburonEventName.OpenParentFolderAccessModal,e,r,{...a,num_parent_folders:n.payload.numParents}))},SHARE_MODAL_SHARE__VIEW:({metadata:e,extras:a,origin:n})=>{let i;e.sharingObjectMetadata&&(i=r.getCanDoAction(e.sharingObjectMetadata,r.INVITE_EDITOR_TAG)),e.sharingObjectMetadata&&r.getIsNonSharedFolder(e.sharingObjectMetadata)&&!i?a={...a,link_only_reason:"limited_permissions"}:e.sharingObjectMetadata&&r.getIsLinkOnlyMode(e.sharingObjectMetadata)?(a=e.sharingObjectMetadata.tooManyMountsError?{...a,link_only_reason:e.sharingObjectMetadata.tooManyMountsError[".tag"]}:{...a,link_only_reason:"is_family"},t(kt(s.TiburonEventName.ViewLinkOnlyModal,e,n,{...a,share_tab:e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"}))):(t(kt(s.TiburonEventName.ViewShareScreen,e,n,{...a,share_tab:e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"})),t(kt(s.TiburonEventName.ViewShareTab,e,n,{...a,share_tab:e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"})))},SHARE_MODAL_SHARE__LINK_ACCESS_LEVEL__CHANGE:({metadata:e,extras:a,origin:n,event:r})=>{t(kt(s.TiburonEventName.ViewShareTab,e,n,{...a,share_tab:"editor"===r.payload.next[".tag"]?"edit_tab":"view_tab"}))},SHARE_MODAL_MANAGE_ACCESS__VIEW:({metadata:e,extras:a,origin:n,event:r})=>{t(kt(s.TiburonEventName.ViewManageAccessScreen,e,n,{...a,manage_tab:r.payload.manage_tab,share_modal_initial_screen:r.payload.share_modal_initial_screen}))},SHARE_MODAL_MANAGE_ACCESS_TAB__VIEW:({metadata:e,extras:a,origin:n,event:r})=>{t(kt(s.TiburonEventName.ViewManageAccessTab,e,n,{...a,manage_tab:r.payload.manage_tab,share_modal_initial_screen:r.payload.share_modal_initial_screen}))},SHARE_MODAL_SHARE__MANAGE_ACCESS__CLICK:({metadata:e,extras:a,origin:n})=>{t(kt(s.TiburonEventName.ClickWhoCanAccess,e,n,a))},SHARE_MODAL__REQUEST_CLOSE__CALLED:({metadata:e,extras:a,origin:n,event:r,cache:i})=>{e={...e,sharingObjectIdentifier:r.payload.objectIdentifier},e={...e,shareModalSessionId:r.payload.sessionId},i.inviteStartTime&&(a={...a,time_modal_opened:Date.now()-i.inviteStartTime}),t(Ot(s.TiburonEventName.CloseShareModal,e,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptTargetSearch,e,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedTargetSearch,e,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.FailTargetSearch,e,n,{...a,error:r.payload.response.error[".tag"]}))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailTargetSearch,e,n,{...a,error:"unknown"}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_START:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.AttemptDeleteSharedLink,e,n,a))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR:({metadata:e,event:a,origin:n,extras:r})=>{t(Ot(s.TiburonEventName.FailDeleteSharedLink,e,n,{http_status_code:a.payload.response.statusCode,error_message:a.payload.response.error[".tag"],...r}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.FailDeleteSharedLink,e,n,{http_status_code:0,error_message:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.SucceedDeleteSharedLink,e,n,{http_status_code:200,response_status:"success",...a}))},SHARE_MODAL_SETTINGS__CREATE_LINK__NAMESPACE_CREATE_ERROR:({metadata:e,extras:a,event:n,origin:r})=>{var i,o;a={...a,http_status_code:0,error_tag:"undefined_error",access:(null===(i=e.sharingAccessLevel)||void 0===i?void 0:i[".tag"])||"unknown"},a="ApiError"===n.payload.output.type||"PollingApiError"===n.payload.output.type?{...a,http_status_code:200,error_tag:n.payload.output.value.response.error[".tag"],access:(null===(o=e.sharingAccessLevel)||void 0===o?void 0:o[".tag"])||"unknown"}:"NetworkFailure"===n.payload.output.type||"PollingNetworkFailure"===n.payload.output.type?{...a,http_status_code:n.payload.output.value.response.statusCode||0}:{...a,error_tag:n.payload.output.type},t(Ot(s.TiburonEventName.FailCreateNamespaceAfterLinkCreated,e,r,a))},SHARE_MODAL_SHARE__CREATE_LINK__NAMESPACE_CREATE_ERROR:({metadata:e,extras:a,event:n,origin:r})=>{var i,o;a={...a,http_status_code:0,error_tag:"undefined_error",access:(null===(i=e.sharingAccessLevel)||void 0===i?void 0:i[".tag"])||"unknown"},a="ApiError"===n.payload.output.type||"PollingApiError"===n.payload.output.type?{...a,http_status_code:200,error_tag:n.payload.output.value.response.error[".tag"],access:(null===(o=e.sharingAccessLevel)||void 0===o?void 0:o[".tag"])||"unknown"}:"NetworkFailure"===n.payload.output.type||"PollingNetworkFailure"===n.payload.output.type?{...a,http_status_code:n.payload.output.value.response.statusCode||0}:{...a,error_tag:n.payload.output.type},t(Ot(s.TiburonEventName.FailCreateNamespaceAfterLinkCreated,e,r,a))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__ATTEMPT:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.AttemptSolveDefaultAudienceConflict,e,n,{...a,user_default_link_audience:r.payload.user_default_link_audience,team_default_link_audience:r.payload.team_default_link_audience,final_audience:r.payload.final_audience,is_team_user:r.payload.is_team_user}))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__FAIL:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.FailSolveDefaultAudienceConflict,e,n,{...a,user_default_link_audience:r.payload.user_default_link_audience,team_default_link_audience:r.payload.team_default_link_audience,final_audience:r.payload.final_audience,is_team_user:r.payload.is_team_user}))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__SUCCEED:({metadata:e,extras:a,origin:n,event:r})=>{t(Ot(s.TiburonEventName.SucceedSolveDefaultAudienceConflict,e,n,{...a,user_default_link_audience:r.payload.user_default_link_audience,team_default_link_audience:r.payload.team_default_link_audience,final_audience:r.payload.final_audience,is_team_user:r.payload.is_team_user}))},SHARE_MODAL_VALIDATE_FOLDER_PATH_NO_PERMISSION:({metadata:e,extras:a,origin:n})=>{t(Ot(s.TiburonEventName.ValidateFolderPathNoPermission,e,n,a))}})),[t])})(),a=u.useMemo((()=>({})),[]);return u.useCallback(((e,n,r)=>{const i=t[e.type];if(i&&r)try{i({event:e,metadata:n,origin:r,cache:a,extras:{is_sdk:!0}})}catch(e){}}),[t,a])},wt=({sink:t,children:a,origin:n,actionInfo:r})=>{const i=(()=>{const t=b();return u.useCallback(((a,n)=>{var r;("SANDBOX"===t||t===e.Platforms.DESKTOP&&"developer"===(null===(r=n.desktopMetadata)||void 0===r?void 0:r.buildChannel))&&window.console.log(a,n)}),[t])})(),o=Ft(),s=u.useMemo((()=>h(t,i,o)),[t,i,o]);return u.createElement(f,{sink:s,origin:n,actionInfo:r},a)};wt.displayName="LoggingProviderWithBuiltIns";const xt=({loggingSink:t,sdk:a,children:n,redirectWindowToken:r=null,intl:i,platform:s=e.Platforms.SANDBOX,openUrl:_=null,origin:c,actionInfo:d,apiContext:l,onSnackbarShownChange:E})=>u.createElement(p,{intl:i},u.createElement(L,{platform:s},u.createElement(ct,{openUrl:_||st},u.createElement(S,{sdk:a},u.createElement(M,{redirectWindowToken:r},u.createElement(wt,{sink:t||m,origin:c,actionInfo:d},u.createElement(St,{onSnackbarShownChange:E},u.createElement(o.Provider,{apiContext:l},n))))))));xt.displayName="Provider";const Ht=/^www\.dropbox\.com$/,Gt=/^meta-.*\.dev\.corp\.dropbox\.com$/,Vt=["/2/sharing_receiving/sharing_tiburon_logger","/2/sharing/targets/search","/2/profile_services/list_linked_services"],Ut=(e,t)=>{if(!e.sharingObjectIdentifier)throw new Error("Missing objectIdentifier while trying to log to PAP");if(!e.sharingObjectMetadata)throw new Error("Missing objectMetadata while trying to log to PAP");if(!t)throw new Error("Missing actionInfo while trying to log to PAP")},Bt=async(e,t)=>{const a=d.PAP_Copy_SharedLink({...e,contentAction:e.contentAction?r.getContentActionFromString(e.contentAction):void 0}),n={isDir:e.isDir?"true":"false"};"start"===e.eventState?r.UDCL.logStart(a,{tags:n,key:t}):r.UDCL.logEnd(a,{tags:n,key:t})},Kt=async(e,t)=>{const a=d.PAP_Create_SharedLink({...e,contentAction:e.contentAction?r.getContentActionFromString(e.contentAction):void 0});"start"===e.eventState?r.UDCL.logStart(a,{key:t}):r.UDCL.logEnd(a,{key:t})},jt=()=>(({logCopyLinkEvent:e,logCreateLinkEvent:t})=>u.useCallback(((a,n,i,o)=>{switch(a.type){case"SHARE_MODAL_SHARE__COPY_LINK__CLICK":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...r.getBaseCopySharedLinkProps("start",o,n,!0),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__COPY_LINK__COPY_SUCCESS":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...r.getBaseCopySharedLinkProps("success",o,n,!0),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...r.getBaseCopySharedLinkProps("rejected",o,n,!0),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_START":Ut(n,o),t(r.getBaseCreateSharedLinkProps("start",o,n),r.getFileIdOrPath(n)),e(r.getBaseCopySharedLinkProps("start",o,n,!1),r.getFileIdOrPath(n));break;case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_START":Ut(n,o),t(r.getBaseCreateSharedLinkProps("start",o,n),r.getFileIdOrPath(n));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS":case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.response.output,200).then((e=>t({...r.getBaseCreateSharedLinkProps("success",o,n),...e},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR":case"SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL":Ut(n,o);const i=r.getErrorState(a.payload.response);t({...r.getBaseCreateSharedLinkProps(i,o,n),...r.getCreateLinkExceptionProps(a.payload.response)},r.getFileIdOrPath(n)),e({...r.getBaseCopySharedLinkProps(i,o,n,!1),...r.getCreateLinkExceptionProps(a.payload.response)},r.getFileIdOrPath(n));break;case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR":case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL":Ut(n,o);const s=r.getErrorState(a.payload.response);t({...r.getBaseCreateSharedLinkProps(s,o,n),...r.getCreateLinkExceptionProps(a.payload.response)},r.getFileIdOrPath(n));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...r.getBaseCopySharedLinkProps("rejected",o,n,!1),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...r.getBaseCopySharedLinkProps("canceled",o,n,!1),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_SUCCESS":Ut(n,o),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...r.getBaseCopySharedLinkProps("success",o,n,!1),...t},r.getFileIdOrPath(n))))}}),[t,e]))({logCopyLinkEvent:Bt,logCreateLinkEvent:Kt}),Wt=({userApiProps:t,origin:i,actionInfo:o,children:s,platform:d=e.Platforms.METASERVER,shouldDisableImportContacts:l,apiContext:E})=>{const{user:A,isLoading:S}=r.useActiveUser(),p=jt(),m=u.default.useCallback((e=>{"TEAMS_WEB"===e.type&&r.TeamsWebActionsLogger.log(e.payload.name,e.payload.extra)}),[]),g=u.default.useMemo((()=>h(p,m)),[p,m]),v=(null==E?void 0:E.isNonUserRelativeContext)&&!S?null==A?void 0:A.team_member_id:void 0,f=u.default.useMemo((()=>((e,t)=>{const a=window.location.hostname;if(!Ht.test(a)&&!Gt.test(a))throw new Error("Cannot initialize the SDK on an unsupported domain.");const i=new n.DropboxAuth({domain:window.location.hostname,domainDelimiter:""});return new n.Dropbox({auth:i,fetch:(a,n)=>{const i=new Headers((null==n?void 0:n.headers)||[]),o=window.location.hostname,s=e.root_ns_id;(Ht.test(o)||Gt.test(o))&&i.append("X-CSRF-Token",_.readCsrfToken()||""),i.append("X-Dropbox-Uid",e.id.toString());const c=new URL(a.toString()).pathname;t&&!Vt.includes(c)?i.append(r.ApiV2HeaderNames.DropboxApiSelectAdmin,t):t&&Vt.includes(c)?i.append("X-Dropbox-Path-Root",s.toString()):null!==s&&i.append("Dropbox-API-Path-Root",JSON.stringify({".tag":"namespace_id",namespace_id:s.toString()}));const d={...n||{},headers:i};return fetch(a,d)}})})(t,v)),[t,v]),{data:T,isLoading:R,isError:I}=(()=>{const{data:e,isLoading:t,isError:a,error:n}=c.loginAndRegisterConstantsPrefetchRequest.useQuery({apiArg:null,pkgArg:null});return{data:null==e?void 0:e.apiData,isLoading:t,isError:a,error:n}})();if(R||I)return null;const C=l||null==T?void 0:T.redirectWindowToken;return u.default.createElement(xt,{intl:a.intl,sdk:f,loggingSink:g,redirectWindowToken:C,platform:d,origin:i,actionInfo:o,apiContext:E},s)};Wt.displayName="SharingSdkProviderInternal";e.FocusLock=Je,e.MetadataProvider=R,e.SharingSdkProvider=e=>u.default.createElement(r.SafeQueryClientProviderWrapper,null,u.default.createElement(Wt,{...e})),e.atom=at,e.batch=e=>(e=>{const t=new et(tt,(()=>null),(t=>e(...t)));return(...e)=>t.set(e)})(e)(),e.define=vt,e.defineStoreProvider=(e,t)=>{const a=u.createContext(t);return{StoreProvider:t=>{const n=it(t,e);return u.createElement(a.Provider,{value:n},t.children)},useStore:()=>u.useContext(a)}},e.formatUrl=Ze,e.handler=ht,e.proxy=(e,t)=>new et(tt,e,t||(()=>{})),e.store=nt,e.useAtom=rt,e.useEndpoint=yt,e.useInitStore=it,e.useLogger=T,e.useOpenUrl=dt,e.usePlatform=b,e.useRedirectWindowToken=()=>u.useContext(N).redirectWindowToken,e.useShowGenericRequestFailureMessage=()=>{const e=a.useIntl(),t=(()=>{const e=a.useIntl(),t=Et();return u.useCallback((a=>t((t=>u.createElement(r.Snackbar$1,{...t},u.createElement(r.Snackbar$1.Message,null,a),u.createElement(r.Snackbar$1.Actions,null,u.createElement(r.Button,{variant:"transparent",inverse:!0},lt(e))))))),[e,t])})();return u.useCallback((()=>t(e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}))),[e,t])},e.useSnackbar=()=>{const t=a.useIntl(),n=Et(),i=dt(),o=b()===e.Platforms.DESKTOP,s=o?{style:{position:"absolute",bottom:-16,left:0,right:0,borderRadius:0,minHeight:"unset"}}:{};return{showCompleted:e=>n((a=>u.createElement(Je,{group:"share-modal"},u.createElement(r.Snackbar$1,{...a,...s,timeout:o?0:void 0,className:"sharingSdkSnackbar",preferComposition:!0},u.createElement(r.Snackbar$1.Accessory,null,u.createElement(r.UIIcon,{src:r.CheckmarkLine})),u.createElement(r.Snackbar$1.Content,null,u.createElement(r.Snackbar$1.Message,null,e.message),u.createElement(r.Snackbar$1.Actions,null,e.actionMessage&&e.actionOnClick&&u.createElement(r.Button,{variant:"transparent",onClick:e.actionOnClick},e.actionMessage),u.createElement(r.Button,{variant:"transparent",onClick:a.onRequestClose},lt(t)))))))),showInProgress:e=>n((t=>u.createElement(Je,{group:"share-modal"},u.createElement(r.Snackbar$1,{...t,...s,timeout:0,className:"sharingSdkSnackbar",preferComposition:!0},u.createElement(r.Snackbar$1.Accessory,null,u.createElement(r.Spinner,{size:"small"})),u.createElement(r.Snackbar$1.Content,null,u.createElement(r.Snackbar$1.Message,null,e.message)))))),showFailure:e=>n((a=>{const n=Ze(e.helpUrl||""),_=u.useCallback((()=>{i(n)}),[n]);return u.createElement(Je,{group:"share-modal"},u.createElement(r.Snackbar$1,{...a,...s,timeout:o?0:void 0,className:"sharingSdkSnackbar",preferComposition:!0},u.createElement(r.Snackbar$1.Accessory,null,u.createElement(r.UIIcon,{src:r.FailLine})),u.createElement(r.Snackbar$1.Content,null,u.createElement(r.Snackbar$1.Message,null,e.message),u.createElement(r.Snackbar$1.Actions,null,e.helpMessage&&e.helpUrl?u.createElement(r.Button,{variant:"transparent",onClick:_},e.helpMessage):null,u.createElement(r.Button,{variant:"transparent",onClick:a.onRequestClose},lt(t))))))}))}},e.useStore=ot}));
//# sourceMappingURL=c_src_bindings_provider.js-vflYtb0OD.map

//# debugId=a5115bad-3754-3e83-82e5-a1e291226ded