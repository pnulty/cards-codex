!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="edb03ff4-47f2-3f49-b6ee-b2fb8ed3bbab")}catch(e){}}();
define(["exports","react","./e_ui_page_files_router","./c_file_viewer_hooks_lifecycle_logging","./e_data_modules_stormcrow","./c_lodash-es_lodash"],(function(e,t,r,n,i,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var s=o(t);class l extends s.default.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){this.props.onException(e)}render(){const{fallback:e,children:t}=this.props;return this.state.hasError?e:t}}l.displayName="ErrorBoundaryInternal";const u=({children:e,fallback:t,onError:i})=>{var a,o;const u=r.useCurrentPreviewMetadata(),{optionalIOClients:{reportExceptionClient:d}}=r.useFileViewerContext(),c=(null===(a=null==u?void 0:u.content)||void 0===a?void 0:a[".tag"])||"unknown",v=null===(o=n.useCurrentFileMetadata())||void 0===o?void 0:o.file_name,p=v?r.getWhitelistedFileExtension(r.file_extension(v)):"unknown_extension",g=s.default.useCallback((e=>{null==i||i(e),null==d||d.reportException(e,c,p,"critical")}),[p,c,i,d]);return s.default.createElement(l,{fallback:t,children:e,onException:g})};u.displayName="ErrorBoundary";const d="media_addon:get_features",c=e=>i.createGenericQuery({queryRouteFilter:["apiv2",d],queryFn:()=>async()=>({apiData:await e(),pkgData:null}),getQueryKey:i.getGenericQueryKey("apiv2",d)}),v=e=>{var t,r;const n=null===(r=null===(t=e.data)||void 0===t?void 0:t.apiData)||void 0===r?void 0:r.segments;return n&&(null==n?void 0:n.length)>0},p=e=>e===r.RivieraStatus.NotFound||e===r.RivieraStatus.TemporaryFailure;e.ErrorBoundary=u,e.canGenerateTranscriptFromRivieraStatus=p,e.getTranscriptPermission=e=>"video"===(null==e?void 0:e[".tag"])||"audio"===(null==e?void 0:e[".tag"])?e.transcript_permission:{".tag":"ineligible"},e.prefetchMediaAddon=async(e,t)=>{const r=c(e);await r.prefetchQuery(t,{})},e.useGetMediaAddonQuery=e=>{var t,r;return null===(r=null===(t=c(e).useQuery({}))||void 0===t?void 0:t.data)||void 0===r?void 0:r.apiData},e.useIsTranscriptAvailable=v,e.useShouldEnableClosedCaptionsButton=(e,t)=>{var n,i,a,o,s;const{isLoggedIn:l}=r.useFileViewerContext(),u="video"===(null===(n=null==t?void 0:t.content)||void 0===n?void 0:n[".tag"])||"audio"===(null===(i=null==t?void 0:t.content)||void 0===i?void 0:i[".tag"])?t.content.transcript_permission:void 0,d=r.useTranscriptDataQuery(e,t),c=r.useMaybeGenerateTranscript(e,t);return!!v(d)||!!u&&(!(d.isError&&!p(d.error.statusCode))&&((!d.isSuccess||0!==(null===(s=null===(o=null===(a=d.data)||void 0===a?void 0:a.apiData)||void 0===o?void 0:o.segments)||void 0===s?void 0:s.length))&&(!c.isError&&!!l)))},e.useShouldGenerateTranscript=e=>{var t,i;const a=n.useCurrentPreviewKey(),o=r.useTranscriptDataQuery(a,e),s=r.useMaybeGenerateTranscript(a,e);return!(!a||!e||"video"!==(null===(t=e.content)||void 0===t?void 0:t[".tag"])&&"audio"!==(null===(i=e.content)||void 0===i?void 0:i[".tag"]))&&(!(!o.error||!p(o.error.statusCode))&&(!s.isLoading&&!s.isError))},e.writeTranscriptToClipboard=(e,t=!1)=>{if(!e||0===e.length)return;const r=a.lodashExports.flatten(e.map((({text:e,startTime:r})=>t?[r,e]:[e]))).join("\r\n");navigator.clipboard.writeText(r)}}));
//# sourceMappingURL=c_core_riviera_transcripts.js-vflTIkqVW.map

//# debugId=edb03ff4-47f2-3f49-b6ee-b2fb8ed3bbab