!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4747c7b7-a201-3f55-8b20-75a6bfe70e45")}catch(e){}}();
define(["require","exports","react","./e_ui_page_files_router","./c_action_bar_action_bar_strings","./c_react_query_helpers_queries_upload_info","./c_dig-icons_assets_ui-icon_line_link","./c_api_v2_redux_file_viewer","./c_file_viewer_api_navigation","./c_file_viewer_api_ui","./c_dig-icons_assets_ui-icon_line_rewind","./c_file_viewer_api_clients","./c_dig-icons_assets_ui-icon_line_show","./c_action_plugins_open_in_action_dropdown","./c_file_viewer_hooks_usePrevious","./c_dig-icons_assets_ui-icon_line_print","./c_core_i18n","./c_conversions_actions_unzip","./c_file_viewer_api_data","./c_file_viewer_components_titlebar_menu_content","./c_react_query_helpers_queries_file_content_metadata","./e_data_modules_stormcrow","react-dom","./e_core_exception","./c_bem","./c_pap-events_replay_shown_modal","./c_ncct_manual_assist_util","./c_core_notify","./e_edison","./c_action_bar_action_bar_constants","./c__rollupPluginBabelHelpers","./c_lodash-es_lodash","./c_src_sink_index","./c_pap-events_pdf_edit_select_replace_original_confirmation","./c_memoize-one","react/jsx-runtime","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_chat_chat_constants","./c_extensions_data_selectors","./c_react_query_api_helpers_queries_seen_state_info","./c_src_bindings_api-context","./c_replay_replay_extensions","./c_pdf_editor_utils_entry_point_util","./c_unity_features","./c_ui_async_overquota_modal_controller","./c_pap-events_share_copy_shared_link","./c_google_one_tap_google_one_tap_platform","./c_google_one_tap_lib","./c_src_types_index","./c_ungated_idx_db_access_lib","./c_helpers_hooks_component-did-mount","./c_dig-icons_assets_ui-icon_line_restore","./c_signup_signin_helpers","./c_profile_services_profile_services_constants","./c_react-transition-group_CSSTransition","./c_react-transition-group_Transition","./c_share_modal_evolution_utils_logging","./c_flux_action_type","./c_src_common_format_bytes","./c_sharing_sharing_pap_logging_common_util","./c_sharing_sharing_pap_logging_shared_link_util","./c_dig-components_breadcrumb_index","./c_portable_delete","./c_portable_delete_strings","metaserver/static/js/langpack","./c_portable_delete_snackbars","./c_files_view_file_actions_snackbars","./c_file_viewer_toolbar_utils","./c_viewer_helpers","./c_file_viewer_toolbar_action_bar","./c_core_utils_browser_detection","./c_preview_audio_video_video_editing_constants","./c_file_viewer_components_preview_button","./c_file_viewer_keyboard_keyboard_connector","./c_file_viewer_utils_auto_open","./c_file_viewer_components_preview","./c_file_viewer_hooks_lifecycle_logging","./c_file_viewer_hooks_logging","./c_core_utils_region","./c_file_viewer_loading_indicator","./c_file_viewer_logging_timing","./c_web-vitals","./c_file_viewer_preview_archive_utils","./c_dig-icons_assets_ui-icon_line_text-box","./c_dig-icons_assets_ui-icon_line_slides","./c_dig-icons_assets_ui-icon_line_quota-reached","./c_dig-icons_assets_ui-icon_line_passwords","./c_file_viewer_preview_text","./c_integrations_hellosign_deep_integration_constants","./c_api_v2_redux_base_action","./c_react-use_useBeforeUnload","./c_file_viewer_preview_logger","./c_pap-events_previews_select_doc_page","./c_contacts_fetch","./c_react_query_helpers_queries_contacts_constants","./c_dig-icons_assets_ui-icon_line_redo","./c_keymaster","./c_dash_bridge_gating_utils","./c_lib_logging","./c_download_components_download-warning-modal","./c_fileops_downloads","./c_dig-foundations_stack","./c_dig-components_banner_index","./c_dig-icons_pictogram_icon","./c_dig-icons_assets_ui-icon_line_minus","./c_common_logging-contexts_sharing-keys","./c_common_logging-contexts_sharing-surface","./c_shared_link_logging_utils","./c_bug_reporting_routing","./c_common_logging_uxa_udcl_double_logger","./c_gen_api_auth_WebAuthWeb","./c_file_viewer_common_logged_out_editing","./c_sharing_ui_notifications_util","./c_pap-events_duplicate_files_open_duplicate_files_page","./c_sharing_sharing_pap_logging_create_shared_link_util","./c_sharing_sharing_pap_logging_copy_shared_link_util","./c_shared-link-attribution-tracking_components_sender_trackey_vendor","./c_dig-icons_assets_ui-icon_fill_ai","./c_dig-icons_assets_ui-icon_line_upload","./c_file_actions_portable_select_destination","./c_folder_dialog_api","./c_gen_browse_web_BrowseUtilWeb","./c_home_modals_async_home_modals","./c_pap-events_navigation_select_content_overflow_menu","./c_dig-icons_assets_ui-icon_line_sidebar-hide","./c_shareme24_browse_integration_async-show-shareme24","./c_pap-events_folder_modal_select_create_folder_modal_create_button","./c_dig-components_label_group_index","./c_file_viewer_preview_archive","./c_pass_pass_helpers","./c_flux_base_store","./c_flux_dispatcher","./c_sharing_settings_utils_link_metadata_types","./c_sharing_ui_util","./c_icon_icon_helper","./c_internals_content-manager-integration_async-show-access-management","./c_common_logging-contexts_desktop-platform-logging-metadata","./c_dig-icons_assets_ui-icon_line_zip","./c_dropbox_ai_assistant_dash_chat_dash_chat_button_portal","./c_ux_analytics_modal_tracking","./c_dig-icons_assets_ui-icon_line_video-enhance","./c_sharing_logger","./c_file_viewer_titlebar_use_titlebar_editor_action","./c_src_components_loading","./c_src_components_action-bar-strings","./c_pdf_editor_utils_nonce_random_subdomain","./c_dig-icons_assets_ui-icon_line_scale","./c_dig-icons_assets_ui-icon_line_image-enhance","./c_dig-icons_assets_ui-icon_line_slider","./c_dig-icons_assets_ui-icon_line_shape-rotate-right","./c_dig-icons_assets_ui-icon_line_scribble","./c_dig-icons_assets_ui-icon_line_video","./c_dig-icons_assets_ui-icon_line_cut","./c_flows_redux_reducer","./c_flows_logging_flows_loggers","./c_file_viewer_toolbar_toolbar_holder","./c_core_riviera_transcripts","./c_over-quota_over-quota-sweep-blocking-modal_use_over_quota_sweep_blocking_modal","./c_dig-content-icons_icons_file-generic-large","./c_quota_use_query_quota_upsell_info","./c_over-quota_utils_logger","./c_quota_utils","./c_files_view_unity_listener","./c_sharing_async_share_modal_util","./c_styled-components","./c_continuous_onboarding_milestone_api","./c_watermarking_utils_getImageDefaultSizes","./c_previews_util","./c_file_activity_data_store","./c_src_right-rail_right_rail","./c_mobile_web_assets_document_lottie","./c_dig-icons_assets_ui-icon_external-logo_twitter","./c_flows_conversions_conversion_actions","./c_flows_utils_browse_logger","./c_flows_redux_store","./c_flows_redux_actions","./c_flows_redux_selectors","./c_icon_templates_stateless_index","./c_spectrum_svg_icon_bundle","./c_shared_components_templates_modal_template","./c_profile_services_profile_services_link","./c_abuse_login_and_register_constants_fetch","./c_react_query_helpers_queries_login_and_register_constants","./c_gdd_migration_ui_utils","./c_file_imports_gdrive_file_picker","./c_shortcuts_conversion_utils","./c_flows_utils_auto_folder_helpers","./c_extensions_extensions_popover_content","./c_extensions_extensions_utils","./c_spectrum_modal_utility_modal","./c_spectrum_button","./c_spectrum_tertiary_link_tertiary_list","./c_spectrum_icon_action_index","./c_icon_templates_actionable_index","./c_spectrum_icon_form_index","./c_spectrum_scroll_locker","./c_ui_image","./c_dig-icons_assets_ui-icon_line_shuffle","./c_ui_sprite","./c_flows_utils_async_modal_launchers","./c_file_viewer_hooks_useExtractedText"],(function(e,i,_,n,o,t,c,s,r,a,l,u,d,p,S,g,f,v,w,h,b,A,m,I,E,P,C,D,y,T,N,L,O,R,F,k,K,x,U,M,H,V,G,B,q,W,z,Y,j,X,Z,Q,J,$,ee,ie,_e,ne,oe,te,ce,se,re,ae,le,ue,de,pe,Se,ge,fe,ve,we,he,be,Ae,me,Ie,Ee,Pe,Ce,De,ye,Te,Ne,Le,Oe,Re,Fe,ke,Ke,xe,Ue,Me,He,Ve,Ge,Be,qe,We,ze,Ye,je,Xe,Ze,Qe,Je,$e,ei,ii,_i,ni,oi,ti,ci,si,ri,ai,li,ui,di,pi,Si,gi,fi,vi,wi,hi,bi,Ai,mi,Ii,Ei,Pi,Ci,Di,yi,Ti,Ni,Li,Oi,Ri,Fi,ki,Ki,xi,Ui,Mi,Hi,Vi,Gi,Bi,qi,Wi,zi,Yi,ji,Xi,Zi,Qi,Ji,$i,e_,i_,__,n_,o_,t_,c_,s_,r_,a_,l_,u_,d_,p_,S_,g_,f_,v_,w_,h_,b_,A_,m_,I_,E_,P_,C_,D_,y_,T_,N_,L_,O_,R_,F_,k_,K_,x_,U_,M_){"use strict";function H_(e){if(e&&e.__esModule)return e;var i=Object.create(null);return e&&Object.keys(e).forEach((function(_){if("default"!==_){var n=Object.getOwnPropertyDescriptor(e,_);Object.defineProperty(i,_,n.get?n:{enumerable:!0,get:function(){return e[_]}})}})),i.default=e,Object.freeze(i)}var V_=H_(_);const G_={...t.fileActionCondition,filterValidFile:e=>{const i=t.fileActionCondition.filterValidFile(e);return!i||t.isPnmSuppressMoveSelected(i)||n.isEncryptedFile(i)?void 0:i}},B_=t.withActionCondition(G_,((i,_,t,s)=>({label:o.COPY_ACTION_STRING,userAction:n.UserAction.Copy,icon:c.CopyLine,action:{type:"click",handler:()=>new Promise((function(i,_){e(["./c_action_plugins_copy_action_action"],i,_)})).then((({copyActionWrapper:e})=>e({file:i.file,user:i.user,previewType:_,browseContext:t,browseExceptions:s})))},disabled:{disabled:!1}})),void 0),q_=t.withActionCondition(s.deleteActionCondition,((i,_,t,c,s)=>({label:o.DELETE_ACTION_STRING,icon:n.DeleteLine,userAction:n.UserAction.Delete,disabled:i.file.read_only?{disabled:!0,tooltipMessage:o.ACTION_DISABLED_STRING}:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,_){e(["./c_action_plugins_delete_action_action"],i,_)})).then((({deleteActionWrapper:e})=>e({logUserAction:_,setDeleteFileModalOpenCallback:t,file:i.file,user:i.user,previewSurface:c,onFileChanged:s})))}})),void 0),W_=t.withActionCondition(s.duplicateFilesActionCondition,((e,i)=>({userAction:void 0,label:o.FIND_DUPLICATES_ACTION_STRING,accessibleLabel:o.FIND_DUPLICATES_ACTION_STRING,action:{type:"click",handler:async()=>i()},disabled:{disabled:!1},icon:l.DuplicateLine})),void 0),z_=[n.SDKPreviewSurface.BROWSE,n.SDKPreviewSurface.FILE_LOCKING,n.SDKPreviewSurface.HELLOSIGN,n.SDKPreviewSurface.HOME,n.SDKPreviewSurface.INBAND_SHARE,n.SDKPreviewSurface.PHOTOS,n.SDKPreviewSurface.RECENTS,n.SDKPreviewSurface.SEARCH,n.SDKPreviewSurface.SHARED_COLLECTION,n.SDKPreviewSurface.SHARED_CONTENT_LINK,n.SDKPreviewSurface.SHARED_LINK,n.SDKPreviewSurface.SHARED_LINK_EMBED,n.SDKPreviewSurface.SHARED_COLLECTION,n.SDKPreviewSurface.STANDALONE_PREVIEW,n.SDKPreviewSurface.STARRED,n.SDKPreviewSurface.TRANSFER,n.SDKPreviewSurface.UNKNOWN,n.SDKPreviewSurface.VERSION_HISTORY,n.SDKPreviewSurface.FSS_DESKTOP_PREVIEW],Y_={filterValidFile:t.allowAllFiles,filterValidUser:t.filterLoggedInUser,shouldShowForPreviewSurface:t.filterSurfaceIn(z_),shouldShowForPreviewType:t.alwaysShow},j_=t.withActionCondition(Y_,((e,i)=>({userAction:void 0,icon:n.FileHistoryLine,label:o.FILE_ACTIVITY_ACTION_STRING,accessibleLabel:o.FILE_ACTIVITY_ACCESSIBILITY_STRING,action:{type:"click",handler:async()=>i()},disabled:{disabled:!1}})),void 0),X_=[n.SDKPreviewSurface.BROWSE,n.SDKPreviewSurface.FILE_LOCKING,n.SDKPreviewSurface.HELLOSIGN,n.SDKPreviewSurface.HOME,n.SDKPreviewSurface.INBAND_SHARE,n.SDKPreviewSurface.PHOTOS,n.SDKPreviewSurface.RECENTS,n.SDKPreviewSurface.SEARCH,n.SDKPreviewSurface.SHARED_CONTENT_LINK,n.SDKPreviewSurface.SHARED_LINK,n.SDKPreviewSurface.STANDALONE_PREVIEW,n.SDKPreviewSurface.STARRED,n.SDKPreviewSurface.FSS_DESKTOP_PREVIEW],Z_={filterValidFile:e=>!e||n.isInsideSharedFolder(e)||n.isEncryptedFile(e)?void 0:e,filterValidUser:e=>({user:e}),shouldShowForPreviewSurface:t.filterSurfaceIn(X_),shouldShowForPreviewType:t.alwaysShow},Q_=t.withActionCondition(Z_,((e,i,_,t,c,s)=>{const r=u.getConversionActions({getActiveFile:_,user:e.user},t);if(r.length)return{label:o.FILE_CONVERSION_STRING,userAction:n.UserAction.OpenSaveAs,disabled:{disabled:!1},icon:d.ConvertFileLine,action:{type:"menu",menu:V_.default.createElement(u.FileConversionMenuSegment,{context:n.UserActionContext.FileMenu,conversionActions:r,encryptionOptions:c,file:e.file,logUserAction:i,user:e.user,sharedLinkInfo:_().sharedLinkInfo,sharePermissions:_().sharePermission,previewSurface:s})}}}),void 0),J_=e=>({userAction:void 0,disabled:{disabled:!1},action:{type:"click",handler:async()=>e()},label:o.INFO_ACTION_STRING,accessibleLabel:o.INFO_ACCESSIBILITY_STRING,icon:n.InfoLine}),$_=t.withActionCondition(s.moveActionCondition,((i,_,t,c,s,r)=>({label:o.MOVE_ACTION_STRING,icon:n.MoveLine,userAction:n.UserAction.Move,disabled:i.file.read_only?{disabled:!0,tooltipMessage:o.ACTION_DISABLED_STRING}:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,_){e(["./c_action_plugins_move_action_action"],i,_)})).then((({moveActionWrapper:e})=>e({file:i.file,user:i.user,previewType:_,previewSurface:t,onFileChanged:c,browseContext:s,browseExceptions:r})))}})),void 0),en=[n.PreviewType.SsrDoc,n.PreviewType.Image,n.PreviewType.Text,n.PreviewType.Excel],_n={shouldShowForPreviewSurface:t.alwaysShow,shouldShowForPreviewType:t.filterPreviewTypeIn(en),filterValidUser:e=>({user:e}),filterValidFile:(e,i,_)=>_||n.isEncryptedFile(e)?void 0:e},nn=t.withActionCondition(_n,((e,i)=>({label:o.PRINT_ACTION_STRING,userAction:n.UserAction.Print,disabled:{disabled:!1},action:{type:"click",handler:async()=>i()},icon:g.PrintLine})),void 0),on=t.withActionCondition(t.renameActionConditions,((e,i)=>({label:o.RENAME_ACTION_STRING,icon:n.CursorLine,userAction:n.UserAction.Rename,action:{type:"click",handler:async()=>{i(!0)}},disabled:e.file.read_only?{disabled:!0,tooltipMessage:o.ACTION_DISABLED_STRING}:{disabled:!1}})),void 0),tn=t.withActionCondition(s.starActionConditions,((e,i,_,o,t)=>({label:o,icon:_,userAction:i?n.UserAction.Unstar:n.UserAction.Star,action:{type:"click",handler:async()=>t()},disabled:{disabled:!1}})),void 0),cn=f.defineMessage({id:"pB6h1Y",defaultMessage:"Archive files over 512 MB cannot be extracted"}),sn=t.withActionCondition(s.unzipActionConditions,((i,_)=>{const o=i.file.bytes/1048576;return{label:v.UNZIP_ACTION_MESSAGE,icon:v.UnzipAction.actionIcon,disabled:o>=v.UNZIP_MAX_FILESIZE_MB?{disabled:!0,tooltipMessage:cn}:{disabled:!1},userAction:n.UserAction.Unzip,action:{type:"click",handler:()=>new Promise((function(i,_){e(["./c_action_plugins_unzip_action_action"],i,_)})).then((({unzipAction:e})=>e({user:i.user,file:i.file,shareToken:_})))}}}),void 0),rn=[n.SDKPreviewSurface.BROWSE,n.SDKPreviewSurface.BACKUP,n.SDKPreviewSurface.FILE_LOCKING,n.SDKPreviewSurface.HELLOSIGN,n.SDKPreviewSurface.HOME,n.SDKPreviewSurface.INBAND_SHARE,n.SDKPreviewSurface.PHOTOS,n.SDKPreviewSurface.RECENTS,n.SDKPreviewSurface.SEARCH,n.SDKPreviewSurface.SHARED_CONTENT_LINK,n.SDKPreviewSurface.SHARED_LINK,n.SDKPreviewSurface.STANDALONE_PREVIEW,n.SDKPreviewSurface.STARRED,n.SDKPreviewSurface.POLLUX_DESKTOP_PREVIEW,n.SDKPreviewSurface.POLLUX_DESKTOP_SEARCH_PREVIEW],an={filterValidFile:e=>function(e){const i=t.fileActionCondition.filterValidFile(e);return!!i&&!n.isCloudBasedDoc(i)&&!n.isWebShortcutByExtension(i.fq_path)}(e)?e:void 0,filterValidUser:t.filterLoggedInUser,shouldShowForPreviewSurface:t.filterSurfaceIn(rn),shouldShowForPreviewType:t.alwaysShow};const ln=t.withActionCondition(an,(i=>({label:o.VERSION_HISTORY_ACTION_STRING,icon:n.ClockLine,userAction:n.UserAction.VersionHistory,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,_){e(["./c_action_plugins_version_history_action_action"],i,_)})).then((({versionHistoryActionWrapper:e})=>e(i.file,i.user)))}})),void 0);i.default=({contentProps:e})=>{var i,_;const{previewSurface:o,pluginArgs:c,fileConfig:l,hasOpenInActions:d}=s.usePluginMigrationContext(),{logUserAction:g}=n.useFileViewerContext(),f=null!==(i=n.useCurrentPreviewMetadata().previewType)&&void 0!==i?i:n.PreviewType.Loading,v=c.getActiveFile().file,m=c.getActiveFile().sharePermission,I=c.user,E=w.useRootFile(),{data:P}=b.useFileContentMetadataQuery(E),C=w.useIsNestedArchiveFile(),D=null===(_=null==P?void 0:P.apiData)||void 0===_?void 0:_.metadata,{onFileChanged:y,browseContext:T,browseExceptions:N,canRestoreRevision:L,getActiveFile:O,shareToken:R,encryptionOptions:F,reduceUpsells:k,onRestoreRevision:K,userPresentableVerdict:x}=c,U=V_.useMemo((()=>({file:v,user:I,previewSurface:o,previewType:f,sharePermission:m,isNestedArchiveFile:C,canRestoreRevision:L})),[v,L,C,o,f,m,I]),M=(e=>{const i=r.useSetLeftSidebarCallback(n.UserActionContext.FileMenu);return V_.default.useMemo((()=>j_(e,(()=>i(n.FILE_ACTIVITY_PLUGIN_ID)))),[e,i])})(U),H=(()=>{const e=r.useSetLeftSidebarCallback(n.UserActionContext.FileMenu);return V_.default.useMemo((()=>J_((()=>e(n.INFO_BLADE_PLUGIN_ID)))),[e])})(),V=((e,i)=>{const{onPrint:_}=S.usePreviewControls(),o=u.usePrintCallback(),t=n.useStabilizedCallback((()=>{null==_||_(),o()}));return V_.default.useMemo((()=>i.enable_print?nn(e,t):void 0),[e,i.enable_print,t])})(U,l),G=((e,i)=>{const _=n.getStoreForStarred(),{isStarred:o,message:c,iconSrc:s,handleClick:r}=t.useStarControlWithStore({getActiveFile:i,user:e.user,starredStore:_});return V_.default.useMemo((()=>tn(e,o,s,c,r)),[e,r,s,o,c])})(U,O),B=r.useToggleRenameStateCallback(),q=r.useSetDeleteFileModalOpenCallback(),W=((e,i)=>{const _=a.useRightSidebarId()===n.DUPLICATE_FILES_BLADE_PLUGIN_ID,o=r.useCloseSidebarCallback(i),t=r.useSetRightSidebarCallback(i),c=s.useDuplicateFilesExperimentVariant(),l=s.shouldShowDuplicateFiles(c,e.previewSurface),u=V_.default.useCallback((()=>{_?o(n.DUPLICATE_FILES_BLADE_PLUGIN_ID):t(n.DUPLICATE_FILES_BLADE_PLUGIN_ID)}),[o,_,t]);return V_.default.useMemo((()=>l?W_(e,u):void 0),[l,e,u])})(U,n.UserActionContext.FileMenu),z=s.useEmitter(),Y=V_.useCallback((e=>{n.isSharedFile(v)&&z.select(s.ON_CLICK_SHARED_CONTENT_ACTION).emit({actionElement:"action_bar",action:e})}),[z,v]),j=A.useQueryClient(),X=V_.useMemo((()=>[[$_(U,f,o,y,T,N),B_(U,f,T,N),q_(U,g,q,o,y),on(U,B)],[G],[H,ln(U),M],[p.makeOpenInAction(U,!!d),Q_(U,g,O,D,F,o),sn(U,R),...s.makeDownloadActions(U,O,g,D,o,k,R,m,F,null==E?void 0:E.name,n.UserActionContext.FileMenu,j,Y,x),s.makeRestoreAction(U,K)],[W],[V]]),[U,f,o,y,T,N,g,q,B,G,H,M,d,O,D,F,R,k,m,null==E?void 0:E.name,Y,x,j,K,W,V]),Z=V_.useCallback((e=>g(e,n.UserActionContext.FileMenu)),[g]);return V_.createElement(h.TitlebarMenuContent,{options:X,elementId:"file-menu",contentProps:e,logAction:Z})}}));
//# sourceMappingURL=c_title_bar_dropdowns_titlebar_file_dropdown.after-display.js-vflFZ3Fjx.map

//# debugId=4747c7b7-a201-3f55-8b20-75a6bfe70e45