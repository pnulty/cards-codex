!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="44263ab4-c017-3b5e-8fcf-07a0a9244235")}catch(e){}}();
define(["require","exports","react","./e_ui_page_files_router","./c_ui_locked-state-modal_open_locked_state_modal","./c_over-quota_over-quota-sweep-blocking-modal_over_quota_sweep_blocking_modal_wrapper","./c_core_i18n","./c_ui_contextual-nudge_atoms"],(function(e,t,a,n,o,s,i,l){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var u=r(a);const c="ops.trials.locked_state_modal_wrapper_loading",d=({children:t,action:a,onStatusChange:s})=>{const i=(t=>{const[a,s]=u.default.useState(n.Status.LOADING),{viewer:i,isLoading:l}=n.useViewer();return u.default.useEffect((()=>{var r;if(a!==n.Status.LOADING)return;if(l)return;if(!o.getIsUserEligibleForLockedStateModal(i))return void s(n.Status.USER_NOT_ELIGIBLE_FOR_LOCKED_STATE_MODAL);const u={action:t,isAdmin:(null===(r=i.active_user)||void 0===r?void 0:r.is_team_admin)||!1,teamName:i.team_name||"",continueCallback:()=>{s(n.Status.USER_CONTINUED_ACTION)},abortCallback:()=>{s(n.Status.USER_ABORTED_ACTION)}};new Promise((function(t,a){e(["./c_ui_locked-state-modal_open_locked_state_modal"],t,a)})).then((e=>{e.openLockedStateModal(u).then((e=>{e||s(n.Status.FAILURE)}))})),s(n.Status.OPEN)}),[t,a,i,l]),a})(a),l=u.default.useRef(null);return u.default.useEffect((()=>{i!==l.current&&(s(i),l.current=i,i===n.Status.LOADING?n.UDCL.logStart(c,{tags:{action:a}}):i===n.Status.OPEN?n.UDCL.logEnd(c,{eventState:"success",tags:{action:a}}):i===n.Status.USER_NOT_ELIGIBLE_FOR_LOCKED_STATE_MODAL?n.UDCL.logEnd(c,{eventState:"canceled",tags:{action:a}}):i===n.Status.FAILURE?n.UDCL.logEnd(c,{eventState:"failed",tags:{action:a}}):i!==n.Status.USER_CONTINUED_ACTION&&i!==n.Status.USER_ABORTED_ACTION||n.UDCL.logEvent("ops.trials.locked_state_modal_wrapper_end_state",{tags:{status:i,action:a}}))}),[i,s,a]),i===n.Status.LOADING||i===n.Status.OPEN||i===n.Status.USER_ABORTED_ACTION?null:u.default.createElement(u.default.Fragment,null,t)};d.displayName="LockedStateModalWrapper";const m=e=>{const{children:t,action:a,withLockedStateModal:n=!0,onStatusChange:o}=e;return u.createElement(s.OverQuotaSweepBlockingModalWrapperWithProviders,{action:a,onStatusChange:o},n?u.createElement(d,{action:a,onStatusChange:o},t):t)};m.displayName="ShareBlockingWrapper";const g=i.defineMessage({id:"DDL59e",defaultMessage:"Your file is ready to collaborate on"}),f=i.defineMessage({id:"f72aSQ",defaultMessage:"Edit and comment together, all in one place."}),_=i.defineMessage({id:"2hXjOl",defaultMessage:"Set up your team to stay in sync"}),p=i.defineMessage({id:"maqxSQ",defaultMessage:"Team folders sync updates for everyone automatically."}),C=i.defineMessage({id:"klK+wr",defaultMessage:"Try it"}),E=i.defineMessage({id:"PWWPWZ",defaultMessage:"Create team folder"}),S=i.defineMessage({id:"dunXAE",defaultMessage:"Close button"}),b=i.defineMessage({id:"/6LBKV",defaultMessage:"Premium feature"});n.injectInternalStyle("/static/js/growth-components/contextual-nudge-message-section/contextual-nudge-message-section.module.out-vflVXuuu1.css",(e=>"._contextual-nudge-message-section-container_1m5e6_1{background:var(--dig-color__background__base)}._contextual-nudge-message-section-container-hidden_1m5e6_5{display:none}._contextual-nudge-message-section_1m5e6_1{background:var(--dig-color__highlight__green);background:color-mix(in srgb,var(--dig-color__highlight__green) 25%,transparent);border:1px solid var(--dig-color__identity__green);position:relative}._contextual-nudge-message-section-close-button_1m5e6_17{position:absolute;right:6px;top:6px}"));const x="_contextual-nudge-message-section-container_1m5e6_1",v="_contextual-nudge-message-section-container-hidden_1m5e6_5",h="_contextual-nudge-message-section_1m5e6_1",N="_contextual-nudge-message-section-close-button_1m5e6_17",A={createTeamFolder:{title:_,subtitle:p,confirmCTAText:E},editAndComment:{title:g,subtitle:f,confirmCTAText:C}},k=({variant:e="editAndComment",onConfirmCallback:t,onDismissCallback:o})=>{const s=i.useIntl(),[l,r]=a.useState(!0);return u.default.createElement(n.Box,{className:n.cx(x,{[v]:!l}),borderRadius:"XLarge"},u.default.createElement(n.Box,{"data-testid":"contextual-nudge-message-section",className:h,display:"flex",alignItems:"flex-start",padding:"Micro Medium",borderRadius:"XLarge",columnGap:"8"},u.default.createElement(n.IconButton,{"data-testid":"contextual-nudge-message-section-close-button",className:N,variant:"transparent",size:"small",onClick:()=>{r(!1),o()},"aria-label":s.formatMessage(S)},u.default.createElement(n.UIIcon,{src:n.CloseLine})),u.default.createElement(n.UIIcon,{"data-testid":"contextual-nudge-message-section-upsell-icon",size:"medium",src:n.UpsellLine,"aria-label":s.formatMessage(b)}),u.default.createElement(n.Box,{display:"flex",flexDirection:"column",rowGap:"8"},u.default.createElement(n.Box,null,u.default.createElement(n.Text,{"data-testid":"contextual-nudge-message-section-title",variant:"label",size:"medium",tagName:"div",isBold:!0},s.formatMessage(A[e].title)),u.default.createElement(n.Text,{"data-testid":"contextual-nudge-message-section-subtitle",variant:"label",size:"medium",tagName:"div"},s.formatMessage(A[e].subtitle))),u.default.createElement(n.Box,null,u.default.createElement(n.Button,{"data-testid":"contextual-nudge-message-section-confirm-button",variant:"transparent",onClick:t},s.formatMessage(A[e].confirmCTAText))))))};k.displayName="ContextualNudgeMessageSection";const L=["contextual-nudge-out-of-band-file-sharing-individual-trial-users-edit-and-comment","contextual-nudge-out-of-band-file-sharing-team-trial-users-edit-and-comment","contextual-nudge-out-of-band-folder-sharing-adopt-team-space"],M={"contextual-nudge-out-of-band-folder-sharing-adopt-team-space":"createTeamFolder","contextual-nudge-out-of-band-file-sharing-individual-trial-users-edit-and-comment":"editAndComment","contextual-nudge-out-of-band-file-sharing-team-trial-users-edit-and-comment":"editAndComment"},O=({campaignName:e,campaignData:t,fqPath:o,onClose:s})=>{const{user:r}=n.useActiveUser(),c=u.default.useRef(!1),d=M[e],{onConfirmCallback:m,onDismissCallback:g,onLogImpressionCallback:f,onLogClientDispatchedCallback:_}=n.useCampaignActions(t);a.useEffect((()=>{_()}),[_]),a.useEffect((()=>{f()}),[f]),a.useEffect((()=>(c.current=!1,()=>{c.current||g()})),[]);const p=n.useSetAtom(l.showCreateTeamModalAtom);return u.default.createElement(i.Provider,{value:i.intl},u.default.createElement(n.Box,{paddingTop:"8"},u.default.createElement(k,{variant:d,onConfirmCallback:()=>{switch(d){case"createTeamFolder":p(!0);break;case"editAndComment":if(o&&r){const e=n.preview_uri_for_fq_path(r,o,{},!1);n.CompatNavigate.navigate(e.toRelativeUri())}}c.current=!0,m(),s()},onDismissCallback:()=>{c.current=!0,g()}})))};O.displayName="ContextualNudgeMessageSectionWithCampaignActions";const T=({fqPath:e,onClose:t})=>{const[o,s]=a.useState(null),[i,l]=a.useState(null);return a.useEffect((()=>(L.forEach((e=>{n.listenForCustomCampaignEvent(e,(e=>t=>{s(e),l(t),n.getCampaignsEmitter().removeAllListeners(e)})(e))})),()=>{L.forEach((e=>{n.getCampaignsEmitter().removeAllListeners(e)}))})),[]),i&&o?u.default.createElement(O,{campaignName:o,campaignData:i,fqPath:e,onClose:t}):null};T.displayName="CampaignContextualNudgeSection",t.CampaignContextualNudgeSection=T,t.ShareBlockingWrapper=m}));
//# sourceMappingURL=c_ui_contextual-nudge_campaign-contextual-nudge-section.js-vfl-vdWpL.map

//# debugId=44263ab4-c017-3b5e-8fcf-07a0a9244235