!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="701d4194-1dd5-37ff-8cb6-864aa45896aa")}catch(e){}}();
define(["require","exports","./c_core_i18n","./c_google_one_tap_google_one_tap_platform","./e_ui_page_files_router","./c_portable_delete_snackbars"],(function(e,n,o,i,t,r){"use strict";const a=e=>{const n=new URL(window.location.href);for(const o of e)n.searchParams.delete(o);window.history.replaceState(null,"",n.href)},l="init",s=["edit","verify_email"],g=["save"],c=o.defineMessage({id:"OMdXIO",defaultMessage:"To edit a copy of this file, log in or sign up"});function u(e){return r.imageEditorInitialActionStrings.includes(e)}function d(e){return g.includes(e)}const p=(e,n,o)=>{const r=(e=>e===t.PreviewType.Image||e===t.PreviewType.SsrDoc)(n)?t.LoginOrRegisterKind.SHARED_LINK_UNGATED_EDIT:t.LoginOrRegisterKind.LOGGED_OUT_EDIT,a=new URL(window.location.href);a.searchParams.set(e.action,"1"),e.initialAction&&a.searchParams.set(l,e.initialAction);const s=n===t.PreviewType.Image?i.RegistrationSource.IMAGE_EDIT:n===t.PreviewType.SsrDoc?i.RegistrationSource.PDF_EDIT:"logged_out_unknown",{cleanupGOTLoginContinuation:g,cleanupGOTSignInSignUpTags:c}=((e,n)=>{const o=window.location.href,t=i.GoogleOneTapPlatform.getCurrentSignInTag(),r=i.GoogleOneTapPlatform.getCurrentSignUpTag();return i.GoogleOneTapPlatform.updateLoginContUrl(e),{cleanupGOTLoginContinuation:()=>i.GoogleOneTapPlatform.updateLoginContUrl(o),cleanupGOTSignInSignUpTags:()=>i.GoogleOneTapPlatform.updateSignInSignUpTags(t,r)}})(a.href),u={mode:t.Mode.LOGIN,kind:r,encryptionOptions:o,authDialogPreviousElement:t.AuthDialogPreviousElementTag.EDIT,sharedLinkUrl:a.href,onCancel:()=>{g(),c()},previewType:n,webSignInTag:"logged_out_unknown"};switch(n){case t.PreviewType.Image:case t.PreviewType.SsrDoc:return{...u,signupTag:s,webSignInTag:s};default:return u}};n.INITIAL_ACTION_QUERY_PARAM=l,n.getActionContinuationModalProps=(e,n,o)=>{const i=p(e,n,o);return{signup_tag:i.signupTag,onCancel:i.onCancel,googleRegisterProps:i.sharedLinkUrl?{signupContinuationUrl:i.sharedLinkUrl}:void 0,loginContinuationUrl:i.sharedLinkUrl}},n.getActionFromURL=()=>{const e=new URL(window.location.href);let n;for(const o of s)if("1"===e.searchParams.get(o)){n=o;break}if(!n||!function(e){return s.includes(e)}(n))return;const o=e.searchParams.get(l),i=o&&function(e){if(!e)return!0;for(const n of[u,d])if(n(e))return!0;return!1}(o)?o:void 0;return a([l]),{action:n,initialAction:i}},n.getSUSIArgsForPreviewType=p,n.isUngatedEditorInitialAction=d,n.loggedOutEditButtonTooltip=c,n.loggedOutSUSIAndActionContinuationHandler=(n,o,i,t)=>async()=>{const{showAuthModal:r}=await new Promise((function(n,o){e(["./c_react_query_helpers_queries_upload_info"],n,o)})).then((function(e){return e.show_auth_modal_esnext})),a=p(n,o,i);r({...a,onCancel:()=>{var e;null===(e=a.onCancel)||void 0===e||e.call(a),null==t||t()}})},n.removeFragmentFromURL=e=>{const n=window.location.href.replace(e,"");window.history.replaceState(null,"",n)},n.removeQueryParams=a}));
//# sourceMappingURL=c_file_viewer_common_logged_out_editing.js-vfle7i9zy.map

//# debugId=701d4194-1dd5-37ff-8cb6-864aa45896aa