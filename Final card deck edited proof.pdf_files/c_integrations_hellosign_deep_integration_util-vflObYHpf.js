!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="90f98b5e-1244-3b95-bb5e-8db23b9e3ff4")}catch(e){}}();
define(["exports","./e_core_exception","./c_integrations_hellosign_deep_integration_constants","./e_ui_page_files_router","react","./c_core_i18n","./c_pdf_editor_utils_entry_point_util","./c_lodash-es_lodash"],(function(e,t,n,r,i,o,_,E){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=a(i);const S=e=>{let t,n;e.header&&(t=s.default.createElement(r.Modal$1.Title,null,o.intl.formatMessage(e.header))),e.body&&(n=o.intl.formatMessage(e.body));const i=e.confirmationString||o.defineMessage({id:"4aLDLg",defaultMessage:"OK"});return s.default.createElement(r.Modal$1,{open:e.isOpen,isCentered:!0,withCloseButton:o.intl.formatMessage({id:"iBwqMt",defaultMessage:"Close"}),onRequestClose:e.close},s.default.createElement(r.Modal$1.Header,{hasBottomSpacing:"title-standard"},t),s.default.createElement(r.Modal$1.Body,{hasVerticalSpacing:!1},n),s.default.createElement(r.Modal$1.Footer,null,e.additionalCloseButton&&s.default.createElement(r.Button,{variant:"opacity",onClick:e.close},o.intl.formatMessage(e.additionalCloseButton)),s.default.createElement(r.Button,{variant:"primary",onClick:()=>{e.confirmRedirect?window.open(e.confirmRedirect):e.onConfirm?e.onConfirm():e.close()},withIconLeft:e.confirmRedirect?s.default.createElement(r.UIIcon,{src:r.OpenLine}):null},o.intl.formatMessage(i))))};S.displayName="ConfirmationModal";const l=o.defineMessages({overFileLimitError:{id:"+2TtIJ",defaultMessage:"The page count and file size are too large for signatures in PDF. Try reducing the file to less than 40MB or 500 pages."}});var d,u;e.EntryPointType=void 0,(d=e.EntryPointType||(e.EntryPointType={})).SELF_SIGN="SELF_SIGN",d.SEND_FOR_SIGNATURE="SEND_FOR_SIGNATURE",d.TEMPLATE="TEMPLATE",e.EntryPointSurface=void 0,(e.EntryPointSurface||(e.EntryPointSurface={})).SIGNATURES="SIGNATURES",e.SignEditorType=void 0,(u=e.SignEditorType||(e.SignEditorType={})).PDF_EDITOR="PDF_EDITOR",u.DEEP_INTEGRATION="DEEP_INTEGRATION";const c=()=>{r.mountModal(s.default.createElement(S,{isOpen:!0,close:()=>r.unmountModal(),header:o.defineMessage({id:"dyerh1",defaultMessage:"Canâ€™t add signature."}),body:l.overFileLimitError}))},f=async(t,r,i)=>{if(t!==e.EntryPointType.SELF_SIGN&&t!==e.EntryPointType.SEND_FOR_SIGNATURE&&t!==e.EntryPointType.TEMPLATE)throw new Error("entry_point_not_supported");if(!r.ext||!n.HELLOSIGN_SUPPORTED_EXTENSIONS.includes(`.${r.ext}`))throw new Error("file_extension_not_supported");let o=e.SignEditorType.DEEP_INTEGRATION;if(("pdf"===r.ext||g(r.ext))&&(o=e.SignEditorType.PDF_EDITOR),o===e.SignEditorType.PDF_EDITOR){if(r.bytes>n.HELLO_SIGN_MAX_FILE_SIZE)throw new Error("size_over_limit");if(r.pageCount&&r.pageCount>n.HELLO_SIGN_MAX_PAGES)throw new Error("page_count_over_limit")}return o===e.SignEditorType.PDF_EDITOR},N=(e="unknown")=>{t.reportStack("Attempted to launch deprecated Deep Integration from Web surface",{severity:t.SEVERITY.CRITICAL,tags:["deep_integration_deprecation",e]})},T=async(e,t)=>{const n=await new r.StormcrowGatingClient(t).getVariant({features:[e]});let i="OFF";return n&&n.variantInfos.forEach((t=>{t.feature===e&&(i=t.variant||"OFF")})),i};E.memoize(T);const I=e=>{let t=_.SendForSignatureEntryPoints.PREVIEW_SHARE_DROPDOWN_SEND_FOR_SIGNATURE;return e===r.SDKPreviewSurface.BROWSE?t=_.SendForSignatureEntryPoints.BROWSE_PREVIEW_SHARE_DROPDOWN_SEND_FOR_SIGNATURE:e===r.SDKPreviewSurface.STANDALONE_PREVIEW?t=_.SendForSignatureEntryPoints.STANDALONE_PREVIEW_SHARE_DROPDOWN_SEND_FOR_SIGNATURE:e===r.SDKPreviewSurface.SHARED_LINK&&(t=_.SendForSignatureEntryPoints.SHARED_LINK_SHARE_DROPDOWN_SEND_FOR_SIGNATURE),t},g=e=>n.SIGN_NON_PDF_IN_PDF_EDITOR_SUPPORTED_EXTENSIONS.includes(e);e.getDesktopDeepLinkSource=e=>{switch(e){case"file_context_menu_mac":return _.SendForSignatureEntryPoints.DESKTOP_FILE_CONTEXT_MENU_MAC_SEND_FOR_SIGNATURE;case"file_context_menu_win":return _.SendForSignatureEntryPoints.DESKTOP_FILE_CONTEXT_MENU_WIN_SEND_FOR_SIGNATURE;case"file_context_menu_linux":return _.SendForSignatureEntryPoints.DESKTOP_FILE_CONTEXT_MENU_LINUX_SEND_FOR_SIGNATURE;case"file_context_menu_mac_self_sign":return _.SelfSignEntryPoints.DESKTOP_FILE_CONTEXT_MENU_MAC_SELF_SIGN;case"file_context_menu_win_self_sign":return _.SelfSignEntryPoints.DESKTOP_FILE_CONTEXT_MENU_WIN_SELF_SIGN;case"file_context_menu_linux_self_sign":return _.SelfSignEntryPoints.DESKTOP_FILE_CONTEXT_MENU_LINUX_SELF_SIGN;default:return _.SendForSignatureEntryPoints.DESKTOP_FILE_CONTEXT_MENU_UNKNOWN_SEND_FOR_SIGNATURE}},e.getVariant=T,e.handleFileOverLimitError=c,e.isNonPdfEnabledInPdfEditor=g,e.isOpenWithSelfSign=e=>{switch(e){case"file_context_menu_mac_self_sign":case"file_context_menu_win_self_sign":case"file_context_menu_linux_self_sign":return!0;default:return!1}},e.openSendForSignatureOnPreviews=async(t,n,i,o,_,E,a)=>{var s;const S=r.getExtension({fq_path:null!==(s=t.fq_path)&&void 0!==s?s:""});try{await f(e.EntryPointType.SEND_FOR_SIGNATURE,{ext:S,bytes:t.bytes,pageCount:_},o)?n(r.PDF_EDITOR_PLUGIN_ID,r.UserActionContext.Toolbar,{source:I(i),highlight:"send_for_signature"}):N(a||"share_menu")}catch(e){e instanceof Error&&("size_over_limit"===e.message||"page_count_over_limit"===e.message)&&c()}},e.reportDILaunchAttempt=N,e.shouldUsePDFEditorFromDesktop=e=>!(!e||!n.HELLOSIGN_SUPPORTED_EXTENSIONS.includes(`.${e}`))&&("pdf"===e||g(e)),e.shouldUsePdfEditor=f}));
//# sourceMappingURL=c_integrations_hellosign_deep_integration_util.js-vfleAua_d.map

//# debugId=90f98b5e-1244-3b95-bb5e-8db23b9e3ff4